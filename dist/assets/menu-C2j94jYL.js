import{r as i,j as r,m as ds,s as Fe,t as Nt,v as Le,w as me,x as Ve,y as L,n as tt,z as nl,R as j,b as R,P as us,A as rl,T as le,e as ce,f as de,B as sl,q as al,p as ol,C as il,S as Ft,D as ll,u as cl}from"./index-4Cz_Moiq.js";import{W as fs,X as ir,Y as dl,Z as lr,_ as ul,$ as fl,a0 as pl,a1 as hl,a2 as ml,a3 as xl,a4 as gl,a5 as bl,a6 as vl,a7 as wl,a8 as dn,a9 as yl,aa as ps,ab as cr,ac as hs,ad as ms,ae as xs,af as gs,ag as bs,ah as vs,ai as ws,aj as ys,ak as js,al as Cs,am as Ns,an as Ss,ao as Rs,ap as _s,aq as Ms,C as Is,ar as Ds,b as pe,m as un,c as ae,d as Vt,u as Se,n as Ht,as as dr,at as nn,au as jl,av as lt,aw as $e,Q as ks,ax as ur,ay as fr,az as Cl,aA as An,aB as Nl,aC as Sl,aD as Rl,s as _l,aE as Ml,I as Il,aF as Es,aG as Dl,aH as kl,aI as El,aJ as Tl,aK as Ts,aL as Al,aM as Pl,t as Ol,l as Ll}from"./canvas-utils-Dtqfc-zs.js";import{V as zl,h as Xr,F as Bn,i as As,j as $l,k as pr,l as hr,n as mr,S as fn,o as Bl,p as Fl,q as Vl,s as Hl,r as Gl,u as xr,X as Kl,v as Ps,w as Os,x as Ul,R as Wl,P as ql,C as Ls,y as Xl,T as zs,D as $s,O as Bs,z as Yl,A as Ql,B as Zl}from"./code-editor-Ch4gm5VD.js";import{P as q,B as X,L as rt,l as Jl,b as ec}from"./label-D_EewkRs.js";import{c as xe,d as Yr,a as Fs,u as tc,k as pt,K as ht}from"./theme-provider-BDcPqgZH.js";import{S as jt}from"./canvas-YpW1lCia.js";import{c as nc,u as pn,C as rc,a as sc,b as Me}from"./databases-BNVpV01H.js";import{D as W}from"./database-type-C2NNW5SW.js";import{d as ac,a as oc,s as ic}from"./storage-provider-CvYCbJFz.js";import"./env-DbJuYSok.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=xe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=xe("ChevronsLeftRightEllipsis",[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=xe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=xe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=xe("FileKey2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v6",key:"rc0qvx"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"4",cy:"16",r:"2",key:"1ehqvc"}],["path",{d:"m10 10-4.5 4.5",key:"7fwrp6"}],["path",{d:"m9 11 1 1",key:"wa6s5q"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=xe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=xe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=xe("Group",[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=xe("ListCollapse",[["path",{d:"m3 10 2.5-2.5L3 5",key:"i6eama"}],["path",{d:"m3 19 2.5-2.5L3 14",key:"w2gmor"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=xe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=xe("SquareStack",[["path",{d:"M4 10c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"4i38lg"}],["path",{d:"M10 16c-1.1 0-2-.9-2-2v-4c0-1.1.9-2 2-2h4c1.1 0 2 .9 2 2",key:"mlte4a"}],["rect",{width:"8",height:"8",x:"14",y:"14",rx:"2",key:"1fa9i4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=xe("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=xe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);var Us=i.forwardRef((e,t)=>{const{children:n,...s}=e,a=i.Children.toArray(n),o=a.find(xc);if(o){const c=o.props.children,l=a.map(d=>d===o?i.Children.count(c)>1?i.Children.only(null):i.isValidElement(c)?c.props.children:null:d);return r.jsx(Vn,{...s,ref:t,children:i.isValidElement(c)?i.cloneElement(c,void 0,l):null})}return r.jsx(Vn,{...s,ref:t,children:n})});Us.displayName="Slot";var Vn=i.forwardRef((e,t)=>{const{children:n,...s}=e;if(i.isValidElement(n)){const a=bc(n);return i.cloneElement(n,{...gc(s,n.props),ref:t?ds(t,a):a})}return i.Children.count(n)>1?i.Children.only(null):null});Vn.displayName="SlotClone";var mc=({children:e})=>r.jsx(r.Fragment,{children:e});function xc(e){return i.isValidElement(e)&&e.type===mc}function gc(e,t){const n={...t};for(const s in t){const a=e[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...l)=>{o(...l),a(...l)}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function bc(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Ws(e){const t=i.useRef({value:e,previous:e});return i.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var vc=[" ","Enter","ArrowUp","ArrowDown"],wc=[" ","Enter"],Gt="Select",[hn,mn,yc]=lr(Gt),[St,qp]=Nt(Gt,[yc,fs]),xn=fs(),[jc,Je]=St(Gt),[Cc,Nc]=St(Gt),qs=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:a,onOpenChange:o,value:c,defaultValue:l,onValueChange:d,dir:u,name:f,autoComplete:p,disabled:x,required:m,form:v}=e,h=xn(t),[b,y]=i.useState(null),[g,w]=i.useState(null),[C,S]=i.useState(!1),k=ir(u),[_=!1,I]=Fe({prop:s,defaultProp:a,onChange:o}),[T,N]=Fe({prop:c,defaultProp:l,onChange:d}),P=i.useRef(null),G=b?v||!!b.closest("form"):!0,[H,A]=i.useState(new Set),F=Array.from(H).map(K=>K.props.value).join(";");return r.jsx(dl,{...h,children:r.jsxs(jc,{required:m,scope:t,trigger:b,onTriggerChange:y,valueNode:g,onValueNodeChange:w,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:Le(),value:T,onValueChange:N,open:_,onOpenChange:I,dir:k,triggerPointerDownPosRef:P,disabled:x,children:[r.jsx(hn.Provider,{scope:t,children:r.jsx(Cc,{scope:e.__scopeSelect,onNativeOptionAdd:i.useCallback(K=>{A(V=>new Set(V).add(K))},[]),onNativeOptionRemove:i.useCallback(K=>{A(V=>{const te=new Set(V);return te.delete(K),te})},[]),children:n})}),G?r.jsxs(wa,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:p,value:T,onChange:K=>N(K.target.value),disabled:x,form:v,children:[T===void 0?r.jsx("option",{value:""}):null,Array.from(H)]},F):null]})})};qs.displayName=Gt;var Xs="SelectTrigger",Ys=i.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,o=xn(n),c=Je(Xs,n),l=c.disabled||s,d=me(t,c.onTriggerChange),u=mn(n),f=i.useRef("touch"),[p,x,m]=ya(h=>{const b=u().filter(w=>!w.disabled),y=b.find(w=>w.value===c.value),g=ja(b,h,y);g!==void 0&&c.onValueChange(g.value)}),v=h=>{l||(c.onOpenChange(!0),m()),h&&(c.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return r.jsx(ul,{asChild:!0,...o,children:r.jsx(q.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":va(c.value)?"":void 0,...a,ref:d,onClick:L(a.onClick,h=>{h.currentTarget.focus(),f.current!=="mouse"&&v(h)}),onPointerDown:L(a.onPointerDown,h=>{f.current=h.pointerType;const b=h.target;b.hasPointerCapture(h.pointerId)&&b.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(v(h),h.preventDefault())}),onKeyDown:L(a.onKeyDown,h=>{const b=p.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&x(h.key),!(b&&h.key===" ")&&vc.includes(h.key)&&(v(),h.preventDefault())})})})});Ys.displayName=Xs;var Qs="SelectValue",Zs=i.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,children:o,placeholder:c="",...l}=e,d=Je(Qs,n),{onValueNodeHasChildrenChange:u}=d,f=o!==void 0,p=me(t,d.onValueNodeChange);return Ve(()=>{u(f)},[u,f]),r.jsx(q.span,{...l,ref:p,style:{pointerEvents:"none"},children:va(d.value)?r.jsx(r.Fragment,{children:c}):o})});Zs.displayName=Qs;var Sc="SelectIcon",Js=i.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...a}=e;return r.jsx(q.span,{"aria-hidden":!0,...a,ref:t,children:s||"▼"})});Js.displayName=Sc;var Rc="SelectPortal",ea=e=>r.jsx(fl,{asChild:!0,...e});ea.displayName=Rc;var it="SelectContent",ta=i.forwardRef((e,t)=>{const n=Je(it,e.__scopeSelect),[s,a]=i.useState();if(Ve(()=>{a(new DocumentFragment)},[]),!n.open){const o=s;return o?tt.createPortal(r.jsx(na,{scope:e.__scopeSelect,children:r.jsx(hn.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),o):null}return r.jsx(ra,{...e,ref:t})});ta.displayName=it;var De=10,[na,et]=St(it),_c="SelectContentImpl",ra=i.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:c,side:l,sideOffset:d,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:x,collisionPadding:m,sticky:v,hideWhenDetached:h,avoidCollisions:b,...y}=e,g=Je(it,n),[w,C]=i.useState(null),[S,k]=i.useState(null),_=me(t,D=>C(D)),[I,T]=i.useState(null),[N,P]=i.useState(null),G=mn(n),[H,A]=i.useState(!1),F=i.useRef(!1);i.useEffect(()=>{if(w)return pl(w)},[w]),hl();const K=i.useCallback(D=>{const[z,...U]=G().map(E=>E.ref.current),[M]=U.slice(-1),$=document.activeElement;for(const E of D)if(E===$||(E==null||E.scrollIntoView({block:"nearest"}),E===z&&S&&(S.scrollTop=0),E===M&&S&&(S.scrollTop=S.scrollHeight),E==null||E.focus(),document.activeElement!==$))return},[G,S]),V=i.useCallback(()=>K([I,w]),[K,I,w]);i.useEffect(()=>{H&&V()},[H,V]);const{onOpenChange:te,triggerPointerDownPosRef:Y}=g;i.useEffect(()=>{if(w){let D={x:0,y:0};const z=M=>{var $,E;D={x:Math.abs(Math.round(M.pageX)-((($=Y.current)==null?void 0:$.x)??0)),y:Math.abs(Math.round(M.pageY)-(((E=Y.current)==null?void 0:E.y)??0))}},U=M=>{D.x<=10&&D.y<=10?M.preventDefault():w.contains(M.target)||te(!1),document.removeEventListener("pointermove",z),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",z),document.addEventListener("pointerup",U,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",U,{capture:!0})}}},[w,te,Y]),i.useEffect(()=>{const D=()=>te(!1);return window.addEventListener("blur",D),window.addEventListener("resize",D),()=>{window.removeEventListener("blur",D),window.removeEventListener("resize",D)}},[te]);const[Re,_e]=ya(D=>{const z=G().filter($=>!$.disabled),U=z.find($=>$.ref.current===document.activeElement),M=ja(z,D,U);M&&setTimeout(()=>M.ref.current.focus())}),Q=i.useCallback((D,z,U)=>{const M=!F.current&&!U;(g.value!==void 0&&g.value===z||M)&&(T(D),M&&(F.current=!0))},[g.value]),fe=i.useCallback(()=>w==null?void 0:w.focus(),[w]),oe=i.useCallback((D,z,U)=>{const M=!F.current&&!U;(g.value!==void 0&&g.value===z||M)&&P(D)},[g.value]),ye=s==="popper"?Hn:sa,Z=ye===Hn?{side:l,sideOffset:d,align:u,alignOffset:f,arrowPadding:p,collisionBoundary:x,collisionPadding:m,sticky:v,hideWhenDetached:h,avoidCollisions:b}:{};return r.jsx(na,{scope:n,content:w,viewport:S,onViewportChange:k,itemRefCallback:Q,selectedItem:I,onItemLeave:fe,itemTextRefCallback:oe,focusSelectedItem:V,selectedItemText:N,position:s,isPositioned:H,searchRef:Re,children:r.jsx(ml,{as:Us,allowPinchZoom:!0,children:r.jsx(xl,{asChild:!0,trapped:g.open,onMountAutoFocus:D=>{D.preventDefault()},onUnmountAutoFocus:L(a,D=>{var z;(z=g.trigger)==null||z.focus({preventScroll:!0}),D.preventDefault()}),children:r.jsx(gl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:D=>D.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:r.jsx(ye,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:D=>D.preventDefault(),...y,...Z,onPlaced:()=>A(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:L(y.onKeyDown,D=>{const z=D.ctrlKey||D.altKey||D.metaKey;if(D.key==="Tab"&&D.preventDefault(),!z&&D.key.length===1&&_e(D.key),["ArrowUp","ArrowDown","Home","End"].includes(D.key)){let M=G().filter($=>!$.disabled).map($=>$.ref.current);if(["ArrowUp","End"].includes(D.key)&&(M=M.slice().reverse()),["ArrowUp","ArrowDown"].includes(D.key)){const $=D.target,E=M.indexOf($);M=M.slice(E+1)}setTimeout(()=>K(M)),D.preventDefault()}})})})})})})});ra.displayName=_c;var Mc="SelectItemAlignedPosition",sa=i.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,o=Je(it,n),c=et(it,n),[l,d]=i.useState(null),[u,f]=i.useState(null),p=me(t,_=>f(_)),x=mn(n),m=i.useRef(!1),v=i.useRef(!0),{viewport:h,selectedItem:b,selectedItemText:y,focusSelectedItem:g}=c,w=i.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&h&&b&&y){const _=o.trigger.getBoundingClientRect(),I=u.getBoundingClientRect(),T=o.valueNode.getBoundingClientRect(),N=y.getBoundingClientRect();if(o.dir!=="rtl"){const $=N.left-I.left,E=T.left-$,ne=_.left-E,re=_.width+ne,Te=Math.max(re,I.width),Ae=window.innerWidth-De,ct=Xr(E,[De,Math.max(De,Ae-Te)]);l.style.minWidth=re+"px",l.style.left=ct+"px"}else{const $=I.right-N.right,E=window.innerWidth-T.right-$,ne=window.innerWidth-_.right-E,re=_.width+ne,Te=Math.max(re,I.width),Ae=window.innerWidth-De,ct=Xr(E,[De,Math.max(De,Ae-Te)]);l.style.minWidth=re+"px",l.style.right=ct+"px"}const P=x(),G=window.innerHeight-De*2,H=h.scrollHeight,A=window.getComputedStyle(u),F=parseInt(A.borderTopWidth,10),K=parseInt(A.paddingTop,10),V=parseInt(A.borderBottomWidth,10),te=parseInt(A.paddingBottom,10),Y=F+K+H+te+V,Re=Math.min(b.offsetHeight*5,Y),_e=window.getComputedStyle(h),Q=parseInt(_e.paddingTop,10),fe=parseInt(_e.paddingBottom,10),oe=_.top+_.height/2-De,ye=G-oe,Z=b.offsetHeight/2,D=b.offsetTop+Z,z=F+K+D,U=Y-z;if(z<=oe){const $=P.length>0&&b===P[P.length-1].ref.current;l.style.bottom="0px";const E=u.clientHeight-h.offsetTop-h.offsetHeight,ne=Math.max(ye,Z+($?fe:0)+E+V),re=z+ne;l.style.height=re+"px"}else{const $=P.length>0&&b===P[0].ref.current;l.style.top="0px";const ne=Math.max(oe,F+h.offsetTop+($?Q:0)+Z)+U;l.style.height=ne+"px",h.scrollTop=z-oe+h.offsetTop}l.style.margin=`${De}px 0`,l.style.minHeight=Re+"px",l.style.maxHeight=G+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[x,o.trigger,o.valueNode,l,u,h,b,y,o.dir,s]);Ve(()=>w(),[w]);const[C,S]=i.useState();Ve(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const k=i.useCallback(_=>{_&&v.current===!0&&(w(),g==null||g(),v.current=!1)},[w,g]);return r.jsx(Dc,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:k,children:r.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:r.jsx(q.div,{...a,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});sa.displayName=Mc;var Ic="SelectPopperPosition",Hn=i.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=De,...o}=e,c=xn(n);return r.jsx(bl,{...c,...o,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hn.displayName=Ic;var[Dc,br]=St(it,{}),Gn="SelectViewport",aa=i.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...a}=e,o=et(Gn,n),c=br(Gn,n),l=me(t,o.onViewportChange),d=i.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(hn.Slot,{scope:n,children:r.jsx(q.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:L(a.onScroll,u=>{const f=u.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:x}=c;if(x!=null&&x.current&&p){const m=Math.abs(d.current-f.scrollTop);if(m>0){const v=window.innerHeight-De*2,h=parseFloat(p.style.minHeight),b=parseFloat(p.style.height),y=Math.max(h,b);if(y<v){const g=y+m,w=Math.min(v,g),C=g-w;p.style.height=w+"px",p.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,p.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});aa.displayName=Gn;var oa="SelectGroup",[kc,Ec]=St(oa),ia=i.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Le();return r.jsx(kc,{scope:n,id:a,children:r.jsx(q.div,{role:"group","aria-labelledby":a,...s,ref:t})})});ia.displayName=oa;var la="SelectLabel",ca=i.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Ec(la,n);return r.jsx(q.div,{id:a.id,...s,ref:t})});ca.displayName=la;var rn="SelectItem",[Tc,da]=St(rn),ua=i.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:o,...c}=e,l=Je(rn,n),d=et(rn,n),u=l.value===s,[f,p]=i.useState(o??""),[x,m]=i.useState(!1),v=me(t,g=>{var w;return(w=d.itemRefCallback)==null?void 0:w.call(d,g,s,a)}),h=Le(),b=i.useRef("touch"),y=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(Tc,{scope:n,value:s,disabled:a,textId:h,isSelected:u,onItemTextChange:i.useCallback(g=>{p(w=>w||((g==null?void 0:g.textContent)??"").trim())},[]),children:r.jsx(hn.ItemSlot,{scope:n,value:s,disabled:a,textValue:f,children:r.jsx(q.div,{role:"option","aria-labelledby":h,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...c,ref:v,onFocus:L(c.onFocus,()=>m(!0)),onBlur:L(c.onBlur,()=>m(!1)),onClick:L(c.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:L(c.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:L(c.onPointerDown,g=>{b.current=g.pointerType}),onPointerMove:L(c.onPointerMove,g=>{var w;b.current=g.pointerType,a?(w=d.onItemLeave)==null||w.call(d):b.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:L(c.onPointerLeave,g=>{var w;g.currentTarget===document.activeElement&&((w=d.onItemLeave)==null||w.call(d))}),onKeyDown:L(c.onKeyDown,g=>{var C;((C=d.searchRef)==null?void 0:C.current)!==""&&g.key===" "||(wc.includes(g.key)&&y(),g.key===" "&&g.preventDefault())})})})})});ua.displayName=rn;var Pt="SelectItemText",fa=i.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,...o}=e,c=Je(Pt,n),l=et(Pt,n),d=da(Pt,n),u=Nc(Pt,n),[f,p]=i.useState(null),x=me(t,y=>p(y),d.onItemTextChange,y=>{var g;return(g=l.itemTextRefCallback)==null?void 0:g.call(l,y,d.value,d.disabled)}),m=f==null?void 0:f.textContent,v=i.useMemo(()=>r.jsx("option",{value:d.value,disabled:d.disabled,children:m},d.value),[d.disabled,d.value,m]),{onNativeOptionAdd:h,onNativeOptionRemove:b}=u;return Ve(()=>(h(v),()=>b(v)),[h,b,v]),r.jsxs(r.Fragment,{children:[r.jsx(q.span,{id:d.textId,...o,ref:x}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?tt.createPortal(o.children,c.valueNode):null]})});fa.displayName=Pt;var pa="SelectItemIndicator",ha=i.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return da(pa,n).isSelected?r.jsx(q.span,{"aria-hidden":!0,...s,ref:t}):null});ha.displayName=pa;var Kn="SelectScrollUpButton",ma=i.forwardRef((e,t)=>{const n=et(Kn,e.__scopeSelect),s=br(Kn,e.__scopeSelect),[a,o]=i.useState(!1),c=me(t,s.onScrollButtonChange);return Ve(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=d.scrollTop>0;o(u)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(ga,{...e,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});ma.displayName=Kn;var Un="SelectScrollDownButton",xa=i.forwardRef((e,t)=>{const n=et(Un,e.__scopeSelect),s=br(Un,e.__scopeSelect),[a,o]=i.useState(!1),c=me(t,s.onScrollButtonChange);return Ve(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<u;o(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(ga,{...e,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});xa.displayName=Un;var ga=i.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,o=et("SelectScrollButton",n),c=i.useRef(null),l=mn(n),d=i.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return i.useEffect(()=>()=>d(),[d]),Ve(()=>{var f;const u=l().find(p=>p.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),r.jsx(q.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:L(a.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(s,50))}),onPointerMove:L(a.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),c.current===null&&(c.current=window.setInterval(s,50))}),onPointerLeave:L(a.onPointerLeave,()=>{d()})})}),Ac="SelectSeparator",ba=i.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(q.div,{"aria-hidden":!0,...s,ref:t})});ba.displayName=Ac;var Wn="SelectArrow",Pc=i.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=xn(n),o=Je(Wn,n),c=et(Wn,n);return o.open&&c.position==="popper"?r.jsx(vl,{...a,...s,ref:t}):null});Pc.displayName=Wn;function va(e){return e===""||e===void 0}var wa=i.forwardRef((e,t)=>{const{value:n,...s}=e,a=i.useRef(null),o=me(t,a),c=Ws(n);return i.useEffect(()=>{const l=a.current,d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==n&&f){const p=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(p)}},[c,n]),r.jsx(zl,{asChild:!0,children:r.jsx("select",{...s,ref:o,defaultValue:n})})});wa.displayName="BubbleSelect";function ya(e){const t=nl(e),n=i.useRef(""),s=i.useRef(0),a=i.useCallback(c=>{const l=n.current+c;t(l),function d(u){n.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>d(""),1e3))}(l)},[t]),o=i.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return i.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,o]}function ja(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let c=Oc(e,Math.max(o,0));a.length===1&&(c=c.filter(u=>u!==n));const d=c.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function Oc(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Lc=qs,Ca=Ys,zc=Zs,$c=Js,Bc=ea,Na=ta,Fc=aa,Vc=ia,Sa=ca,Ra=ua,Hc=fa,Gc=ha,_a=ma,Ma=xa,Ia=ba;const Da=Lc,ka=Vc,Ea=zc,vr=j.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(Ca,{ref:s,className:R("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx($c,{asChild:!0,children:r.jsx(wl,{className:"size-4 opacity-50"})})]}));vr.displayName=Ca.displayName;const Ta=j.forwardRef(({className:e,...t},n)=>r.jsx(_a,{ref:n,className:R("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(yl,{})}));Ta.displayName=_a.displayName;const Aa=j.forwardRef(({className:e,...t},n)=>r.jsx(Ma,{ref:n,className:R("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(ps,{})}));Aa.displayName=Ma.displayName;const wr=j.forwardRef(({className:e,children:t,position:n="popper",...s},a)=>r.jsx(Bc,{children:r.jsxs(Na,{ref:a,className:R("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(Ta,{}),r.jsx(Fc,{className:R("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(Aa,{})]})}));wr.displayName=Na.displayName;const Kc=j.forwardRef(({className:e,...t},n)=>r.jsx(Sa,{ref:n,className:R("px-2 py-1.5 text-sm font-semibold",e),...t}));Kc.displayName=Sa.displayName;const Qe=j.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(Ra,{ref:s,className:R("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:r.jsx(Gc,{children:r.jsx(dn,{className:"size-4"})})}),r.jsx(Hc,{children:t})]}));Qe.displayName=Ra.displayName;const Uc=j.forwardRef(({className:e,...t},n)=>r.jsx(Ia,{ref:n,className:R("-mx-1 my-1 h-px bg-muted",e),...t}));Uc.displayName=Ia.displayName;var yr="Collapsible",[Wc,Pa]=Nt(yr),[qc,jr]=Wc(yr),Oa=i.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:a,disabled:o,onOpenChange:c,...l}=e,[d=!1,u]=Fe({prop:s,defaultProp:a,onChange:c});return r.jsx(qc,{scope:n,disabled:o,contentId:Le(),open:d,onOpenToggle:i.useCallback(()=>u(f=>!f),[u]),children:r.jsx(q.div,{"data-state":Nr(d),"data-disabled":o?"":void 0,...l,ref:t})})});Oa.displayName=yr;var La="CollapsibleTrigger",za=i.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,a=jr(La,n);return r.jsx(q.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":Nr(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:t,onClick:L(e.onClick,a.onOpenToggle)})});za.displayName=La;var Cr="CollapsibleContent",$a=i.forwardRef((e,t)=>{const{forceMount:n,...s}=e,a=jr(Cr,e.__scopeCollapsible);return r.jsx(us,{present:n||a.open,children:({present:o})=>r.jsx(Xc,{...s,ref:t,present:o})})});$a.displayName=Cr;var Xc=i.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:a,...o}=e,c=jr(Cr,n),[l,d]=i.useState(s),u=i.useRef(null),f=me(t,u),p=i.useRef(0),x=p.current,m=i.useRef(0),v=m.current,h=c.open||l,b=i.useRef(h),y=i.useRef(void 0);return i.useEffect(()=>{const g=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(g)},[]),Ve(()=>{const g=u.current;if(g){y.current=y.current||{transitionDuration:g.style.transitionDuration,animationName:g.style.animationName},g.style.transitionDuration="0s",g.style.animationName="none";const w=g.getBoundingClientRect();p.current=w.height,m.current=w.width,b.current||(g.style.transitionDuration=y.current.transitionDuration,g.style.animationName=y.current.animationName),d(s)}},[c.open,s]),r.jsx(q.div,{"data-state":Nr(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!h,...o,ref:f,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:h&&a})});function Nr(e){return e?"open":"closed"}var Yc=Oa,Qc=za,Zc=$a,He="Accordion",Jc=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Sr,ed,td]=lr(He),[gn,Xp]=Nt(He,[td,Pa]),Rr=Pa(),Ba=j.forwardRef((e,t)=>{const{type:n,...s}=e,a=s,o=s;return r.jsx(Sr.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?r.jsx(ad,{...o,ref:t}):r.jsx(sd,{...a,ref:t})})});Ba.displayName=He;var[Fa,nd]=gn(He),[Va,rd]=gn(He,{collapsible:!1}),sd=j.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:a=()=>{},collapsible:o=!1,...c}=e,[l,d]=Fe({prop:n,defaultProp:s,onChange:a});return r.jsx(Fa,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:d,onItemClose:j.useCallback(()=>o&&d(""),[o,d]),children:r.jsx(Va,{scope:e.__scopeAccordion,collapsible:o,children:r.jsx(Ha,{...c,ref:t})})})}),ad=j.forwardRef((e,t)=>{const{value:n,defaultValue:s,onValueChange:a=()=>{},...o}=e,[c=[],l]=Fe({prop:n,defaultProp:s,onChange:a}),d=j.useCallback(f=>l((p=[])=>[...p,f]),[l]),u=j.useCallback(f=>l((p=[])=>p.filter(x=>x!==f)),[l]);return r.jsx(Fa,{scope:e.__scopeAccordion,value:c,onItemOpen:d,onItemClose:u,children:r.jsx(Va,{scope:e.__scopeAccordion,collapsible:!0,children:r.jsx(Ha,{...o,ref:t})})})}),[od,bn]=gn(He),Ha=j.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:s,dir:a,orientation:o="vertical",...c}=e,l=j.useRef(null),d=me(l,t),u=ed(n),p=ir(a)==="ltr",x=L(e.onKeyDown,m=>{var I;if(!Jc.includes(m.key))return;const v=m.target,h=u().filter(T=>{var N;return!((N=T.ref.current)!=null&&N.disabled)}),b=h.findIndex(T=>T.ref.current===v),y=h.length;if(b===-1)return;m.preventDefault();let g=b;const w=0,C=y-1,S=()=>{g=b+1,g>C&&(g=w)},k=()=>{g=b-1,g<w&&(g=C)};switch(m.key){case"Home":g=w;break;case"End":g=C;break;case"ArrowRight":o==="horizontal"&&(p?S():k());break;case"ArrowDown":o==="vertical"&&S();break;case"ArrowLeft":o==="horizontal"&&(p?k():S());break;case"ArrowUp":o==="vertical"&&k();break}const _=g%y;(I=h[_].ref.current)==null||I.focus()});return r.jsx(od,{scope:n,disabled:s,direction:a,orientation:o,children:r.jsx(Sr.Slot,{scope:n,children:r.jsx(q.div,{...c,"data-orientation":o,ref:d,onKeyDown:s?void 0:x})})})}),sn="AccordionItem",[id,_r]=gn(sn),Ga=j.forwardRef((e,t)=>{const{__scopeAccordion:n,value:s,...a}=e,o=bn(sn,n),c=nd(sn,n),l=Rr(n),d=Le(),u=s&&c.value.includes(s)||!1,f=o.disabled||e.disabled;return r.jsx(id,{scope:n,open:u,disabled:f,triggerId:d,children:r.jsx(Yc,{"data-orientation":o.orientation,"data-state":Ya(u),...l,...a,ref:t,disabled:f,open:u,onOpenChange:p=>{p?c.onItemOpen(s):c.onItemClose(s)}})})});Ga.displayName=sn;var Ka="AccordionHeader",Ua=j.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,a=bn(He,n),o=_r(Ka,n);return r.jsx(q.h3,{"data-orientation":a.orientation,"data-state":Ya(o.open),"data-disabled":o.disabled?"":void 0,...s,ref:t})});Ua.displayName=Ka;var qn="AccordionTrigger",Wa=j.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,a=bn(He,n),o=_r(qn,n),c=rd(qn,n),l=Rr(n);return r.jsx(Sr.ItemSlot,{scope:n,children:r.jsx(Qc,{"aria-disabled":o.open&&!c.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...l,...s,ref:t})})});Wa.displayName=qn;var qa="AccordionContent",Xa=j.forwardRef((e,t)=>{const{__scopeAccordion:n,...s}=e,a=bn(He,n),o=_r(qa,n),c=Rr(n);return r.jsx(Zc,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...c,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Xa.displayName=qa;function Ya(e){return e?"open":"closed"}var ld=Ba,cd=Ga,dd=Ua,Qa=Wa,Za=Xa;const vn=ld,st=j.forwardRef(({className:e,...t},n)=>r.jsx(cd,{ref:n,className:R("border-b",e),...t}));st.displayName="AccordionItem";const at=j.forwardRef(({className:e,children:t,iconPosition:n="left",...s},a)=>{const o=()=>r.jsx(ps,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"});return r.jsx(dd,{className:"flex",children:r.jsx(Qa,{ref:a,className:R("flex flex-1 items-center py-4 gap-x-2 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180 justify-between",e),...s,children:s.asChild?r.jsxs("div",{className:"flex",children:[n==="left"?o():null,t,n==="right"?o():null]}):r.jsxs(r.Fragment,{children:[n==="left"?o():null,t,n==="right"?o():null]})})})});at.displayName=Qa.displayName;const ot=j.forwardRef(({className:e,children:t,...n},s)=>r.jsx(Za,{ref:s,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:r.jsx("div",{className:R("pb-4 pt-0",e),children:t})}));ot.displayName=Za.displayName;const ke=j.forwardRef((e,t)=>r.jsx(X,{ref:t,variant:"ghost",className:"size-8 p-2 text-slate-500 hover:cursor-pointer hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",asChild:!0,...e}));ke.displayName="ListItemHeaderButton";function ud(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>s=>{t.forEach(a=>a(s))},t)}const wn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Rt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Mr(e){return"nodeType"in e}function ge(e){var t,n;return e?Rt(e)?e:Mr(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ir(e){const{Document:t}=ge(e);return e instanceof t}function Kt(e){return Rt(e)?!1:e instanceof ge(e).HTMLElement}function Ja(e){return e instanceof ge(e).SVGElement}function _t(e){return e?Rt(e)?e.document:Mr(e)?Ir(e)?e:Kt(e)||Ja(e)?e.ownerDocument:document:document:document}const ze=wn?i.useLayoutEffect:i.useEffect;function Dr(e){const t=i.useRef(e);return ze(()=>{t.current=e}),i.useCallback(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}function fd(){const e=i.useRef(null),t=i.useCallback((s,a)=>{e.current=setInterval(s,a)},[]),n=i.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function $t(e,t){t===void 0&&(t=[e]);const n=i.useRef(e);return ze(()=>{n.current!==e&&(n.current=e)},t),n}function Ut(e,t){const n=i.useRef();return i.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function an(e){const t=Dr(e),n=i.useRef(null),s=i.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,s]}function Xn(e){const t=i.useRef();return i.useEffect(()=>{t.current=e},[e]),t.current}let Pn={};function Wt(e,t){return i.useMemo(()=>{if(t)return t;const n=Pn[e]==null?0:Pn[e]+1;return Pn[e]=n,e+"-"+n},[e,t])}function eo(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return s.reduce((o,c)=>{const l=Object.entries(c);for(const[d,u]of l){const f=o[d];f!=null&&(o[d]=f+e*u)}return o},{...t})}}const yt=eo(1),on=eo(-1);function pd(e){return"clientX"in e&&"clientY"in e}function kr(e){if(!e)return!1;const{KeyboardEvent:t}=ge(e.target);return t&&e instanceof t}function hd(e){if(!e)return!1;const{TouchEvent:t}=ge(e.target);return t&&e instanceof t}function Yn(e){if(hd(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return pd(e)?{x:e.clientX,y:e.clientY}:null}const Ct=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ct.Translate.toString(e),Ct.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),Qr="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function md(e){return e.matches(Qr)?e:e.querySelector(Qr)}const xd={display:"none"};function gd(e){let{id:t,value:n}=e;return j.createElement("div",{id:t,style:xd},n)}function bd(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return j.createElement("div",{id:t,style:a,role:"status","aria-live":s,"aria-atomic":!0},n)}function vd(){const[e,t]=i.useState("");return{announce:i.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const to=i.createContext(null);function wd(e){const t=i.useContext(to);i.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function yd(){const[e]=i.useState(()=>new Set),t=i.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[i.useCallback(s=>{let{type:a,event:o}=s;e.forEach(c=>{var l;return(l=c[a])==null?void 0:l.call(c,o)})},[e]),t]}const jd={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Cd={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Nd(e){let{announcements:t=Cd,container:n,hiddenTextDescribedById:s,screenReaderInstructions:a=jd}=e;const{announce:o,announcement:c}=vd(),l=Wt("DndLiveRegion"),[d,u]=i.useState(!1);if(i.useEffect(()=>{u(!0)},[]),wd(i.useMemo(()=>({onDragStart(p){let{active:x}=p;o(t.onDragStart({active:x}))},onDragMove(p){let{active:x,over:m}=p;t.onDragMove&&o(t.onDragMove({active:x,over:m}))},onDragOver(p){let{active:x,over:m}=p;o(t.onDragOver({active:x,over:m}))},onDragEnd(p){let{active:x,over:m}=p;o(t.onDragEnd({active:x,over:m}))},onDragCancel(p){let{active:x,over:m}=p;o(t.onDragCancel({active:x,over:m}))}}),[o,t])),!d)return null;const f=j.createElement(j.Fragment,null,j.createElement(gd,{id:s,value:a.draggable}),j.createElement(bd,{id:l,announcement:c}));return n?tt.createPortal(f,n):f}var J;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(J||(J={}));function ln(){}function no(e,t){return i.useMemo(()=>({sensor:e,options:{}}),[e,t])}function ro(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Ee=Object.freeze({x:0,y:0});function Sd(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Rd(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function _d(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function Md(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Zr(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const so=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=Zr(t,t.left,t.top),o=[];for(const c of s){const{id:l}=c,d=n.get(l);if(d){const u=Sd(Zr(d),a);o.push({id:l,data:{droppableContainer:c,value:u}})}}return o.sort(Rd)};function Id(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),c=a-s,l=o-n;if(s<a&&n<o){const d=t.width*t.height,u=e.width*e.height,f=c*l,p=f/(d+u-f);return Number(p.toFixed(4))}return 0}const Dd=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const a=[];for(const o of s){const{id:c}=o,l=n.get(c);if(l){const d=Id(l,t);d>0&&a.push({id:c,data:{droppableContainer:o,value:d}})}}return a.sort(_d)};function kd(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function ao(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ee}function Ed(e){return function(n){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return a.reduce((c,l)=>({...c,top:c.top+e*l.y,bottom:c.bottom+e*l.y,left:c.left+e*l.x,right:c.right+e*l.x}),{...n})}}const Td=Ed(1);function Ad(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Pd(e,t,n){const s=Ad(t);if(!s)return e;const{scaleX:a,scaleY:o,x:c,y:l}=s,d=e.left-c-(1-a)*parseFloat(n),u=e.top-l-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),f=a?e.width/a:e.width,p=o?e.height/o:e.height;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d}}const Od={ignoreTransform:!1};function Mt(e,t){t===void 0&&(t=Od);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=ge(e).getComputedStyle(e);u&&(n=Pd(n,u,f))}const{top:s,left:a,width:o,height:c,bottom:l,right:d}=n;return{top:s,left:a,width:o,height:c,bottom:l,right:d}}function Jr(e){return Mt(e,{ignoreTransform:!0})}function Ld(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function zd(e,t){return t===void 0&&(t=ge(e).getComputedStyle(e)),t.position==="fixed"}function $d(e,t){t===void 0&&(t=ge(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const o=t[a];return typeof o=="string"?n.test(o):!1})}function Er(e,t){const n=[];function s(a){if(t!=null&&n.length>=t||!a)return n;if(Ir(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Kt(a)||Ja(a)||n.includes(a))return n;const o=ge(e).getComputedStyle(a);return a!==e&&$d(a,o)&&n.push(a),zd(a,o)?n:s(a.parentNode)}return e?s(e):n}function oo(e){const[t]=Er(e,1);return t??null}function On(e){return!wn||!e?null:Rt(e)?e:Mr(e)?Ir(e)||e===_t(e).scrollingElement?window:Kt(e)?e:null:null}function io(e){return Rt(e)?e.scrollX:e.scrollLeft}function lo(e){return Rt(e)?e.scrollY:e.scrollTop}function Qn(e){return{x:io(e),y:lo(e)}}var ee;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ee||(ee={}));function co(e){return!wn||!e?!1:e===document.scrollingElement}function uo(e){const t={x:0,y:0},n=co(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,c=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:a,isLeft:o,isBottom:c,isRight:l,maxScroll:s,minScroll:t}}const Bd={x:.2,y:.2};function Fd(e,t,n,s,a){let{top:o,left:c,right:l,bottom:d}=n;s===void 0&&(s=10),a===void 0&&(a=Bd);const{isTop:u,isBottom:f,isLeft:p,isRight:x}=uo(e),m={x:0,y:0},v={x:0,y:0},h={height:t.height*a.y,width:t.width*a.x};return!u&&o<=t.top+h.height?(m.y=ee.Backward,v.y=s*Math.abs((t.top+h.height-o)/h.height)):!f&&d>=t.bottom-h.height&&(m.y=ee.Forward,v.y=s*Math.abs((t.bottom-h.height-d)/h.height)),!x&&l>=t.right-h.width?(m.x=ee.Forward,v.x=s*Math.abs((t.right-h.width-l)/h.width)):!p&&c<=t.left+h.width&&(m.x=ee.Backward,v.x=s*Math.abs((t.left+h.width-c)/h.width)),{direction:m,speed:v}}function Vd(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:c}=window;return{top:0,left:0,right:o,bottom:c,width:o,height:c}}const{top:t,left:n,right:s,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:a,width:e.clientWidth,height:e.clientHeight}}function fo(e){return e.reduce((t,n)=>yt(t,Qn(n)),Ee)}function Hd(e){return e.reduce((t,n)=>t+io(n),0)}function Gd(e){return e.reduce((t,n)=>t+lo(n),0)}function Kd(e,t){if(t===void 0&&(t=Mt),!e)return;const{top:n,left:s,bottom:a,right:o}=t(e);oo(e)&&(a<=0||o<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ud=[["x",["left","right"],Hd],["y",["top","bottom"],Gd]];class Tr{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Er(n),a=fo(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,c,l]of Ud)for(const d of c)Object.defineProperty(this,d,{get:()=>{const u=l(s),f=a[o]-u;return this.rect[d]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ot{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var a;(a=this.target)==null||a.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function Wd(e){const{EventTarget:t}=ge(e);return e instanceof t?e:_t(e)}function Ln(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var Ne;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Ne||(Ne={}));function es(e){e.preventDefault()}function qd(e){e.stopPropagation()}var B;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(B||(B={}));const po={start:[B.Space,B.Enter],cancel:[B.Esc],end:[B.Space,B.Enter,B.Tab]},Xd=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case B.Right:return{...n,x:n.x+25};case B.Left:return{...n,x:n.x-25};case B.Down:return{...n,y:n.y+25};case B.Up:return{...n,y:n.y-25}}};class ho{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ot(_t(n)),this.windowListeners=new Ot(ge(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ne.Resize,this.handleCancel),this.windowListeners.add(Ne.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ne.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&Kd(s),n(Ee)}handleKeyDown(t){if(kr(t)){const{active:n,context:s,options:a}=this.props,{keyboardCodes:o=po,coordinateGetter:c=Xd,scrollBehavior:l="smooth"}=a,{code:d}=t;if(o.end.includes(d)){this.handleEnd(t);return}if(o.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:u}=s.current,f=u?{x:u.left,y:u.top}:Ee;this.referenceCoordinates||(this.referenceCoordinates=f);const p=c(t,{active:n,context:s.current,currentCoordinates:f});if(p){const x=on(p,f),m={x:0,y:0},{scrollableAncestors:v}=s.current;for(const h of v){const b=t.code,{isTop:y,isRight:g,isLeft:w,isBottom:C,maxScroll:S,minScroll:k}=uo(h),_=Vd(h),I={x:Math.min(b===B.Right?_.right-_.width/2:_.right,Math.max(b===B.Right?_.left:_.left+_.width/2,p.x)),y:Math.min(b===B.Down?_.bottom-_.height/2:_.bottom,Math.max(b===B.Down?_.top:_.top+_.height/2,p.y))},T=b===B.Right&&!g||b===B.Left&&!w,N=b===B.Down&&!C||b===B.Up&&!y;if(T&&I.x!==p.x){const P=h.scrollLeft+x.x,G=b===B.Right&&P<=S.x||b===B.Left&&P>=k.x;if(G&&!x.y){h.scrollTo({left:P,behavior:l});return}G?m.x=h.scrollLeft-P:m.x=b===B.Right?h.scrollLeft-S.x:h.scrollLeft-k.x,m.x&&h.scrollBy({left:-m.x,behavior:l});break}else if(N&&I.y!==p.y){const P=h.scrollTop+x.y,G=b===B.Down&&P<=S.y||b===B.Up&&P>=k.y;if(G&&!x.x){h.scrollTo({top:P,behavior:l});return}G?m.y=h.scrollTop-P:m.y=b===B.Down?h.scrollTop-S.y:h.scrollTop-k.y,m.y&&h.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,yt(on(p,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ho.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=po,onActivation:a}=t,{active:o}=n;const{code:c}=e.nativeEvent;if(s.start.includes(c)){const l=o.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function ts(e){return!!(e&&"distance"in e)}function ns(e){return!!(e&&"delay"in e)}class Ar{constructor(t,n,s){var a;s===void 0&&(s=Wd(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:c}=o;this.props=t,this.events=n,this.document=_t(c),this.documentListeners=new Ot(this.document),this.listeners=new Ot(s),this.windowListeners=new Ot(ge(c)),this.initialCoordinates=(a=Yn(o))!=null?a:Ee,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Ne.Resize,this.handleCancel),this.windowListeners.add(Ne.DragStart,es),this.windowListeners.add(Ne.VisibilityChange,this.handleCancel),this.windowListeners.add(Ne.ContextMenu,es),this.documentListeners.add(Ne.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ns(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(ts(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:a}=this.props;a(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Ne.Click,qd,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ne.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:a,props:o}=this,{onMove:c,options:{activationConstraint:l}}=o;if(!a)return;const d=(n=Yn(t))!=null?n:Ee,u=on(a,d);if(!s&&l){if(ts(l)){if(l.tolerance!=null&&Ln(u,l.tolerance))return this.handleCancel();if(Ln(u,l.distance))return this.handleStart()}if(ns(l)&&Ln(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),c(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===B.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Yd={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class yn extends Ar{constructor(t){const{event:n}=t,s=_t(n.target);super(t,Yd,s)}}yn.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const Qd={move:{name:"mousemove"},end:{name:"mouseup"}};var Zn;(function(e){e[e.RightClick=2]="RightClick"})(Zn||(Zn={}));class Zd extends Ar{constructor(t){super(t,Qd,_t(t.event.target))}}Zd.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===Zn.RightClick?!1:(s==null||s({event:n}),!0)}}];const zn={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Jd extends Ar{constructor(t){super(t,zn)}static setup(){return window.addEventListener(zn.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(zn.move.name,t)};function t(){}}}Jd.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:a}=n;return a.length>1?!1:(s==null||s({event:n}),!0)}}];var Lt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Lt||(Lt={}));var cn;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(cn||(cn={}));function eu(e){let{acceleration:t,activator:n=Lt.Pointer,canScroll:s,draggingRect:a,enabled:o,interval:c=5,order:l=cn.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:f,delta:p,threshold:x}=e;const m=nu({delta:p,disabled:!o}),[v,h]=fd(),b=i.useRef({x:0,y:0}),y=i.useRef({x:0,y:0}),g=i.useMemo(()=>{switch(n){case Lt.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Lt.DraggableRect:return a}},[n,a,d]),w=i.useRef(null),C=i.useCallback(()=>{const k=w.current;if(!k)return;const _=b.current.x*y.current.x,I=b.current.y*y.current.y;k.scrollBy(_,I)},[]),S=i.useMemo(()=>l===cn.TreeOrder?[...u].reverse():u,[l,u]);i.useEffect(()=>{if(!o||!u.length||!g){h();return}for(const k of S){if((s==null?void 0:s(k))===!1)continue;const _=u.indexOf(k),I=f[_];if(!I)continue;const{direction:T,speed:N}=Fd(k,I,g,t,x);for(const P of["x","y"])m[P][T[P]]||(N[P]=0,T[P]=0);if(N.x>0||N.y>0){h(),w.current=k,v(C,c),b.current=N,y.current=T;return}}b.current={x:0,y:0},y.current={x:0,y:0},h()},[t,C,s,h,o,c,JSON.stringify(g),JSON.stringify(m),v,u,S,f,JSON.stringify(x)])}const tu={x:{[ee.Backward]:!1,[ee.Forward]:!1},y:{[ee.Backward]:!1,[ee.Forward]:!1}};function nu(e){let{delta:t,disabled:n}=e;const s=Xn(t);return Ut(a=>{if(n||!s||!a)return tu;const o={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[ee.Backward]:a.x[ee.Backward]||o.x===-1,[ee.Forward]:a.x[ee.Forward]||o.x===1},y:{[ee.Backward]:a.y[ee.Backward]||o.y===-1,[ee.Forward]:a.y[ee.Forward]||o.y===1}}},[n,t,s])}function ru(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return Ut(a=>{var o;return t==null?null:(o=s??a)!=null?o:null},[s,t])}function su(e,t){return i.useMemo(()=>e.reduce((n,s)=>{const{sensor:a}=s,o=a.activators.map(c=>({eventName:c.eventName,handler:t(c.handler,s)}));return[...n,...o]},[]),[e,t])}var Bt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Bt||(Bt={}));var Jn;(function(e){e.Optimized="optimized"})(Jn||(Jn={}));const rs=new Map;function au(e,t){let{dragging:n,dependencies:s,config:a}=t;const[o,c]=i.useState(null),{frequency:l,measure:d,strategy:u}=a,f=i.useRef(e),p=b(),x=$t(p),m=i.useCallback(function(y){y===void 0&&(y=[]),!x.current&&c(g=>g===null?y:g.concat(y.filter(w=>!g.includes(w))))},[x]),v=i.useRef(null),h=Ut(y=>{if(p&&!n)return rs;if(!y||y===rs||f.current!==e||o!=null){const g=new Map;for(let w of e){if(!w)continue;if(o&&o.length>0&&!o.includes(w.id)&&w.rect.current){g.set(w.id,w.rect.current);continue}const C=w.node.current,S=C?new Tr(d(C),C):null;w.rect.current=S,S&&g.set(w.id,S)}return g}return y},[e,o,n,p,d]);return i.useEffect(()=>{f.current=e},[e]),i.useEffect(()=>{p||m()},[n,p]),i.useEffect(()=>{o&&o.length>0&&c(null)},[JSON.stringify(o)]),i.useEffect(()=>{p||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{m(),v.current=null},l))},[l,p,m,...s]),{droppableRects:h,measureDroppableContainers:m,measuringScheduled:o!=null};function b(){switch(u){case Bt.Always:return!1;case Bt.BeforeDragging:return n;default:return!n}}}function mo(e,t){return Ut(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function ou(e,t){return mo(e,t)}function iu(e){let{callback:t,disabled:n}=e;const s=Dr(t),a=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(s)},[s,n]);return i.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function jn(e){let{callback:t,disabled:n}=e;const s=Dr(t),a=i.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(s)},[n]);return i.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function lu(e){return new Tr(Mt(e),e)}function ss(e,t,n){t===void 0&&(t=lu);const[s,a]=i.useState(null);function o(){a(d=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=d??n)!=null?u:null}const f=t(e);return JSON.stringify(d)===JSON.stringify(f)?d:f})}const c=iu({callback(d){if(e)for(const u of d){const{type:f,target:p}=u;if(f==="childList"&&p instanceof HTMLElement&&p.contains(e)){o();break}}}}),l=jn({callback:o});return ze(()=>{o(),e?(l==null||l.observe(e),c==null||c.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),c==null||c.disconnect())},[e]),s}function cu(e){const t=mo(e);return ao(e,t)}const as=[];function du(e){const t=i.useRef(e),n=Ut(s=>e?s&&s!==as&&e&&t.current&&e.parentNode===t.current.parentNode?s:Er(e):as,[e]);return i.useEffect(()=>{t.current=e},[e]),n}function uu(e){const[t,n]=i.useState(null),s=i.useRef(e),a=i.useCallback(o=>{const c=On(o.target);c&&n(l=>l?(l.set(c,Qn(c)),new Map(l)):null)},[]);return i.useEffect(()=>{const o=s.current;if(e!==o){c(o);const l=e.map(d=>{const u=On(d);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,Qn(u)]):null}).filter(d=>d!=null);n(l.length?new Map(l):null),s.current=e}return()=>{c(e),c(o)};function c(l){l.forEach(d=>{const u=On(d);u==null||u.removeEventListener("scroll",a)})}},[a,e]),i.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,c)=>yt(o,c),Ee):fo(e):Ee,[e,t])}function os(e,t){t===void 0&&(t=[]);const n=i.useRef(null);return i.useEffect(()=>{n.current=null},t),i.useEffect(()=>{const s=e!==Ee;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?on(e,n.current):Ee}function fu(e){i.useEffect(()=>{if(!wn)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function pu(e,t){return i.useMemo(()=>e.reduce((n,s)=>{let{eventName:a,handler:o}=s;return n[a]=c=>{o(c,t)},n},{}),[e,t])}function xo(e){return i.useMemo(()=>e?Ld(e):null,[e])}const is=[];function hu(e,t){t===void 0&&(t=Mt);const[n]=e,s=xo(n?ge(n):null),[a,o]=i.useState(is);function c(){o(()=>e.length?e.map(d=>co(d)?s:new Tr(t(d),d)):is)}const l=jn({callback:c});return ze(()=>{l==null||l.disconnect(),c(),e.forEach(d=>l==null?void 0:l.observe(d))},[e]),a}function mu(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Kt(t)?t:e}function xu(e){let{measure:t}=e;const[n,s]=i.useState(null),a=i.useCallback(u=>{for(const{target:f}of u)if(Kt(f)){s(p=>{const x=t(f);return p?{...p,width:x.width,height:x.height}:x});break}},[t]),o=jn({callback:a}),c=i.useCallback(u=>{const f=mu(u);o==null||o.disconnect(),f&&(o==null||o.observe(f)),s(f?t(f):null)},[t,o]),[l,d]=an(c);return i.useMemo(()=>({nodeRef:l,rect:n,setRef:d}),[n,l,d])}const gu=[{sensor:yn,options:{}},{sensor:ho,options:{}}],bu={current:{}},tn={draggable:{measure:Jr},droppable:{measure:Jr,strategy:Bt.WhileDragging,frequency:Jn.Optimized},dragOverlay:{measure:Mt}};class zt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const vu={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new zt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ln},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:tn,measureDroppableContainers:ln,windowRect:null,measuringScheduled:!1},wu={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ln,draggableNodes:new Map,over:null,measureDroppableContainers:ln},Cn=i.createContext(wu),go=i.createContext(vu);function yu(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new zt}}}function ju(e,t){switch(t.type){case J.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case J.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case J.DragEnd:case J.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case J.RegisterDroppable:{const{element:n}=t,{id:s}=n,a=new zt(e.droppable.containers);return a.set(s,n),{...e,droppable:{...e.droppable,containers:a}}}case J.SetDroppableDisabled:{const{id:n,key:s,disabled:a}=t,o=e.droppable.containers.get(n);if(!o||s!==o.key)return e;const c=new zt(e.droppable.containers);return c.set(n,{...o,disabled:a}),{...e,droppable:{...e.droppable,containers:c}}}case J.UnregisterDroppable:{const{id:n,key:s}=t,a=e.droppable.containers.get(n);if(!a||s!==a.key)return e;const o=new zt(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Cu(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:a}=i.useContext(Cn),o=Xn(s),c=Xn(n==null?void 0:n.id);return i.useEffect(()=>{if(!t&&!s&&o&&c!=null){if(!kr(o)||document.activeElement===o.target)return;const l=a.get(c);if(!l)return;const{activatorNode:d,node:u}=l;if(!d.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[d.current,u.current]){if(!f)continue;const p=md(f);if(p){p.focus();break}}})}},[s,t,a,c,o]),null}function Nu(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((a,o)=>o({transform:a,...s}),n):n}function Su(e){return i.useMemo(()=>({draggable:{...tn.draggable,...e==null?void 0:e.draggable},droppable:{...tn.droppable,...e==null?void 0:e.droppable},dragOverlay:{...tn.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Ru(e){let{activeNode:t,measure:n,initialRect:s,config:a=!0}=e;const o=i.useRef(!1),{x:c,y:l}=typeof a=="boolean"?{x:a,y:a}:a;ze(()=>{if(!c&&!l||!t){o.current=!1;return}if(o.current||!s)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),p=ao(f,s);if(c||(p.x=0),l||(p.y=0),o.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const x=oo(u);x&&x.scrollBy({top:p.y,left:p.x})}},[t,c,l,s,n])}const bo=i.createContext({...Ee,scaleX:1,scaleY:1});var Xe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Xe||(Xe={}));const vo=i.memo(function(t){var n,s,a,o;let{id:c,accessibility:l,autoScroll:d=!0,children:u,sensors:f=gu,collisionDetection:p=Dd,measuring:x,modifiers:m,...v}=t;const h=i.useReducer(ju,void 0,yu),[b,y]=h,[g,w]=yd(),[C,S]=i.useState(Xe.Uninitialized),k=C===Xe.Initialized,{draggable:{active:_,nodes:I,translate:T},droppable:{containers:N}}=b,P=_!=null?I.get(_):null,G=i.useRef({initial:null,translated:null}),H=i.useMemo(()=>{var ie;return _!=null?{id:_,data:(ie=P==null?void 0:P.data)!=null?ie:bu,rect:G}:null},[_,P]),A=i.useRef(null),[F,K]=i.useState(null),[V,te]=i.useState(null),Y=$t(v,Object.values(v)),Re=Wt("DndDescribedBy",c),_e=i.useMemo(()=>N.getEnabled(),[N]),Q=Su(x),{droppableRects:fe,measureDroppableContainers:oe,measuringScheduled:ye}=au(_e,{dragging:k,dependencies:[T.x,T.y],config:Q.droppable}),Z=ru(I,_),D=i.useMemo(()=>V?Yn(V):null,[V]),z=tl(),U=ou(Z,Q.draggable.measure);Ru({activeNode:_!=null?I.get(_):null,config:z.layoutShiftCompensation,initialRect:U,measure:Q.draggable.measure});const M=ss(Z,Q.draggable.measure,U),$=ss(Z?Z.parentElement:null),E=i.useRef({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:fe,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ne=N.getNodeFor((n=E.current.over)==null?void 0:n.id),re=xu({measure:Q.dragOverlay.measure}),Te=(s=re.nodeRef.current)!=null?s:Z,Ae=k?(a=re.rect)!=null?a:M:null,ct=!!(re.nodeRef.current&&re.rect),Vr=cu(ct?null:M),kn=xo(Te?ge(Te):null),Ge=du(k?ne??Z:null),Yt=hu(Ge),Qt=Nu(m,{transform:{x:T.x-Vr.x,y:T.y-Vr.y,scaleX:1,scaleY:1},activatorEvent:V,active:H,activeNodeRect:M,containerNodeRect:$,draggingNodeRect:Ae,over:E.current.over,overlayNodeRect:re.rect,scrollableAncestors:Ge,scrollableAncestorRects:Yt,windowRect:kn}),Hr=D?yt(D,T):null,Gr=uu(Ge),qi=os(Gr),Xi=os(Gr,[M]),dt=yt(Qt,qi),ut=Ae?Td(Ae,Qt):null,It=H&&ut?p({active:H,collisionRect:ut,droppableRects:fe,droppableContainers:_e,pointerCoordinates:Hr}):null,Kr=Md(It,"id"),[Ke,Ur]=i.useState(null),Yi=ct?Qt:yt(Qt,Xi),Qi=kd(Yi,(o=Ke==null?void 0:Ke.rect)!=null?o:null,M),En=i.useRef(null),Wr=i.useCallback((ie,be)=>{let{sensor:ve,options:Ue}=be;if(A.current==null)return;const je=I.get(A.current);if(!je)return;const we=ie.nativeEvent,Pe=new ve({active:A.current,activeNode:je,event:we,options:Ue,context:E,onAbort(se){if(!I.get(se))return;const{onDragAbort:Oe}=Y.current,Be={id:se};Oe==null||Oe(Be),g({type:"onDragAbort",event:Be})},onPending(se,We,Oe,Be){if(!I.get(se))return;const{onDragPending:kt}=Y.current,qe={id:se,constraint:We,initialCoordinates:Oe,offset:Be};kt==null||kt(qe),g({type:"onDragPending",event:qe})},onStart(se){const We=A.current;if(We==null)return;const Oe=I.get(We);if(!Oe)return;const{onDragStart:Be}=Y.current,Dt={activatorEvent:we,active:{id:We,data:Oe.data,rect:G}};tt.unstable_batchedUpdates(()=>{Be==null||Be(Dt),S(Xe.Initializing),y({type:J.DragStart,initialCoordinates:se,active:We}),g({type:"onDragStart",event:Dt}),K(En.current),te(we)})},onMove(se){y({type:J.DragMove,coordinates:se})},onEnd:ft(J.DragEnd),onCancel:ft(J.DragCancel)});En.current=Pe;function ft(se){return async function(){const{active:Oe,collisions:Be,over:Dt,scrollAdjustedTranslate:kt}=E.current;let qe=null;if(Oe&&kt){const{cancelDrop:Et}=Y.current;qe={activatorEvent:we,active:Oe,collisions:Be,delta:kt,over:Dt},se===J.DragEnd&&typeof Et=="function"&&await Promise.resolve(Et(qe))&&(se=J.DragCancel)}A.current=null,tt.unstable_batchedUpdates(()=>{y({type:se}),S(Xe.Uninitialized),Ur(null),K(null),te(null),En.current=null;const Et=se===J.DragEnd?"onDragEnd":"onDragCancel";if(qe){const Tn=Y.current[Et];Tn==null||Tn(qe),g({type:Et,event:qe})}})}}},[I]),Zi=i.useCallback((ie,be)=>(ve,Ue)=>{const je=ve.nativeEvent,we=I.get(Ue);if(A.current!==null||!we||je.dndKit||je.defaultPrevented)return;const Pe={active:we};ie(ve,be.options,Pe)===!0&&(je.dndKit={capturedBy:be.sensor},A.current=Ue,Wr(ve,be))},[I,Wr]),qr=su(f,Zi);fu(f),ze(()=>{M&&C===Xe.Initializing&&S(Xe.Initialized)},[M,C]),i.useEffect(()=>{const{onDragMove:ie}=Y.current,{active:be,activatorEvent:ve,collisions:Ue,over:je}=E.current;if(!be||!ve)return;const we={active:be,activatorEvent:ve,collisions:Ue,delta:{x:dt.x,y:dt.y},over:je};tt.unstable_batchedUpdates(()=>{ie==null||ie(we),g({type:"onDragMove",event:we})})},[dt.x,dt.y]),i.useEffect(()=>{const{active:ie,activatorEvent:be,collisions:ve,droppableContainers:Ue,scrollAdjustedTranslate:je}=E.current;if(!ie||A.current==null||!be||!je)return;const{onDragOver:we}=Y.current,Pe=Ue.get(Kr),ft=Pe&&Pe.rect.current?{id:Pe.id,rect:Pe.rect.current,data:Pe.data,disabled:Pe.disabled}:null,se={active:ie,activatorEvent:be,collisions:ve,delta:{x:je.x,y:je.y},over:ft};tt.unstable_batchedUpdates(()=>{Ur(ft),we==null||we(se),g({type:"onDragOver",event:se})})},[Kr]),ze(()=>{E.current={activatorEvent:V,active:H,activeNode:Z,collisionRect:ut,collisions:It,droppableRects:fe,draggableNodes:I,draggingNode:Te,draggingNodeRect:Ae,droppableContainers:N,over:Ke,scrollableAncestors:Ge,scrollAdjustedTranslate:dt},G.current={initial:Ae,translated:ut}},[H,Z,It,ut,I,Te,Ae,fe,N,Ke,Ge,dt]),eu({...z,delta:T,draggingRect:ut,pointerCoordinates:Hr,scrollableAncestors:Ge,scrollableAncestorRects:Yt});const Ji=i.useMemo(()=>({active:H,activeNode:Z,activeNodeRect:M,activatorEvent:V,collisions:It,containerNodeRect:$,dragOverlay:re,draggableNodes:I,droppableContainers:N,droppableRects:fe,over:Ke,measureDroppableContainers:oe,scrollableAncestors:Ge,scrollableAncestorRects:Yt,measuringConfiguration:Q,measuringScheduled:ye,windowRect:kn}),[H,Z,M,V,It,$,re,I,N,fe,Ke,oe,Ge,Yt,Q,ye,kn]),el=i.useMemo(()=>({activatorEvent:V,activators:qr,active:H,activeNodeRect:M,ariaDescribedById:{draggable:Re},dispatch:y,draggableNodes:I,over:Ke,measureDroppableContainers:oe}),[V,qr,H,M,y,Re,I,Ke,oe]);return j.createElement(to.Provider,{value:w},j.createElement(Cn.Provider,{value:el},j.createElement(go.Provider,{value:Ji},j.createElement(bo.Provider,{value:Qi},u)),j.createElement(Cu,{disabled:(l==null?void 0:l.restoreFocus)===!1})),j.createElement(Nd,{...l,hiddenTextDescribedById:Re}));function tl(){const ie=(F==null?void 0:F.autoScrollEnabled)===!1,be=typeof d=="object"?d.enabled===!1:d===!1,ve=k&&!ie&&!be;return typeof d=="object"?{...d,enabled:ve}:{enabled:ve}}}),_u=i.createContext(null),ls="button",Mu="Draggable";function Iu(e){let{id:t,data:n,disabled:s=!1,attributes:a}=e;const o=Wt(Mu),{activators:c,activatorEvent:l,active:d,activeNodeRect:u,ariaDescribedById:f,draggableNodes:p,over:x}=i.useContext(Cn),{role:m=ls,roleDescription:v="draggable",tabIndex:h=0}=a??{},b=(d==null?void 0:d.id)===t,y=i.useContext(b?bo:_u),[g,w]=an(),[C,S]=an(),k=pu(c,t),_=$t(n);ze(()=>(p.set(t,{id:t,key:o,node:g,activatorNode:C,data:_}),()=>{const T=p.get(t);T&&T.key===o&&p.delete(t)}),[p,t]);const I=i.useMemo(()=>({role:m,tabIndex:h,"aria-disabled":s,"aria-pressed":b&&m===ls?!0:void 0,"aria-roledescription":v,"aria-describedby":f.draggable}),[s,m,h,b,v,f.draggable]);return{active:d,activatorEvent:l,activeNodeRect:u,attributes:I,isDragging:b,listeners:s?void 0:k,node:g,over:x,setNodeRef:w,setActivatorNodeRef:S,transform:y}}function Du(){return i.useContext(go)}const ku="Droppable",Eu={timeout:25};function Tu(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:a}=e;const o=Wt(ku),{active:c,dispatch:l,over:d,measureDroppableContainers:u}=i.useContext(Cn),f=i.useRef({disabled:n}),p=i.useRef(!1),x=i.useRef(null),m=i.useRef(null),{disabled:v,updateMeasurementsFor:h,timeout:b}={...Eu,...a},y=$t(h??s),g=i.useCallback(()=>{if(!p.current){p.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),m.current=null},b)},[b]),w=jn({callback:g,disabled:v||!c}),C=i.useCallback((I,T)=>{w&&(T&&(w.unobserve(T),p.current=!1),I&&w.observe(I))},[w]),[S,k]=an(C),_=$t(t);return i.useEffect(()=>{!w||!S.current||(w.disconnect(),p.current=!1,w.observe(S.current))},[S,w]),i.useEffect(()=>(l({type:J.RegisterDroppable,element:{id:s,key:o,disabled:n,node:S,rect:x,data:_}}),()=>l({type:J.UnregisterDroppable,key:o,id:s})),[s]),i.useEffect(()=>{n!==f.current.disabled&&(l({type:J.SetDroppableDisabled,id:s,key:o,disabled:n}),f.current.disabled=n)},[s,o,n,l]),{active:c,rect:x,isOver:(d==null?void 0:d.id)===s,node:S,over:d,setNodeRef:k}}function Nn(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function Au(e,t){return e.reduce((n,s,a)=>{const o=t.get(s);return o&&(n[a]=o),n},Array(e.length))}function Jt(e){return e!==null&&e>=0}function Pu(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ou(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const wo=e=>{let{rects:t,activeIndex:n,overIndex:s,index:a}=e;const o=Nn(t,s,n),c=t[a],l=o[a];return!l||!c?null:{x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height}},en={scaleX:1,scaleY:1},yo=e=>{var t;let{activeIndex:n,activeNodeRect:s,index:a,rects:o,overIndex:c}=e;const l=(t=o[n])!=null?t:s;if(!l)return null;if(a===n){const u=o[c];return u?{x:0,y:n<c?u.top+u.height-(l.top+l.height):u.top-l.top,...en}:null}const d=Lu(o,a,n);return a>n&&a<=c?{x:0,y:-l.height-d,...en}:a<n&&a>=c?{x:0,y:l.height+d,...en}:{x:0,y:0,...en}};function Lu(e,t,n){const s=e[t],a=e[t-1],o=e[t+1];return s?n<t?a?s.top-(a.top+a.height):o?o.top-(s.top+s.height):0:o?o.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const jo="Sortable",Co=j.createContext({activeIndex:-1,containerId:jo,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:wo,disabled:{draggable:!1,droppable:!1}});function No(e){let{children:t,id:n,items:s,strategy:a=wo,disabled:o=!1}=e;const{active:c,dragOverlay:l,droppableRects:d,over:u,measureDroppableContainers:f}=Du(),p=Wt(jo,n),x=l.rect!==null,m=i.useMemo(()=>s.map(k=>typeof k=="object"&&"id"in k?k.id:k),[s]),v=c!=null,h=c?m.indexOf(c.id):-1,b=u?m.indexOf(u.id):-1,y=i.useRef(m),g=!Pu(m,y.current),w=b!==-1&&h===-1||g,C=Ou(o);ze(()=>{g&&v&&f(m)},[g,m,v,f]),i.useEffect(()=>{y.current=m},[m]);const S=i.useMemo(()=>({activeIndex:h,containerId:p,disabled:C,disableTransforms:w,items:m,overIndex:b,useDragOverlay:x,sortedRects:Au(m,d),strategy:a}),[h,p,C.draggable,C.droppable,w,m,b,d,x,a]);return j.createElement(Co.Provider,{value:S},t)}const zu=e=>{let{id:t,items:n,activeIndex:s,overIndex:a}=e;return Nn(n,s,a).indexOf(t)},$u=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:a,items:o,newIndex:c,previousItems:l,previousContainerId:d,transition:u}=e;return!u||!s||l!==o&&a===c?!1:n?!0:c!==a&&t===d},Bu={duration:200,easing:"ease"},So="transform",Fu=Ct.Transition.toString({property:So,duration:0,easing:"linear"}),Vu={roleDescription:"sortable"};function Hu(e){let{disabled:t,index:n,node:s,rect:a}=e;const[o,c]=i.useState(null),l=i.useRef(n);return ze(()=>{if(!t&&n!==l.current&&s.current){const d=a.current;if(d){const u=Mt(s.current,{ignoreTransform:!0}),f={x:d.left-u.left,y:d.top-u.top,scaleX:d.width/u.width,scaleY:d.height/u.height};(f.x||f.y)&&c(f)}}n!==l.current&&(l.current=n)},[t,n,s,a]),i.useEffect(()=>{o&&c(null)},[o]),o}function Pr(e){let{animateLayoutChanges:t=$u,attributes:n,disabled:s,data:a,getNewIndex:o=zu,id:c,strategy:l,resizeObserverConfig:d,transition:u=Bu}=e;const{items:f,containerId:p,activeIndex:x,disabled:m,disableTransforms:v,sortedRects:h,overIndex:b,useDragOverlay:y,strategy:g}=i.useContext(Co),w=Gu(s,m),C=f.indexOf(c),S=i.useMemo(()=>({sortable:{containerId:p,index:C,items:f},...a}),[p,a,C,f]),k=i.useMemo(()=>f.slice(f.indexOf(c)),[f,c]),{rect:_,node:I,isOver:T,setNodeRef:N}=Tu({id:c,data:S,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:k,...d}}),{active:P,activatorEvent:G,activeNodeRect:H,attributes:A,setNodeRef:F,listeners:K,isDragging:V,over:te,setActivatorNodeRef:Y,transform:Re}=Iu({id:c,data:S,attributes:{...Vu,...n},disabled:w.draggable}),_e=ud(N,F),Q=!!P,fe=Q&&!v&&Jt(x)&&Jt(b),oe=!y&&V,ye=oe&&fe?Re:null,D=fe?ye??(l??g)({rects:h,activeNodeRect:H,activeIndex:x,overIndex:b,index:C}):null,z=Jt(x)&&Jt(b)?o({id:c,items:f,activeIndex:x,overIndex:b}):C,U=P==null?void 0:P.id,M=i.useRef({activeId:U,items:f,newIndex:z,containerId:p}),$=f!==M.current.items,E=t({active:P,containerId:p,isDragging:V,isSorting:Q,id:c,index:C,items:f,newIndex:M.current.newIndex,previousItems:M.current.items,previousContainerId:M.current.containerId,transition:u,wasDragging:M.current.activeId!=null}),ne=Hu({disabled:!E,index:C,node:I,rect:_});return i.useEffect(()=>{Q&&M.current.newIndex!==z&&(M.current.newIndex=z),p!==M.current.containerId&&(M.current.containerId=p),f!==M.current.items&&(M.current.items=f)},[Q,z,p,f]),i.useEffect(()=>{if(U===M.current.activeId)return;if(U&&!M.current.activeId){M.current.activeId=U;return}const Te=setTimeout(()=>{M.current.activeId=U},50);return()=>clearTimeout(Te)},[U]),{active:P,activeIndex:x,attributes:A,data:S,rect:_,index:C,newIndex:z,items:f,isOver:T,isSorting:Q,isDragging:V,listeners:K,node:I,overIndex:b,over:te,setNodeRef:_e,setActivatorNodeRef:Y,setDroppableNodeRef:N,setDraggableNodeRef:F,transform:ne??D,transition:re()};function re(){if(ne||$&&M.current.newIndex===C)return Fu;if(!(oe&&!kr(G)||!u)&&(Q||E))return Ct.Transition.toString({...u,property:So})}}function Gu(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}B.Down,B.Right,B.Up,B.Left;var Or="DropdownMenu",[Ku,Yp]=Nt(Or,[cr]),he=cr(),[Uu,Ro]=Ku(Or),_o=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:a,defaultOpen:o,onOpenChange:c,modal:l=!0}=e,d=he(t),u=i.useRef(null),[f=!1,p]=Fe({prop:a,defaultProp:o,onChange:c});return r.jsx(Uu,{scope:t,triggerId:Le(),triggerRef:u,contentId:Le(),open:f,onOpenChange:p,onOpenToggle:i.useCallback(()=>p(x=>!x),[p]),modal:l,children:r.jsx(hs,{...d,open:f,onOpenChange:p,dir:s,modal:l,children:n})})};_o.displayName=Or;var Mo="DropdownMenuTrigger",Io=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,o=Ro(Mo,n),c=he(n);return r.jsx(ms,{asChild:!0,...c,children:r.jsx(q.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:ds(t,o.triggerRef),onPointerDown:L(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:L(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Io.displayName=Mo;var Wu="DropdownMenuPortal",Do=e=>{const{__scopeDropdownMenu:t,...n}=e,s=he(t);return r.jsx(xs,{...s,...n})};Do.displayName=Wu;var ko="DropdownMenuContent",Eo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Ro(ko,n),o=he(n),c=i.useRef(!1);return r.jsx(gs,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...s,ref:t,onCloseAutoFocus:L(e.onCloseAutoFocus,l=>{var d;c.current||(d=a.triggerRef.current)==null||d.focus(),c.current=!1,l.preventDefault()}),onInteractOutside:L(e.onInteractOutside,l=>{const d=l.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0,f=d.button===2||u;(!a.modal||f)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Eo.displayName=ko;var qu="DropdownMenuGroup",To=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(bs,{...a,...s,ref:t})});To.displayName=qu;var Xu="DropdownMenuLabel",Ao=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(vs,{...a,...s,ref:t})});Ao.displayName=Xu;var Yu="DropdownMenuItem",Po=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(ys,{...a,...s,ref:t})});Po.displayName=Yu;var Qu="DropdownMenuCheckboxItem",Oo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(js,{...a,...s,ref:t})});Oo.displayName=Qu;var Zu="DropdownMenuRadioGroup",Ju=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Cs,{...a,...s,ref:t})});Ju.displayName=Zu;var ef="DropdownMenuRadioItem",Lo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Ns,{...a,...s,ref:t})});Lo.displayName=ef;var tf="DropdownMenuItemIndicator",zo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Ss,{...a,...s,ref:t})});zo.displayName=tf;var nf="DropdownMenuSeparator",$o=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(ws,{...a,...s,ref:t})});$o.displayName=nf;var rf="DropdownMenuArrow",sf=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Rs,{...a,...s,ref:t})});sf.displayName=rf;var af="DropdownMenuSubTrigger",Bo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(_s,{...a,...s,ref:t})});Bo.displayName=af;var of="DropdownMenuSubContent",Fo=i.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=he(n);return r.jsx(Ms,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Fo.displayName=of;var lf=_o,cf=Io,df=Do,Vo=Eo,uf=To,Ho=Ao,Go=Po,Ko=Oo,Uo=Lo,Wo=zo,qo=$o,Xo=Bo,Yo=Fo;const Sn=lf,Rn=cf,wt=uf,ff=j.forwardRef(({className:e,inset:t,children:n,...s},a)=>r.jsxs(Xo,{ref:a,className:R("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[n,r.jsx(Is,{className:"ml-auto size-4"})]}));ff.displayName=Xo.displayName;const pf=j.forwardRef(({className:e,...t},n)=>r.jsx(Yo,{ref:n,className:R("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));pf.displayName=Yo.displayName;const qt=j.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(df,{children:r.jsx(Vo,{ref:s,sideOffset:t,className:R("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));qt.displayName=Vo.displayName;const Ye=j.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(Go,{ref:s,className:R("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Ye.displayName=Go.displayName;const hf=j.forwardRef(({className:e,children:t,checked:n,...s},a)=>r.jsxs(Ko,{ref:a,className:R("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:r.jsx(Wo,{children:r.jsx(dn,{className:"size-4"})})}),t]}));hf.displayName=Ko.displayName;const mf=j.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(Uo,{ref:s,className:R("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:r.jsx(Wo,{children:r.jsx(Ds,{className:"size-4 fill-current"})})}),t]}));mf.displayName=Uo.displayName;const _n=j.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(Ho,{ref:s,className:R("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));_n.displayName=Ho.displayName;const nt=j.forwardRef(({className:e,...t},n)=>r.jsx(qo,{ref:n,className:R("-mx-1 my-1 h-px bg-muted",e),...t}));nt.displayName=qo.displayName;const xf=({table:e})=>{const{updateTable:t,removeTable:n,createIndex:s,createField:a,createTable:o,schemas:c,filteredSchemas:l}=pe(),{openTableSchemaDialog:d}=un(),{t:u}=ae(),{fitView:f,setNodes:p}=Vt(),{hideSidePanel:x}=Se(),[m,v]=j.useState(!1),[h,b]=j.useState(e.name),{isMd:y}=Ht("md"),g=j.useRef(null),{listeners:w}=Pr({id:e.id}),C=i.useCallback(()=>{m&&(h.trim()&&t(e.id,{name:h.trim()}),v(!1))},[h,e.id,t,m]),S=i.useCallback(()=>{v(!1),b(e.name)},[e.name]);dr(g,C),nn("Enter",C),nn("Escape",S);const k=A=>{A.stopPropagation(),v(!0)},_=i.useCallback(A=>{A.stopPropagation(),p(F=>F.map(K=>K.id==e.id?{...K,selected:!0}:{...K,selected:!1})),f({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.id}]}),y||x()},[f,e.id,p,x,y]),I=i.useCallback(()=>{n(e.id)},[e.id,n]),T=i.useCallback(A=>{t(e.id,{schema:A})},[e.id,t]),N=i.useCallback(()=>{d({table:e,schemas:c,onConfirm:T})},[d,e,c,T]),P=i.useCallback(A=>{A.stopPropagation();const F=rl(e);F.name=`${F.name}_copy`,F.x+=30,F.y+=50,o(F)},[o,e]),G=i.useCallback(()=>r.jsxs(Sn,{children:[r.jsx(Rn,{children:r.jsx(ke,{children:r.jsx(gr,{})})}),r.jsxs(qt,{className:"w-fit min-w-40",children:[r.jsx(_n,{children:u("side_panel.tables_section.table.table_actions.title")}),r.jsx(nt,{}),c.length>0?r.jsxs(r.Fragment,{children:[r.jsx(wt,{children:r.jsxs(Ye,{className:"flex justify-between gap-4",onClick:A=>{A.stopPropagation(),N()},children:[u("side_panel.tables_section.table.table_actions.change_schema"),r.jsx(uc,{className:"size-3.5"})]})}),r.jsx(nt,{})]}):null,r.jsxs(wt,{children:[r.jsxs(Ye,{className:"flex justify-between gap-4",onClick:A=>{A.stopPropagation(),a(e.id)},children:[u("side_panel.tables_section.table.table_actions.add_field"),r.jsx(Bn,{className:"size-3.5"})]}),r.jsxs(Ye,{className:"flex justify-between gap-4",onClick:A=>{A.stopPropagation(),s(e.id)},children:[u("side_panel.tables_section.table.table_actions.add_index"),r.jsx(Fn,{className:"size-3.5"})]})]}),r.jsx(nt,{}),r.jsx(wt,{children:r.jsxs(Ye,{onClick:P,className:"flex justify-between",children:[u("side_panel.tables_section.table.table_actions.duplicate_table"),r.jsx(jl,{className:"size-3.5"})]})}),r.jsx(nt,{}),r.jsx(wt,{children:r.jsxs(Ye,{onClick:I,className:"flex justify-between !text-red-700",children:[u("side_panel.tables_section.table.table_actions.delete_table"),r.jsx(lt,{className:"size-3.5 text-red-700"})]})})]})]}),[e.id,a,s,I,P,u,N,c.length]);let H;return c.length>1&&l&&l.length>1&&(H=e.schema),r.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between gap-1 overflow-hidden",children:[r.jsx("div",{className:"flex cursor-move items-center justify-center",...w,children:r.jsx(Hs,{className:"size-4 text-muted-foreground"})}),r.jsx("div",{className:"flex min-w-0 flex-1 px-1",children:m?r.jsx($e,{ref:g,autoFocus:!0,type:"text",placeholder:e.name,value:h,onClick:A=>A.stopPropagation(),onChange:A=>b(A.target.value),className:"h-7 w-full focus-visible:ring-0"}):r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:r.jsxs("div",{onDoubleClick:k,className:"text-editable truncate px-2 py-0.5",children:[e.name,r.jsx("span",{className:"text-xs text-muted-foreground",children:H?` (${H})`:""})]})}),r.jsx(de,{children:u("tool_tips.double_click_to_edit")})]})}),r.jsx("div",{className:"flex flex-row-reverse",children:m?r.jsx(ke,{onClick:C,children:r.jsx(fr,{})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{children:G()}),r.jsxs("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:[r.jsx(ke,{onClick:k,children:r.jsx(ks,{})}),r.jsx(ke,{onClick:_,children:r.jsx(ur,{})})]})]})})]})},Xt=j.forwardRef(({className:e,variant:t,size:n,...s},a)=>r.jsx(As,{ref:a,className:R($l({variant:t,size:n,className:e})),...s}));Xt.displayName=As.displayName;const er=j.forwardRef((e,t)=>r.jsx(Xt,{...e,ref:t,variant:"default",className:"h-8 w-[32px] p-2 text-xs text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}));er.displayName=Xt.displayName;var Lr="Checkbox",[gf,Qp]=Nt(Lr),[bf,vf]=gf(Lr),Qo=i.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:a,defaultChecked:o,required:c,disabled:l,value:d="on",onCheckedChange:u,form:f,...p}=e,[x,m]=i.useState(null),v=me(t,C=>m(C)),h=i.useRef(!1),b=x?f||!!x.closest("form"):!0,[y=!1,g]=Fe({prop:a,defaultProp:o,onChange:u}),w=i.useRef(y);return i.useEffect(()=>{const C=x==null?void 0:x.form;if(C){const S=()=>g(w.current);return C.addEventListener("reset",S),()=>C.removeEventListener("reset",S)}},[x,g]),r.jsxs(bf,{scope:n,state:y,disabled:l,children:[r.jsx(q.button,{type:"button",role:"checkbox","aria-checked":Ze(y)?"mixed":y,"aria-required":c,"data-state":ei(y),"data-disabled":l?"":void 0,disabled:l,value:d,...p,ref:v,onKeyDown:L(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:L(e.onClick,C=>{g(S=>Ze(S)?!0:!S),b&&(h.current=C.isPropagationStopped(),h.current||C.stopPropagation())})}),b&&r.jsx(wf,{control:x,bubbles:!h.current,name:s,value:d,checked:y,required:c,disabled:l,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Ze(o)?!1:o})]})});Qo.displayName=Lr;var Zo="CheckboxIndicator",Jo=i.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...a}=e,o=vf(Zo,n);return r.jsx(us,{present:s||Ze(o.state)||o.state===!0,children:r.jsx(q.span,{"data-state":ei(o.state),"data-disabled":o.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});Jo.displayName=Zo;var wf=e=>{const{control:t,checked:n,bubbles:s=!0,defaultChecked:a,...o}=e,c=i.useRef(null),l=Ws(n),d=sl(t);i.useEffect(()=>{const f=c.current,p=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(p,"checked").set;if(l!==n&&m){const v=new Event("click",{bubbles:s});f.indeterminate=Ze(n),m.call(f,Ze(n)?!1:n),f.dispatchEvent(v)}},[l,n,s]);const u=i.useRef(Ze(n)?!1:n);return r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??u.current,...o,tabIndex:-1,ref:c,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Ze(e){return e==="indeterminate"}function ei(e){return Ze(e)?"indeterminate":e?"checked":"unchecked"}var ti=Qo,yf=Jo;const zr=j.forwardRef(({className:e,...t},n)=>r.jsx(ti,{ref:n,className:R("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(yf,{className:R("flex items-center justify-center text-current"),children:r.jsx(dn,{className:"size-4"})})}));zr.displayName=ti.displayName;const $r=j.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:R("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));$r.displayName="Textarea";const jf=({field:e,updateField:t,removeField:n})=>{var l;const{t:s}=ae(),[a,o]=j.useState(e),c=i.useRef(null);return i.useEffect(()=>(c.current=al(d=>{t({comments:d==null?void 0:d.comments,characterMaximumLength:d==null?void 0:d.characterMaximumLength,unique:d==null?void 0:d.unique})},200),()=>{c.current=null}),[t]),i.useEffect(()=>{c.current&&c.current(a)},[a]),r.jsxs(pr,{onOpenChange:d=>{d&&o(e)},children:[r.jsx(hr,{asChild:!0,children:r.jsx(X,{variant:"ghost",className:"h-8 w-[32px] p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:r.jsx(Vs,{className:"size-3.5"})})}),r.jsx(mr,{className:"w-52",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-semibold",children:s("side_panel.tables_section.table.field_actions.title")}),r.jsx(jt,{orientation:"horizontal"}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(rt,{htmlFor:"width",className:"text-subtitle",children:s("side_panel.tables_section.table.field_actions.unique")}),r.jsx(zr,{checked:a.unique,disabled:e.primaryKey,onCheckedChange:d=>o(u=>({...u,unique:!!d}))})]}),(l=Cl(e.type.id))!=null&&l.hasCharMaxLength?r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx(rt,{htmlFor:"width",className:"text-subtitle",children:s("side_panel.tables_section.table.field_actions.character_length")}),r.jsx($e,{value:a.characterMaximumLength??"",type:"number",onChange:d=>o(u=>({...u,characterMaximumLength:d.target.value})),className:"w-full rounded-md bg-muted text-sm"})]}):null,r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx(rt,{htmlFor:"width",className:"text-subtitle",children:s("side_panel.tables_section.table.field_actions.comments")}),r.jsx($r,{value:a.comments,onChange:d=>o(u=>({...u,comments:d.target.value})),placeholder:s("side_panel.tables_section.table.field_actions.no_comments"),className:"w-full rounded-md bg-muted text-sm"})]})]}),r.jsx(jt,{orientation:"horizontal"}),r.jsxs(X,{variant:"outline",className:"flex gap-2 !text-red-700",onClick:n,children:[r.jsx(lt,{className:"size-3.5 text-red-700"}),s("side_panel.tables_section.table.field_actions.delete_field")]})]})})]})},Cf=({field:e,updateField:t,removeField:n})=>{const{databaseType:s}=pe(),{t:a}=ae(),{attributes:o,listeners:c,setNodeRef:l,transform:d,transition:u}=Pr({id:e.id}),f=An[s].map(m=>({label:m.name,value:m.id,regex:m.hasCharMaxLength?`^${m.name}\\(\\d+\\)$`:void 0,extractRegex:m.hasCharMaxLength?/\((\d+)\)/:void 0})),p=i.useCallback((m,v)=>{const h=An[s].find(y=>y.id===m)??{id:m,name:m};let b;v!=null&&v.length&&(h!=null&&h.hasCharMaxLength)?b=v[1]:e.characterMaximumLength&&(h!=null&&h.hasCharMaxLength)&&(b=e.characterMaximumLength),t({characterMaximumLength:b,type:Nl(h??{id:m,name:m})})},[t,s,e.characterMaximumLength]),x={transform:Ct.Translate.toString(d),transition:u};return r.jsxs("div",{className:"flex flex-1 touch-none flex-row justify-between p-1",ref:l,style:x,...o,children:[r.jsxs("div",{className:"flex w-8/12 items-center justify-start gap-1 overflow-hidden",children:[r.jsx("div",{className:"flex w-4 shrink-0 cursor-move items-center justify-center",...c,children:r.jsx(Hs,{className:"size-3.5  text-muted-foreground"})}),r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:r.jsx("span",{className:"w-5/12",children:r.jsx($e,{className:"h-8 w-full !truncate focus-visible:ring-0",type:"text",placeholder:a("side_panel.tables_section.table.field_name"),value:e.name,onChange:m=>t({name:m.target.value})})})}),r.jsx(de,{children:e.name})]}),r.jsxs(le,{children:[r.jsx(ce,{className:"flex h-8 !w-5/12",asChild:!0,children:r.jsx("span",{children:r.jsx(fn,{className:"flex h-8 min-h-8 w-full",options:f,placeholder:a("side_panel.tables_section.table.field_type"),value:e.type.id,valueSuffix:e.characterMaximumLength?`(${e.characterMaximumLength})`:"",optionSuffix:m=>{const v=An[s].find(h=>h.id===m.value);return v&&v.hasCharMaxLength?`(${e.characterMaximumLength?e.characterMaximumLength:"n"})`:""},onChange:p,emptyPlaceholder:a("side_panel.tables_section.table.no_types_found")})})}),r.jsxs(de,{children:[e.type.name,e.characterMaximumLength?`(${e.characterMaximumLength})`:""]})]})]}),r.jsxs("div",{className:"flex w-4/12 justify-end gap-1 overflow-hidden",children:[r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:r.jsx("span",{children:r.jsx(er,{pressed:e.nullable,onPressedChange:m=>t({nullable:m}),children:"N"})})}),r.jsx(de,{children:a("side_panel.tables_section.table.nullable")})]}),r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:r.jsx("span",{children:r.jsx(er,{pressed:e.primaryKey,onPressedChange:m=>t({unique:m,primaryKey:m}),children:r.jsx(Sl,{className:"h-3.5"})})})}),r.jsx(de,{children:a("side_panel.tables_section.table.primary_key")})]}),r.jsx(jf,{field:e,updateField:t,removeField:n})]})]})},ni=j.forwardRef((e,t)=>r.jsx(Xt,{...e,ref:t,variant:"default",className:"h-8 w-[32px] p-2 text-xs text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}));ni.displayName=Xt.displayName;const Nf=({fields:e,index:t,updateIndex:n,removeIndex:s})=>{const{t:a}=ae(),o=e.map(l=>({label:l.name,value:l.id})),c=l=>{const d=Array.isArray(l)?l:[l];n({fieldIds:d})};return r.jsxs("div",{className:"flex flex-1 flex-row justify-between gap-2 p-1",children:[r.jsx(fn,{className:"flex h-8 min-h-8 min-w-0 flex-1",multiple:!0,oneLine:!0,options:o,placeholder:a("side_panel.tables_section.table.index_select_fields"),value:t.fieldIds,onChange:c,emptyPlaceholder:a("side_panel.tables_section.table.no_types_found"),keepOrder:!0}),r.jsxs("div",{className:"flex shrink-0 gap-1",children:[r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:r.jsx("span",{children:r.jsx(ni,{pressed:t.unique,onPressedChange:l=>n({unique:!!l}),children:"U"})})}),r.jsx(de,{children:a("side_panel.tables_section.table.index_actions.unique")})]}),r.jsxs(pr,{children:[r.jsx(hr,{asChild:!0,children:r.jsx(X,{variant:"ghost",className:"h-8 w-[32px] p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:r.jsx(Vs,{className:"size-3.5"})})}),r.jsx(mr,{className:"w-52",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("div",{className:"text-sm font-semibold",children:a("side_panel.tables_section.table.index_actions.title")}),r.jsx(jt,{orientation:"horizontal"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx(rt,{htmlFor:"width",className:"text-subtitle",children:a("side_panel.tables_section.table.index_actions.name")}),r.jsx($e,{value:t.name,onChange:l=>n({name:l.target.value})})]}),r.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[r.jsx(rt,{htmlFor:"width",className:"text-subtitle",children:a("side_panel.tables_section.table.index_actions.unique")}),r.jsx(zr,{checked:t.unique,onCheckedChange:l=>n({unique:!!l})})]}),r.jsx(jt,{orientation:"horizontal"}),r.jsxs(X,{variant:"outline",className:"flex gap-2 !text-red-700",onClick:s,children:[r.jsx(lt,{className:"size-3.5 text-red-700"}),a("side_panel.tables_section.table.index_actions.delete_index")]})]})})]})]})]})},ri=j.forwardRef(({color:e,onChange:t},n)=>r.jsxs(pr,{children:[r.jsx(hr,{asChild:!0,ref:n,children:r.jsx("div",{className:"h-6 w-8 cursor-pointer rounded-md border-2 border-muted transition-shadow hover:shadow-md",style:{backgroundColor:e}})}),r.jsx(mr,{className:"w-fit",children:r.jsx("div",{className:"grid grid-cols-4 gap-2",children:nc.map(s=>r.jsx("div",{className:"size-8 cursor-pointer rounded-md border-2 border-muted transition-shadow hover:shadow-md",style:{backgroundColor:s},onClick:()=>t(s)},s))})})]}));ri.displayName="ColorPicker";const Sf=({table:e})=>{const{updateField:t,removeField:n,createField:s,createIndex:a,removeIndex:o,updateIndex:c,updateTable:l}=pe(),{t:d}=ae(),{color:u}=e,[f,p]=j.useState(["fields"]),x=ro(no(yn)),m=b=>{const{active:y,over:g}=b;if((y==null?void 0:y.id)!==(g==null?void 0:g.id)&&g&&y){const w=e.fields,C=w.findIndex(k=>k.id===y.id),S=w.findIndex(k=>k.id===g.id);l(e.id,{fields:Nn(w,C,S)})}},v=i.useCallback(b=>{b.stopPropagation(),p(y=>y.includes("indexes")?y:[...y,"indexes"]),a(e.id)},[a,e.id,p]),h=i.useCallback(b=>{b.stopPropagation(),s(e.id)},[s,e.id]);return r.jsxs("div",{className:"flex flex-col gap-1 rounded-b-md border-l-[6px] px-1",style:{borderColor:u},children:[r.jsxs(vn,{type:"multiple",className:"w-full",value:f,onValueChange:b=>p(b),children:[r.jsxs(st,{value:"fields",className:"mb-2 border-y-0",children:[r.jsx(at,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:r.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[r.jsxs("div",{className:"flex flex-row items-center gap-1",children:[r.jsx(Bn,{className:"size-4"}),d("side_panel.tables_section.table.fields")]}),r.jsx("div",{className:"flex flex-row-reverse",children:r.jsx("div",{className:"hidden flex-row-reverse group-hover:flex",children:r.jsx(X,{variant:"ghost",className:"size-4 p-0 text-xs hover:bg-primary-foreground",onClick:h,children:r.jsx(Zt,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})})})})]})}),r.jsx(ot,{className:"flex flex-col pb-0 pt-1",children:r.jsxs(vo,{sensors:x,collisionDetection:so,onDragEnd:m,children:[r.jsx(No,{items:e.fields,strategy:yo,children:e.fields.map(b=>r.jsx(Cf,{field:b,updateField:y=>t(e.id,b.id,y),removeField:()=>n(e.id,b.id)},b.id))}),r.jsx("div",{className:"flex justify-start p-1",children:r.jsxs(X,{variant:"ghost",className:"flex h-7 items-center gap-1 px-2 text-xs",onClick:h,children:[r.jsx(Zt,{className:"size-4 text-muted-foreground"}),d("side_panel.tables_section.table.add_field")]})})]})})]}),r.jsxs(st,{value:"indexes",className:"mb-2 border-y-0",children:[r.jsx(at,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:r.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[r.jsxs("div",{className:"flex flex-row items-center gap-1",children:[r.jsx(Fn,{className:"size-4"}),d("side_panel.tables_section.table.indexes")]}),r.jsx("div",{className:"flex flex-row-reverse",children:r.jsx("div",{className:"hidden flex-row-reverse group-hover:flex",children:r.jsx(X,{variant:"ghost",className:"size-4 p-0 text-xs hover:bg-primary-foreground",onClick:v,children:r.jsx(Zt,{className:"size-4 shrink-0 text-muted-foreground transition-transform duration-200"})})})})]})}),r.jsxs(ot,{className:"pb-0 pt-1",children:[e.indexes.map(b=>r.jsx(Nf,{index:b,removeIndex:()=>o(e.id,b.id),updateIndex:y=>c(e.id,b.id,y),fields:e.fields},b.id)),r.jsx("div",{className:"flex justify-start p-1",children:r.jsxs(X,{variant:"ghost",className:"flex h-7 items-center gap-1 px-2 text-xs",onClick:v,children:[r.jsx(Zt,{className:"size-4 text-muted-foreground"}),d("side_panel.tables_section.table.add_index")]})})]})]}),r.jsxs(st,{value:"comments",className:"border-y-0",children:[r.jsx(at,{iconPosition:"right",className:"group flex flex-1 p-0 px-2 py-1 text-xs text-subtitle hover:bg-secondary",asChild:!0,children:r.jsx("div",{className:"flex flex-1 items-center justify-between",children:r.jsxs("div",{className:"flex flex-row items-center gap-1",children:[r.jsx(Rl,{className:"size-4"}),d("side_panel.tables_section.table.comments")]})})}),r.jsx(ot,{className:"pb-0 pt-1",children:r.jsx($r,{value:e.comments,onChange:b=>l(e.id,{comments:b.target.value}),placeholder:d("side_panel.tables_section.table.no_comments"),className:"w-full rounded-md bg-muted text-sm focus-visible:ring-0"})})]})]}),r.jsx(jt,{className:""}),r.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[r.jsx(ri,{color:u,onChange:b=>l(e.id,{color:b})}),r.jsxs("div",{className:"flex gap-1",children:[r.jsxs(X,{variant:"outline",className:"h-8 p-2 text-xs",onClick:v,children:[r.jsx(Fn,{className:"h-4"}),d("side_panel.tables_section.table.add_index")]}),r.jsxs(X,{variant:"outline",className:"h-8 p-2 text-xs",onClick:h,children:[r.jsx(Bn,{className:"h-4"}),d("side_panel.tables_section.table.add_field")]})]})]})]})},si=j.forwardRef(({table:e},t)=>{const{attributes:n,setNodeRef:s,transform:a,transition:o}=Pr({id:e.id}),c={transform:Ct.Translate.toString(a),transition:o};return r.jsx(st,{value:e.id,className:"border-none",ref:t,children:r.jsxs("div",{className:"w-full rounded-md border-b",ref:s,style:c,...n,children:[r.jsx(at,{className:"w-full rounded-md border-l-[6px] px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",style:{borderColor:e.color},asChild:!0,children:r.jsx(xf,{table:e})}),r.jsx(ot,{children:r.jsx(Sf,{table:e})})]})})});si.displayName="TableListItem";const Rf=({tables:e})=>{const{updateTablesState:t}=pe(),{openTableFromSidebar:n,openedTableInSidebar:s}=Se(),a=j.useRef(null),o=i.useMemo(()=>e.reduce((f,p)=>(f[p.id]=j.createRef(),f),{}),[e]),c=i.useCallback(f=>{var p,x;return(x=(p=o[f])==null?void 0:p.current)==null?void 0:x.scrollIntoView({behavior:"smooth",block:"start"})},[o]),l=ro(no(yn)),d=f=>{const{active:p,over:x}=f;if((p==null?void 0:p.id)!==(x==null?void 0:x.id)&&x&&p){const m=e.findIndex(b=>b.id===p.id),v=e.findIndex(b=>b.id===x.id),h=Nn(e,m,v).reduce((b,y,g)=>(b.set(y.id,g),b),new Map);t(b=>b.map(y=>({id:y.id,order:h.get(y.id)})))}},u=i.useCallback(()=>{s&&a.current!==s&&(a.current=s,c(s))},[c,s]);return r.jsx(vn,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:s,onValueChange:n,onAnimationEnd:u,children:r.jsx(vo,{sensors:l,collisionDetection:so,onDragEnd:d,children:r.jsx(No,{items:e,strategy:yo,children:e.sort((f,p)=>f.order&&p.order===void 0?-1:f.order===void 0&&p.order?1:f.order!==void 0&&p.order!==void 0?f.order-p.order:f.isView===p.isView?f.name.localeCompare(p.name):f.isView?1:-1).map(f=>r.jsx(si,{table:f,ref:o[f.id]},f.id))})})})},_f="/assets/empty_state-FM0xVkGj.png",Mf="/assets/empty_state_dark-CGFOiUtp.png",Mn=i.forwardRef(({title:e,description:t,className:n,titleClassName:s,descriptionClassName:a,imageClassName:o},c)=>{const{effectiveTheme:l}=pn();return r.jsxs("div",{ref:c,className:R("flex flex-1 flex-col items-center justify-center space-y-1",n),children:[r.jsx("img",{src:l==="dark"?Mf:_f,alt:"Empty state",className:R("mb-2 w-20",o)}),r.jsx(rt,{className:R("text-base",s),children:e}),r.jsx(rt,{className:R("text-sm font-normal text-muted-foreground",a),children:t})]})});Mn.displayName="EmptyState";const If=e=>e==="dark"?"dbml-dark":"dbml-light",Df=e=>{switch(e){case W.SQL_SERVER:return"mssql";case W.MYSQL:case W.MARIADB:return"mysql";case W.POSTGRESQL:case W.COCKROACHDB:case W.SQLITE:return"postgres";default:return"postgres"}},kf=({filteredTables:e})=>{const{currentDiagram:t}=pe(),{effectiveTheme:n}=pn(),{toast:s}=_l(),a=i.useMemo(()=>{var d,u;const o={...t,tables:e,relationships:((d=t.relationships)==null?void 0:d.filter(f=>{const p=e.find(m=>m.id===f.sourceTableId),x=e.find(m=>m.id===f.targetTableId);return p&&x}))??[]},c={...o,tables:((u=o.tables)==null?void 0:u.map(f=>{var p;return{...f,name:f.name.replace(/\s/g,"_"),fields:f.fields.map(x=>({...x,name:x.name.replace(/\s/g,"_")})),indexes:(p=f.indexes)==null?void 0:p.map(x=>({...x,name:x.name.replace(/\s/g,"_")}))}}))??[]},l=Bl({diagram:c,targetDatabaseType:t.databaseType,isDBMLFlow:!0});try{const f=Df(t.databaseType);return Fl.importer.import(l,f)}catch(f){return console.error(f),s({title:"Error",description:"Failed to generate DBML. We would appreciate if you could report this issue!",variant:"destructive"}),""}},[t,e,s]);return r.jsx(Vl,{code:a,className:"my-0.5",editorProps:{height:"100%",defaultLanguage:"dbml",beforeMount:Hl,loading:!1,theme:If(n),options:{wordWrap:"off",mouseWheelZoom:!1,domReadOnly:!0}}})},Ef=()=>{const{createTable:e,tables:t,filteredSchemas:n,schemas:s}=pe(),{openTableSchemaDialog:a}=un(),o=Ml(),{t:c}=ae(),{openTableFromSidebar:l}=Se(),[d,u]=j.useState(""),[f,p]=i.useState(!1),x=j.useRef(null),m=i.useMemo(()=>{const g=C=>{var S;return!((S=d==null?void 0:d.trim)!=null&&S.call(d))||C.name.toLowerCase().includes(d.toLowerCase())},w=C=>Il(C,n);return t.filter(w).filter(g)},[t,d,n]),v=i.useCallback(async g=>{const C=-o.x/o.zoom+80/o.zoom,S=-o.y/o.zoom+80/o.zoom,k=await e({x:C,y:S,schema:g});l(k.id)},[e,l,o.x,o.y,o.zoom]),h=i.useCallback(async()=>{var g;if(u(""),((n==null?void 0:n.length)??0)>1)a({onConfirm:v,schemas:s.filter(w=>n==null?void 0:n.includes(w.id))});else{const w=(n==null?void 0:n.length)===1?(g=s.find(C=>C.id===n[0]))==null?void 0:g.name:void 0;v(w)}},[v,n,a,s,u]),b=i.useCallback(()=>{u("")},[]),y=i.useMemo(()=>ol(),[]);return Yr(y==="mac"?"meta+f":"ctrl+f",()=>{var g;(g=x.current)==null||g.focus()},{preventDefault:!0},[x]),Yr(y==="mac"?"meta+p":"ctrl+p",()=>{p(g=>!g)},{preventDefault:!0},[p]),r.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2","data-vaul-no-drag":!0,children:[r.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[r.jsx("div",{children:r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:r.jsx("span",{children:r.jsx(X,{variant:"ghost",className:"size-8 p-0",onClick:()=>p(g=>!g),children:f?r.jsx(fc,{className:"size-4"}):r.jsx(Gl,{className:"size-4"})})})}),r.jsxs(de,{children:[c(f?"side_panel.tables_section.show_list":"side_panel.tables_section.show_dbml"),y==="mac"?" (⌘P)":" (Ctrl+P)"]})]})}),r.jsx("div",{className:"flex-1",children:r.jsx($e,{ref:x,type:"text",placeholder:c("side_panel.tables_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:d,onChange:g=>u(g.target.value)})}),r.jsxs(X,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:h,children:[r.jsx(Ks,{className:"h-4"}),c("side_panel.tables_section.add_table")]})]}),r.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:f?r.jsx(kf,{filteredTables:m}):r.jsx(xr,{className:"h-full",children:t.length===0?r.jsx(Mn,{title:c("side_panel.tables_section.empty_state.title"),description:c("side_panel.tables_section.empty_state.description"),className:"mt-20"}):d&&m.length===0?r.jsxs("div",{className:"mt-10 flex flex-col items-center gap-2",children:[r.jsx("div",{className:"text-sm text-muted-foreground",children:c("side_panel.tables_section.no_results")}),r.jsxs(X,{variant:"outline",size:"sm",onClick:b,className:"gap-1",children:[r.jsx(Kl,{className:"size-3.5"}),c("side_panel.tables_section.clear")]})]}):r.jsx(Rf,{tables:m})})})]})},Tf=({relationship:e})=>{const{updateRelationship:t,removeRelationship:n}=pe(),{fitView:s,deleteElements:a,setEdges:o}=Vt(),{t:c}=ae(),{hideSidePanel:l}=Se(),[d,u]=j.useState(!1),{isMd:f}=Ht("md"),[p,x]=j.useState(e.name),m=j.useRef(null),v=i.useCallback(()=>{d&&(p.trim()&&p!==e.name&&t(e.id,{name:p.trim()}),u(!1))},[p,e.id,t,d,e.name]);dr(m,v),nn("Enter",v);const h=w=>{w.stopPropagation(),u(!0)},b=i.useCallback(w=>{w.stopPropagation(),o(C=>C.map(S=>S.id==e.id?{...S,selected:!0}:{...S,selected:!1})),s({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.sourceTableId},{id:e.targetTableId}]}),f||l()},[s,e.sourceTableId,e.targetTableId,o,e.id,f,l]),y=i.useCallback(()=>{n(e.id),a({edges:[{id:e.id}]})},[e.id,n,a]),g=i.useCallback(()=>r.jsxs(Sn,{children:[r.jsx(Rn,{children:r.jsx(ke,{children:r.jsx(gr,{})})}),r.jsxs(qt,{className:"w-40",children:[r.jsx(_n,{children:c("side_panel.relationships_section.relationship.relationship_actions.title")}),r.jsx(nt,{}),r.jsx(wt,{children:r.jsxs(Ye,{onClick:y,className:"flex justify-between !text-red-700",children:[c("side_panel.relationships_section.relationship.relationship_actions.delete_relationship"),r.jsx(lt,{className:"size-3.5 text-red-700"})]})})]})]}),[y,c]);return r.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between overflow-hidden",children:[r.jsx("div",{className:"flex min-w-0 flex-1",children:d?r.jsx($e,{ref:m,autoFocus:!0,type:"text",placeholder:e.name,value:p,onClick:w=>w.stopPropagation(),onChange:w=>x(w.target.value),className:"h-7 w-full focus-visible:ring-0"}):r.jsx("div",{className:"truncate",children:e.name})}),r.jsx("div",{className:"flex flex-row-reverse",children:d?r.jsx(ke,{onClick:v,children:r.jsx(fr,{})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{children:g()}),r.jsxs("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:[r.jsx(ke,{onClick:h,children:r.jsx(ks,{})}),r.jsx(ke,{onClick:b,children:r.jsx(ur,{})})]})]})})]})},Af=({relationship:e})=>{const{getTable:t,getField:n,updateRelationship:s,removeRelationship:a}=pe(),{deleteElements:o}=Vt(),{t:c}=ae(),l=i.useMemo(()=>ac({sourceCardinality:e.sourceCardinality,targetCardinality:e.targetCardinality}),[e.sourceCardinality,e.targetCardinality]),d=i.useCallback(v=>{const{sourceCardinality:h,targetCardinality:b}=oc(v);s(e.id,{sourceCardinality:h,targetCardinality:b})},[e.id,s]),u=t(e.targetTableId),f=n(e.targetTableId,e.targetFieldId),p=t(e.sourceTableId),x=n(e.sourceTableId,e.sourceFieldId),m=i.useCallback(()=>{a(e.id),o({edges:[{id:e.id}]})},[e.id,a,o]);return r.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs",children:[r.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[r.jsxs("div",{className:"flex flex-row items-center gap-1",children:[r.jsx(Ps,{className:"size-4 text-subtitle"}),r.jsx("div",{className:"font-bold text-subtitle",children:c("side_panel.relationships_section.relationship.primary")})]}),r.jsxs(le,{children:[r.jsx(ce,{children:r.jsxs("div",{className:"truncate text-left text-sm",children:[p!=null&&p.schema?`${p.schema}.`:"",p==null?void 0:p.name,"(",x==null?void 0:x.name,")"]})}),r.jsxs(de,{children:[p!=null&&p.schema?`${p.schema}.`:"",p==null?void 0:p.name,"(",x==null?void 0:x.name,")"]})]})]}),r.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[r.jsxs("div",{className:"flex flex-row items-center gap-1",children:[r.jsx(Os,{className:"size-4 text-subtitle"}),r.jsx("div",{className:"font-bold text-subtitle",children:c("side_panel.relationships_section.relationship.foreign")})]}),r.jsxs(le,{children:[r.jsx(ce,{children:r.jsxs("div",{className:"truncate text-left text-sm",children:[u!=null&&u.schema?`${u.schema}.`:"",u==null?void 0:u.name,"(",f==null?void 0:f.name,")"]})}),r.jsxs(de,{children:[u!=null&&u.schema?`${u.schema}.`:"",u==null?void 0:u.name,"(",f==null?void 0:f.name,")"]})]})]})]}),r.jsxs("div",{className:"flex flex-col gap-2 text-xs",children:[r.jsxs("div",{className:"flex flex-row items-center gap-1",children:[r.jsx(cc,{className:"size-4 text-subtitle"}),r.jsx("div",{className:"font-bold text-subtitle",children:c("side_panel.relationships_section.relationship.cardinality")})]}),r.jsxs(Da,{value:l,onValueChange:d,children:[r.jsx(vr,{className:"h-8",children:r.jsx(Ea,{})}),r.jsx(wr,{children:r.jsxs(ka,{children:[r.jsx(Qe,{value:"one_to_one",children:c("relationship_type.one_to_one")}),r.jsx(Qe,{value:"one_to_many",children:c("relationship_type.one_to_many")}),r.jsx(Qe,{value:"many_to_one",children:c("relationship_type.many_to_one")}),r.jsx(Qe,{value:"many_to_many",children:c("relationship_type.many_to_many")})]})})]})]})]}),r.jsx("div",{className:"flex flex-1 items-center justify-center pt-2",children:r.jsxs(X,{variant:"ghost",className:"h-8 p-2 text-xs",onClick:m,children:[r.jsx(lt,{className:"mr-1 size-3.5 text-red-700"}),r.jsx("div",{className:"text-red-700",children:c("side_panel.relationships_section.relationship.delete_relationship")})]})})]})},ai=j.forwardRef(({relationship:e},t)=>r.jsxs(st,{value:e.id,className:"rounded-md",ref:t,children:[r.jsx(at,{asChild:!0,className:"w-full rounded-md px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",children:r.jsx(Tf,{relationship:e})}),r.jsx(ot,{className:"p-1 pb-0",children:r.jsx(Af,{relationship:e})})]}));ai.displayName="RelationshipListItem";const Pf=({relationships:e})=>{const{openRelationshipFromSidebar:t,openedRelationshipInSidebar:n}=Se(),s=j.useRef(null),a=e.reduce((l,d)=>(l[d.id]=j.createRef(),l),{}),o=i.useCallback(l=>{var d,u;return(u=(d=a[l])==null?void 0:d.current)==null?void 0:u.scrollIntoView({behavior:"smooth",block:"start"})},[a]),c=i.useCallback(()=>{n&&s.current!==n&&(s.current=n,o(n))},[o,n]);return r.jsx(vn,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:n,onValueChange:t,onAnimationEnd:c,children:e.map(l=>r.jsx(ai,{relationship:l,ref:a[l.id]},l.id))})},Of=()=>{const{relationships:e,filteredSchemas:t}=pe(),[n,s]=j.useState(""),{closeAllRelationshipsInSidebar:a}=Se(),{t:o}=ae(),{openCreateRelationshipDialog:c}=un(),l=i.useMemo(()=>{const u=p=>{var x;return!((x=n==null?void 0:n.trim)!=null&&x.call(n))||p.name.toLowerCase().includes(n.toLowerCase())},f=p=>ic(p,t);return e.filter(f).filter(u)},[e,n,t]),d=i.useCallback(async()=>{s(""),c()},[c,s]);return r.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[r.jsx("div",{children:r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:r.jsx("span",{children:r.jsx(X,{variant:"ghost",className:"size-8 p-0",onClick:a,children:r.jsx(Gs,{className:"size-4"})})})}),r.jsx(de,{children:o("side_panel.relationships_section.collapse")})]})}),r.jsx("div",{className:"flex-1",children:r.jsx($e,{type:"text",placeholder:o("side_panel.relationships_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:n,onChange:u=>s(u.target.value)})}),r.jsxs(X,{variant:"secondary",className:"h-8 p-2 text-xs",onClick:d,children:[r.jsx(Es,{className:"h-4"}),o("side_panel.relationships_section.add_relationship")]})]}),r.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:r.jsx(xr,{className:"h-full",children:e.length===0?r.jsx(Mn,{title:o("side_panel.relationships_section.empty_state.title"),description:o("side_panel.relationships_section.empty_state.description"),className:"mt-20"}):r.jsx(Pf,{relationships:l})})})]})},Lf=({dependency:e})=>{const{removeDependency:t,getTable:n}=pe(),{fitView:s,deleteElements:a,setEdges:o}=Vt(),{t:c}=ae(),{hideSidePanel:l}=Se(),{isMd:d}=Ht("md"),u=i.useMemo(()=>{const m=n(e.tableId),v=n(e.dependentTableId);return!m||!v?"":`${v.name} -> ${m.name}`},[e.tableId,e.dependentTableId,n]),f=i.useCallback(m=>{m.stopPropagation(),o(v=>v.map(h=>h.id==e.id?{...h,selected:!0}:{...h,selected:!1})),s({duration:500,maxZoom:1,minZoom:1,nodes:[{id:e.tableId},{id:e.dependentTableId}]}),d||l()},[s,e.tableId,e.dependentTableId,o,e.id,d,l]),p=i.useCallback(()=>{t(e.id),a({edges:[{id:e.id}]})},[e.id,t,a]),x=i.useCallback(()=>r.jsxs(Sn,{children:[r.jsx(Rn,{children:r.jsx(ke,{children:r.jsx(gr,{})})}),r.jsxs(qt,{className:"w-40",children:[r.jsx(_n,{children:c("side_panel.dependencies_section.dependency.dependency_actions.title")}),r.jsx(nt,{}),r.jsx(wt,{children:r.jsxs(Ye,{onClick:p,className:"flex justify-between !text-red-700",children:[c("side_panel.dependencies_section.dependency.dependency_actions.delete_dependency"),r.jsx(lt,{className:"size-3.5 text-red-700"})]})})]})]}),[p,c]);return r.jsxs("div",{className:"group flex h-11 flex-1 items-center justify-between overflow-hidden",children:[r.jsx("div",{className:"flex min-w-0 flex-1",children:r.jsx("div",{className:"truncate",children:u})}),r.jsxs("div",{className:"flex flex-row-reverse",children:[r.jsx("div",{children:x()}),r.jsx("div",{className:"flex flex-row-reverse md:hidden md:group-hover:flex",children:r.jsx(ke,{onClick:f,children:r.jsx(ur,{})})})]})]})},zf=({dependency:e})=>{const{getTable:t,removeDependency:n}=pe(),{deleteElements:s}=Vt(),{t:a}=ae(),o=t(e.tableId),c=t(e.dependentTableId),l=i.useCallback(()=>{n(e.id),s({edges:[{id:e.id}]})},[e.id,n,s]);return r.jsxs("div",{className:"my-1 flex flex-col rounded-b-md px-1",children:[r.jsx("div",{className:"flex flex-col gap-6",children:r.jsxs("div",{className:"flex items-center justify-between gap-1 text-xs",children:[r.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[r.jsxs("div",{className:"flex flex-row items-center gap-1",children:[r.jsx(Os,{className:"size-4 text-subtitle"}),r.jsx("div",{className:"font-bold text-subtitle",children:a("side_panel.dependencies_section.dependency.dependent_table")})]}),r.jsxs(le,{children:[r.jsx(ce,{children:r.jsx("div",{className:"truncate text-left text-sm	",children:c==null?void 0:c.name})}),r.jsx(de,{children:c==null?void 0:c.name})]})]}),r.jsxs("div",{className:"flex basis-1/2 flex-col gap-2 overflow-hidden text-xs",children:[r.jsxs("div",{className:"flex flex-row items-center gap-1",children:[r.jsx(Ps,{className:"size-4 text-subtitle"}),r.jsx("div",{className:"font-bold text-subtitle",children:a("side_panel.dependencies_section.dependency.table")})]}),r.jsxs(le,{children:[r.jsx(ce,{children:r.jsx("div",{className:"truncate text-left text-sm",children:o==null?void 0:o.name})}),r.jsx(de,{children:o==null?void 0:o.name})]})]})]})}),r.jsx("div",{className:"flex flex-1 items-center justify-center pt-2",children:r.jsxs(X,{variant:"ghost",className:"h-8 p-2 text-xs",onClick:l,children:[r.jsx(lt,{className:"mr-1 size-3.5 text-red-700"}),r.jsx("div",{className:"text-red-700",children:a("side_panel.dependencies_section.dependency.delete_dependency")})]})})]})},oi=j.forwardRef(({dependency:e},t)=>r.jsxs(st,{value:e.id,className:"rounded-md",ref:t,children:[r.jsx(at,{asChild:!0,className:"w-full rounded-md px-2 py-0 hover:bg-accent hover:no-underline data-[state=open]:rounded-b-none",children:r.jsx(Lf,{dependency:e})}),r.jsx(ot,{className:"p-1 pb-0",children:r.jsx(zf,{dependency:e})})]}));oi.displayName="DependencyListItem";const $f=({dependencies:e})=>{const{openDependencyFromSidebar:t,openedDependencyInSidebar:n}=Se(),s=j.useRef(null),a=e.reduce((l,d)=>(l[d.id]=j.createRef(),l),{}),o=i.useCallback(l=>{var d,u;return(u=(d=a[l])==null?void 0:d.current)==null?void 0:u.scrollIntoView({behavior:"smooth",block:"start"})},[a]),c=i.useCallback(()=>{n&&s.current!==n&&(s.current=n,o(n))},[o,n]);return r.jsx(vn,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-1",value:n,onValueChange:t,onAnimationEnd:c,children:e.map(l=>r.jsx(oi,{dependency:l,ref:a[l.id]},l.id))})},Bf=()=>{const{dependencies:e,filteredSchemas:t,getTable:n}=pe(),[s,a]=j.useState(""),{closeAllDependenciesInSidebar:o}=Se(),{t:c}=ae(),l=i.useMemo(()=>{const d=f=>{var m,v,h;if(!((m=s==null?void 0:s.trim)!=null&&m.call(s)))return!0;const p=((v=n(f.tableId))==null?void 0:v.name)??"",x=((h=n(f.dependentTableId))==null?void 0:h.name)??"";return p.toLowerCase().includes(s.toLowerCase())||x.toLowerCase().includes(s.toLowerCase())},u=f=>Ul(f,t);return e.filter(u).filter(d).sort((f,p)=>{const x=n(f.dependentTableId),m=n(f.tableId),v=n(p.dependentTableId),h=n(p.tableId);return`${x==null?void 0:x.name}${m==null?void 0:m.name}`.localeCompare(`${v==null?void 0:v.name}${h==null?void 0:h.name}`)})},[e,s,t,n]);return r.jsxs("section",{className:"flex flex-1 flex-col overflow-hidden px-2",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4 py-1",children:[r.jsx("div",{children:r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:r.jsx("span",{children:r.jsx(X,{variant:"ghost",className:"size-8 p-0",onClick:o,children:r.jsx(Gs,{className:"size-4"})})})}),r.jsx(de,{children:c("side_panel.dependencies_section.collapse")})]})}),r.jsx("div",{className:"flex-1",children:r.jsx($e,{type:"text",placeholder:c("side_panel.dependencies_section.filter"),className:"h-8 w-full focus-visible:ring-0",value:s,onChange:d=>a(d.target.value)})})]}),r.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:r.jsx(xr,{className:"h-full",children:e.length===0?r.jsx(Mn,{title:c("side_panel.dependencies_section.empty_state.title"),description:c("side_panel.dependencies_section.empty_state.description"),className:"mt-20"}):r.jsx($f,{dependencies:l})})})]})},Zp=()=>{const{t:e}=ae(),{schemas:t,filterSchemas:n,filteredSchemas:s}=pe(),{selectSidebarSection:a,selectedSidebarSection:o,isSelectSchemaOpen:c,openSelectSchema:l,closeSelectSchema:d}=Se(),{isMd:u}=Ht("md"),f=i.useMemo(()=>t.map(x=>({label:x.name,value:x.id,description:`(${x.tableCount} tables)`})),[t]),p=i.useCallback(x=>{x?l():d()},[l,d]);return r.jsxs("aside",{className:"flex h-full flex-col overflow-hidden",children:[f.length>0?r.jsxs("div",{className:"flex items-center justify-center border-b pl-3 pt-0.5",children:[r.jsx("div",{className:"shrink-0 text-sm font-semibold",children:e("side_panel.schema")}),r.jsx("div",{className:"flex min-w-0 flex-1",children:r.jsx(fn,{oneLine:!0,className:"w-full rounded-none border-none",selectAll:!0,deselectAll:!0,options:f,value:s??[],onChange:x=>{n(x)},placeholder:e("side_panel.filter_by_schema"),inputPlaceholder:e("side_panel.search_schema"),emptyPlaceholder:e("side_panel.no_schemas_found"),multiple:!0,open:c,onOpenChange:p})})]}):null,u?null:r.jsx("div",{className:"flex justify-center border-b pt-0.5",children:r.jsxs(Da,{value:o,onValueChange:x=>a(x),children:[r.jsxs(vr,{className:"rounded-none border-none font-semibold shadow-none hover:bg-secondary hover:underline focus:border-transparent focus:ring-0",children:[r.jsx(Ea,{}),r.jsx("div",{className:"flex flex-1 justify-end px-2 text-xs font-normal text-muted-foreground",children:e("side_panel.view_all_options")})]}),r.jsx(wr,{children:r.jsxs(ka,{children:[r.jsx(Qe,{value:"tables",children:e("side_panel.tables_section.tables")}),r.jsx(Qe,{value:"relationships",children:e("side_panel.relationships_section.relationships")}),r.jsx(Qe,{value:"dependencies",children:e("side_panel.dependencies_section.dependencies")})]})})]})}),o==="tables"?r.jsx(Ef,{}):o==="relationships"?r.jsx(Of,{}):r.jsx(Bf,{})]})},$n=768;function Ff(){const[e,t]=i.useState(void 0);return i.useEffect(()=>{const n=window.matchMedia(`(max-width: ${$n-1}px)`),s=()=>{t(window.innerWidth<$n)};return n.addEventListener("change",s),t(window.innerWidth<$n),()=>n.removeEventListener("change",s)},[]),!!e}const Vf=Wl,Hf=ql,ii=i.forwardRef(({className:e,...t},n)=>r.jsx(Bs,{className:R("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));ii.displayName=Bs.displayName;const Gf=Fs("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),li=i.forwardRef(({side:e="right",className:t,children:n,...s},a)=>r.jsxs(Hf,{children:[r.jsx(ii,{}),r.jsxs(Ls,{ref:a,className:R(Gf({side:e}),t),...s,children:[r.jsxs(Xl,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(Dl,{className:"size-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]}));li.displayName=Ls.displayName;const ci=({className:e,...t})=>r.jsx("div",{className:R("flex flex-col space-y-2 text-center sm:text-left",e),...t});ci.displayName="SheetHeader";const di=i.forwardRef(({className:e,...t},n)=>r.jsx(zs,{ref:n,className:R("text-lg font-semibold text-foreground",e),...t}));di.displayName=zs.displayName;const ui=i.forwardRef(({className:e,...t},n)=>r.jsx($s,{ref:n,className:R("text-sm text-muted-foreground",e),...t}));ui.displayName=$s.displayName;function cs({className:e,...t}){return r.jsx("div",{className:R("animate-pulse rounded-md bg-primary/10",e),...t})}const In=()=>{const e=j.useContext(fi);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e},Kf="sidebar_state",Uf=60*60*24*7,Wf="16rem",qf="18rem",Xf="3rem",Yf="b",fi=i.createContext(null),Qf=i.forwardRef(({defaultOpen:e=!0,open:t,onOpenChange:n,className:s,style:a,children:o,...c},l)=>{const d=Ff(),[u,f]=i.useState(!1),[p,x]=i.useState(e),m=t??p,v=i.useCallback(g=>{const w=typeof g=="function"?g(m):g;n?n(w):x(w),document.cookie=`${Kf}=${w}; path=/; max-age=${Uf}`},[n,m]),h=i.useCallback(()=>d?f(g=>!g):v(g=>!g),[d,v,f]);i.useEffect(()=>{const g=w=>{w.key===Yf&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),h())};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[h]);const b=m?"expanded":"collapsed",y=i.useMemo(()=>({state:b,open:m,setOpen:v,isMobile:d,openMobile:u,setOpenMobile:f,toggleSidebar:h}),[b,m,v,d,u,f,h]);return r.jsx(fi.Provider,{value:y,children:r.jsx(il,{delayDuration:0,children:r.jsx("div",{style:{"--sidebar-width":Wf,"--sidebar-width-icon":Xf,...a},className:R("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",s),ref:l,...c,children:o})})})});Qf.displayName="SidebarProvider";const pi=i.forwardRef(({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:s,children:a,...o},c)=>{const{isMobile:l,state:d,openMobile:u,setOpenMobile:f}=In();return n==="none"?r.jsx("div",{className:R("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",s),ref:c,...o,children:a}):l?r.jsx(Vf,{open:u,onOpenChange:f,...o,children:r.jsxs(li,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":qf},side:e,children:[r.jsxs(ci,{className:"sr-only",children:[r.jsx(di,{children:"Sidebar"}),r.jsx(ui,{children:"Displays the mobile sidebar."})]}),r.jsx("div",{className:"flex size-full flex-col",children:a})]})}):r.jsxs("div",{ref:c,className:"group peer hidden text-sidebar-foreground md:block","data-state":d,"data-collapsible":d==="collapsed"?n:"","data-variant":t,"data-side":e,children:[r.jsx("div",{className:R("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),r.jsx("div",{className:R("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",s),...o,children:r.jsx("div",{"data-sidebar":"sidebar",className:"flex size-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});pi.displayName="Sidebar";const Zf=i.forwardRef(({className:e,onClick:t,...n},s)=>{const{toggleSidebar:a}=In();return r.jsxs(X,{ref:s,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:R("h-7 w-7",e),onClick:o=>{t==null||t(o),a()},...n,children:[r.jsx(kl,{}),r.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});Zf.displayName="SidebarTrigger";const Jf=i.forwardRef(({className:e,...t},n)=>{const{toggleSidebar:s}=In();return r.jsx("button",{ref:n,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:s,title:"Toggle Sidebar",className:R("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...t})});Jf.displayName="SidebarRail";const ep=i.forwardRef(({className:e,...t},n)=>r.jsx("main",{ref:n,className:R("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",e),...t}));ep.displayName="SidebarInset";const tp=i.forwardRef(({className:e,...t},n)=>r.jsx($e,{ref:n,"data-sidebar":"input",className:R("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",e),...t}));tp.displayName="SidebarInput";const hi=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"header",className:R("flex flex-col gap-2 p-2",e),...t}));hi.displayName="SidebarHeader";const mi=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"footer",className:R("flex flex-col gap-2 p-2",e),...t}));mi.displayName="SidebarFooter";const np=i.forwardRef(({className:e,...t},n)=>r.jsx(jt,{ref:n,"data-sidebar":"separator",className:R("mx-2 w-auto bg-sidebar-border",e),...t}));np.displayName="SidebarSeparator";const xi=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"content",className:R("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t}));xi.displayName="SidebarContent";const gi=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"group",className:R("relative flex w-full min-w-0 flex-col p-2",e),...t}));gi.displayName="SidebarGroup";const rp=i.forwardRef(({className:e,asChild:t=!1,...n},s)=>{const a=t?Ft:"div";return r.jsx(a,{ref:s,"data-sidebar":"group-label",className:R("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})});rp.displayName="SidebarGroupLabel";const sp=i.forwardRef(({className:e,asChild:t=!1,...n},s)=>{const a=t?Ft:"button";return r.jsx(a,{ref:s,"data-sidebar":"group-action",className:R("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",e),...n})});sp.displayName="SidebarGroupAction";const bi=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"group-content",className:R("w-full text-sm",e),...t}));bi.displayName="SidebarGroupContent";const tr=i.forwardRef(({className:e,...t},n)=>r.jsx("ul",{ref:n,"data-sidebar":"menu",className:R("flex w-full min-w-0 flex-col gap-1",e),...t}));tr.displayName="SidebarMenu";const nr=i.forwardRef(({className:e,...t},n)=>r.jsx("li",{ref:n,"data-sidebar":"menu-item",className:R("group/menu-item relative",e),...t}));nr.displayName="SidebarMenuItem";const ap=Fs("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),rr=i.forwardRef(({asChild:e=!1,isActive:t=!1,variant:n="default",size:s="default",tooltip:a,className:o,...c},l)=>{const d=e?Ft:"button",{isMobile:u,state:f}=In(),p=r.jsx(d,{ref:l,"data-sidebar":"menu-button","data-size":s,"data-active":t,className:R(ap({variant:n,size:s}),o),...c});return a?(typeof a=="string"&&(a={children:a}),r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:p}),r.jsx(de,{side:"right",align:"center",hidden:f!=="collapsed"||u,...a})]})):p});rr.displayName="SidebarMenuButton";const op=i.forwardRef(({className:e,asChild:t=!1,showOnHover:n=!1,...s},a)=>{const o=t?Ft:"button";return r.jsx(o,{ref:a,"data-sidebar":"menu-action",className:R("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",n&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",e),...s})});op.displayName="SidebarMenuAction";const ip=i.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,"data-sidebar":"menu-badge",className:R("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",e),...t}));ip.displayName="SidebarMenuBadge";const lp=i.forwardRef(({className:e,showIcon:t=!1,...n},s)=>{const a=i.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return r.jsxs("div",{ref:s,"data-sidebar":"menu-skeleton",className:R("flex h-8 items-center gap-2 rounded-md px-2",e),...n,children:[t&&r.jsx(cs,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),r.jsx(cs,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});lp.displayName="SidebarMenuSkeleton";const cp=i.forwardRef(({className:e,...t},n)=>r.jsx("ul",{ref:n,"data-sidebar":"menu-sub",className:R("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",e),...t}));cp.displayName="SidebarMenuSub";const dp=i.forwardRef(({...e},t)=>r.jsx("li",{ref:t,...e}));dp.displayName="SidebarMenuSubItem";const up=i.forwardRef(({asChild:e=!1,size:t="md",isActive:n,className:s,...a},o)=>{const c=e?Ft:"a";return r.jsx(c,{ref:o,"data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:R("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",s),...a})});up.displayName="SidebarMenuSubButton";const Jp=()=>{const{selectSidebarSection:e,selectedSidebarSection:t,showSidePanel:n}=Se(),{t:s}=ae(),{isMd:a}=Ht("md"),{effectiveTheme:o}=pn(),c=i.useMemo(()=>[{title:s("side_panel.tables_section.tables"),icon:Ks,onClick:()=>{n(),e("tables")},active:t==="tables"},{title:s("side_panel.relationships_section.relationships"),icon:Es,onClick:()=>{n(),e("relationships")},active:t==="relationships"},{title:s("side_panel.dependencies_section.dependencies"),icon:pc,onClick:()=>{n(),e("dependencies")},active:t==="dependencies"}],[e,t,s,n]),l=i.useMemo(()=>[{title:"Discord",icon:El,onClick:()=>window.open("https://discord.gg/QeFwyWSKwC","_blank"),active:!1},{title:"Twitter",icon:hc,onClick:()=>window.open("https://x.com/intent/follow?screen_name=jonathanfishner","_blank"),active:!1},{title:"Documentation",icon:lc,onClick:()=>window.open("https://docs.chartdb.io","_blank"),active:!1}],[]);return r.jsxs(pi,{side:"left",collapsible:"icon",variant:"sidebar",className:"relative h-full",children:[a?null:r.jsx(hi,{children:r.jsx("a",{href:"https://chartdb.io",className:"cursor-pointer",rel:"noreferrer",children:r.jsx("img",{src:o==="light"?rc:sc,alt:"chartDB",className:"h-4 max-w-fit"})})}),r.jsx(xi,{children:r.jsx(gi,{children:r.jsx(bi,{children:r.jsx(tr,{children:c.map(d=>r.jsx(nr,{children:r.jsx(rr,{className:"hover:bg-gray-200 data-[active=true]:bg-gray-100 data-[active=true]:text-pink-600 data-[active=true]:hover:bg-pink-100 dark:hover:bg-gray-800 dark:data-[active=true]:bg-gray-900 dark:data-[active=true]:text-pink-400 dark:data-[active=true]:hover:bg-pink-950",isActive:d.active,asChild:!0,tooltip:d.title,children:r.jsxs("button",{onClick:d.onClick,children:[r.jsx(d.icon,{}),r.jsx("span",{children:d.title})]})})},d.title))})})})}),r.jsx(mi,{children:r.jsx(tr,{children:l.map(d=>r.jsxs(nr,{children:[d.badge&&r.jsx("span",{className:"absolute -right-1 -top-1 rounded-full bg-pink-500 px-[3px] py-px text-[8px] font-semibold text-white",children:d.badge}),r.jsx(rr,{className:"hover:bg-gray-200 data-[active=true]:bg-gray-100 data-[active=true]:text-pink-600 data-[active=true]:hover:bg-pink-100 dark:hover:bg-gray-800 dark:data-[active=true]:bg-gray-900 dark:data-[active=true]:text-pink-400 dark:data-[active=true]:hover:bg-pink-950",isActive:d.active,asChild:!0,tooltip:d.title,children:r.jsxs("button",{onClick:d.onClick,children:[r.jsx(d.icon,{}),r.jsx("span",{children:d.title})]})})]},d.title))})})]})},eh=()=>{const{diagramName:e,updateDiagramName:t,currentDiagram:n}=pe(),{t:s}=ae(),[a,o]=i.useState(!1),[c,l]=j.useState(e),d=j.useRef(null);i.useEffect(()=>{l(e)},[e]);const u=i.useCallback(()=>{a&&(c.trim()&&t(c.trim()),o(!1))},[c,t,a]);dr(d,u),nn("Enter",u);const f=p=>{p.stopPropagation(),o(!0)};return r.jsx("div",{className:"group",children:r.jsxs("div",{className:R("flex flex-1 flex-row items-center justify-center px-2 py-1 whitespace-nowrap",{"text-editable":!a}),children:[r.jsx(Yl,{databaseType:n.databaseType,databaseEdition:n.databaseEdition}),r.jsx("div",{className:"flex flex-row items-center gap-1",children:a?r.jsxs(r.Fragment,{children:[r.jsx($e,{ref:d,autoFocus:!0,type:"text",placeholder:e,value:c,onClick:p=>p.stopPropagation(),onChange:p=>l(p.target.value),className:"ml-1 h-7 focus-visible:ring-0"}),r.jsx(X,{variant:"ghost",className:"flex size-7 p-2 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300",onClick:u,children:r.jsx(fr,{})})]}):r.jsx(r.Fragment,{children:r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:r.jsx("h1",{className:R(Jl(),"group-hover:underline"),onDoubleClick:p=>{f(p)},children:e})}),r.jsx(de,{children:s("tool_tips.double_click_to_edit")})]})})})]})})},th=()=>{const{t:e,i18n:t}=ae(),[n,s]=i.useState(!1),a=ll.map(l=>({label:l.nativeName,value:l.code,description:`(${l.name})`})),o=i.useCallback(l=>{t.changeLanguage(l),s(!1)},[t]),c=i.useMemo(()=>{var l;return(l=t.languages.map(d=>a.find(u=>u.value===d)).find(d=>d!==void 0))==null?void 0:l.value},[t,a]);return r.jsxs(Sn,{open:n,onOpenChange:s,children:[r.jsxs(le,{children:[r.jsx(ce,{asChild:!0,children:r.jsx(Rn,{asChild:!0,children:r.jsxs("div",{className:R(ec({variant:"outline",size:"icon"}),"size-6 rounded-full md:size-8 cursor-pointer"),children:[r.jsx(dc,{className:"size-3.5 md:size-4"}),r.jsx("span",{className:"sr-only",children:"Change language"})]})})}),r.jsx(de,{children:e("language_select.change_language")})]}),r.jsx(qt,{className:"w-56",children:r.jsx("div",{className:"p-2",children:r.jsx(fn,{className:"flex h-8 min-h-8 w-full",options:a,value:c,onChange:o})})})]})};var Dn="Menubar",[sr,fp,pp]=lr(Dn),[vi,nh]=Nt(Dn,[pp,Ts]),ue=cr(),wi=Ts(),[hp,Br]=vi(Dn),yi=i.forwardRef((e,t)=>{const{__scopeMenubar:n,value:s,onValueChange:a,defaultValue:o,loop:c=!0,dir:l,...d}=e,u=ir(l),f=wi(n),[p="",x]=Fe({prop:s,onChange:a,defaultProp:o}),[m,v]=i.useState(null);return r.jsx(hp,{scope:n,value:p,onMenuOpen:i.useCallback(h=>{x(h),v(h)},[x]),onMenuClose:i.useCallback(()=>x(""),[x]),onMenuToggle:i.useCallback(h=>{x(b=>b?"":h),v(h)},[x]),dir:u,loop:c,children:r.jsx(sr.Provider,{scope:n,children:r.jsx(sr.Slot,{scope:n,children:r.jsx(Al,{asChild:!0,...f,orientation:"horizontal",loop:c,dir:u,currentTabStopId:m,onCurrentTabStopIdChange:v,children:r.jsx(q.div,{role:"menubar",...d,ref:t})})})})})});yi.displayName=Dn;var Fr="MenubarMenu",[mp,ji]=vi(Fr),Ci=e=>{const{__scopeMenubar:t,value:n,...s}=e,a=Le(),o=n||a||"LEGACY_REACT_AUTO_VALUE",c=Br(Fr,t),l=ue(t),d=i.useRef(null),u=i.useRef(!1),f=c.value===o;return i.useEffect(()=>{f||(u.current=!1)},[f]),r.jsx(mp,{scope:t,value:o,triggerId:Le(),triggerRef:d,contentId:Le(),wasKeyboardTriggerOpenRef:u,children:r.jsx(hs,{...l,open:f,onOpenChange:p=>{p||c.onMenuClose()},modal:!1,dir:c.dir,...s})})};Ci.displayName=Fr;var ar="MenubarTrigger",Ni=i.forwardRef((e,t)=>{const{__scopeMenubar:n,disabled:s=!1,...a}=e,o=wi(n),c=ue(n),l=Br(ar,n),d=ji(ar,n),u=i.useRef(null),f=me(t,u,d.triggerRef),[p,x]=i.useState(!1),m=l.value===d.value;return r.jsx(sr.ItemSlot,{scope:n,value:d.value,disabled:s,children:r.jsx(Pl,{asChild:!0,...o,focusable:!s,tabStopId:d.value,children:r.jsx(ms,{asChild:!0,...c,children:r.jsx(q.button,{type:"button",role:"menuitem",id:d.triggerId,"aria-haspopup":"menu","aria-expanded":m,"aria-controls":m?d.contentId:void 0,"data-highlighted":p?"":void 0,"data-state":m?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:f,onPointerDown:L(e.onPointerDown,v=>{!s&&v.button===0&&v.ctrlKey===!1&&(l.onMenuOpen(d.value),m||v.preventDefault())}),onPointerEnter:L(e.onPointerEnter,()=>{var h;!!l.value&&!m&&(l.onMenuOpen(d.value),(h=u.current)==null||h.focus())}),onKeyDown:L(e.onKeyDown,v=>{s||(["Enter"," "].includes(v.key)&&l.onMenuToggle(d.value),v.key==="ArrowDown"&&l.onMenuOpen(d.value),["Enter"," ","ArrowDown"].includes(v.key)&&(d.wasKeyboardTriggerOpenRef.current=!0,v.preventDefault()))}),onFocus:L(e.onFocus,()=>x(!0)),onBlur:L(e.onBlur,()=>x(!1))})})})})});Ni.displayName=ar;var xp="MenubarPortal",Si=e=>{const{__scopeMenubar:t,...n}=e,s=ue(t);return r.jsx(xs,{...s,...n})};Si.displayName=xp;var or="MenubarContent",Ri=i.forwardRef((e,t)=>{const{__scopeMenubar:n,align:s="start",...a}=e,o=ue(n),c=Br(or,n),l=ji(or,n),d=fp(n),u=i.useRef(!1);return r.jsx(gs,{id:l.contentId,"aria-labelledby":l.triggerId,"data-radix-menubar-content":"",...o,...a,ref:t,align:s,onCloseAutoFocus:L(e.onCloseAutoFocus,f=>{var x;!!!c.value&&!u.current&&((x=l.triggerRef.current)==null||x.focus()),u.current=!1,f.preventDefault()}),onFocusOutside:L(e.onFocusOutside,f=>{const p=f.target;d().some(m=>{var v;return(v=m.ref.current)==null?void 0:v.contains(p)})&&f.preventDefault()}),onInteractOutside:L(e.onInteractOutside,()=>{u.current=!0}),onEntryFocus:f=>{l.wasKeyboardTriggerOpenRef.current||f.preventDefault()},onKeyDown:L(e.onKeyDown,f=>{if(["ArrowRight","ArrowLeft"].includes(f.key)){const p=f.target,x=p.hasAttribute("data-radix-menubar-subtrigger"),m=p.closest("[data-radix-menubar-content]")!==f.currentTarget,h=(c.dir==="rtl"?"ArrowRight":"ArrowLeft")===f.key;if(!h&&x||m&&h)return;let g=d().filter(S=>!S.disabled).map(S=>S.value);h&&g.reverse();const w=g.indexOf(l.value);g=c.loop?Ep(g,w+1):g.slice(w+1);const[C]=g;C&&c.onMenuOpen(C)}},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Ri.displayName=or;var gp="MenubarGroup",bp=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(bs,{...a,...s,ref:t})});bp.displayName=gp;var vp="MenubarLabel",_i=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(vs,{...a,...s,ref:t})});_i.displayName=vp;var wp="MenubarItem",Mi=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(ys,{...a,...s,ref:t})});Mi.displayName=wp;var yp="MenubarCheckboxItem",Ii=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(js,{...a,...s,ref:t})});Ii.displayName=yp;var jp="MenubarRadioGroup",Cp=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(Cs,{...a,...s,ref:t})});Cp.displayName=jp;var Np="MenubarRadioItem",Di=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(Ns,{...a,...s,ref:t})});Di.displayName=Np;var Sp="MenubarItemIndicator",ki=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(Ss,{...a,...s,ref:t})});ki.displayName=Sp;var Rp="MenubarSeparator",Ei=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(ws,{...a,...s,ref:t})});Ei.displayName=Rp;var _p="MenubarArrow",Mp=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(Rs,{...a,...s,ref:t})});Mp.displayName=_p;var Ip="MenubarSub",Ti=e=>{const{__scopeMenubar:t,children:n,open:s,onOpenChange:a,defaultOpen:o}=e,c=ue(t),[l=!1,d]=Fe({prop:s,defaultProp:o,onChange:a});return r.jsx(Tl,{...c,open:l,onOpenChange:d,children:n})};Ti.displayName=Ip;var Dp="MenubarSubTrigger",Ai=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(_s,{"data-radix-menubar-subtrigger":"",...a,...s,ref:t})});Ai.displayName=Dp;var kp="MenubarSubContent",Pi=i.forwardRef((e,t)=>{const{__scopeMenubar:n,...s}=e,a=ue(n);return r.jsx(Ms,{...a,"data-radix-menubar-content":"",...s,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Pi.displayName=kp;function Ep(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var Oi=yi,Tp=Ci,Li=Ni,Ap=Si,zi=Ri,$i=_i,Bi=Mi,Fi=Ii,Vi=Di,Hi=ki,Gi=Ei,Pp=Ti,Ki=Ai,Ui=Pi;const Tt=Tp,At=Pp,Wi=j.forwardRef(({className:e,...t},n)=>r.jsx(Oi,{ref:n,className:R("flex h-9 items-center space-x-1 rounded-md border bg-background p-1 shadow-sm",e),...t}));Wi.displayName=Oi.displayName;const mt=j.forwardRef(({className:e,...t},n)=>r.jsx(Li,{ref:n,className:R("flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",e),...t}));mt.displayName=Li.displayName;const xt=j.forwardRef(({className:e,inset:t,children:n,...s},a)=>r.jsxs(Ki,{ref:a,className:R("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...s,children:[n,r.jsx(Is,{className:"ml-auto size-4"})]}));xt.displayName=Ki.displayName;const gt=j.forwardRef(({className:e,...t},n)=>r.jsx(Ui,{ref:n,className:R("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));gt.displayName=Ui.displayName;const bt=j.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:s=8,...a},o)=>r.jsx(Ap,{children:r.jsx(zi,{ref:o,align:t,alignOffset:n,sideOffset:s,className:R("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));bt.displayName=zi.displayName;const O=j.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(Bi,{ref:s,className:R("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));O.displayName=Bi.displayName;const vt=j.forwardRef(({className:e,children:t,checked:n,...s},a)=>r.jsxs(Fi,{ref:a,className:R("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:r.jsx(Hi,{children:r.jsx(dn,{className:"size-4"})})}),t]}));vt.displayName=Fi.displayName;const Op=j.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(Vi,{ref:s,className:R("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:r.jsx(Hi,{children:r.jsx(Ds,{className:"size-4 fill-current"})})}),t]}));Op.displayName=Vi.displayName;const Lp=j.forwardRef(({className:e,inset:t,...n},s)=>r.jsx($i,{ref:s,className:R("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Lp.displayName=$i.displayName;const Ie=j.forwardRef(({className:e,...t},n)=>r.jsx(Gi,{ref:n,className:R("-mx-1 my-1 h-px bg-muted",e),...t}));Ie.displayName=Gi.displayName;const Ce=({className:e,...t})=>r.jsx("span",{className:R("ml-auto text-xs tracking-widest text-muted-foreground",e),...t});Ce.displayname="MenubarShortcut";const rh=()=>{const{clearDiagramData:e,deleteDiagram:t,updateDiagramUpdatedAt:n,databaseType:s}=pe(),{openCreateDiagramDialog:a,openOpenDiagramDialog:o,openExportSQLDialog:c,openImportDatabaseDialog:l,openExportImageDialog:d,openExportDiagramDialog:u,openImportDiagramDialog:f,openImportDBMLDialog:p}=un(),{showAlert:x}=Ol(),{setTheme:m,theme:v}=pn(),{hideSidePanel:h,isSidePanelShowed:b,showSidePanel:y}=Se(),{scrollAction:g,setScrollAction:w,setShowCardinality:C,showCardinality:S,setShowDependenciesOnCanvas:k,showDependenciesOnCanvas:_,setShowMiniMapOnCanvas:I,showMiniMapOnCanvas:T}=tc(),{t:N}=ae(),{redo:P,undo:G,hasRedo:H,hasUndo:A}=Ll(),{config:F,updateConfig:K}=Ql(),{exportImage:V}=Zl(),te=cl(),Y=i.useCallback(()=>{t(),te("/")},[t,te]),Re=()=>{a()},_e=()=>{o()},Q=i.useCallback(()=>{V("svg",1)},[V]),fe=i.useCallback(()=>{d({format:"png"})},[d]),oe=i.useCallback(()=>{d({format:"jpeg"})},[d]),ye=i.useCallback(()=>{window.open("https://docs.chartdb.io","_blank")},[]),Z=i.useCallback(()=>{window.open("https://discord.gg/QeFwyWSKwC","_blank")},[]),D=i.useCallback(ne=>{if(ne===W.GENERIC){c({targetDatabaseType:W.GENERIC});return}c({targetDatabaseType:ne})},[F==null?void 0:F.exportActions,K,x,c]),z=i.useCallback(()=>{b?h():y()},[b,y,h]),U=i.useCallback(()=>{C(!S)},[S,C]),M=i.useCallback(()=>{k(!_)},[_,k]),$=i.useCallback(()=>{I(!T)},[T,I]),E="✨";return r.jsxs(Wi,{className:"h-8 border-none py-2 shadow-none md:h-10 md:py-0",children:[r.jsxs(Tt,{children:[r.jsx(mt,{children:N("menu.file.file")}),r.jsxs(bt,{children:[r.jsx(O,{onClick:Re,children:N("menu.file.new")}),r.jsxs(O,{onClick:_e,children:[N("menu.file.open"),r.jsx(Ce,{children:pt[ht.OPEN_DIAGRAM].keyCombinationLabel})]}),r.jsxs(O,{onClick:n,children:[N("menu.file.save"),r.jsx(Ce,{children:pt[ht.SAVE_DIAGRAM].keyCombinationLabel})]}),r.jsx(Ie,{}),r.jsxs(At,{children:[r.jsx(xt,{children:N("menu.file.import")}),r.jsxs(gt,{children:[r.jsx(O,{onClick:f,children:".json"}),r.jsx(O,{onClick:()=>p(),children:".dbml"}),r.jsx(Ie,{}),r.jsx(O,{onClick:()=>l({databaseType:W.POSTGRESQL}),children:Me.postgresql}),r.jsx(O,{onClick:()=>l({databaseType:W.MYSQL}),children:Me.mysql}),r.jsx(O,{onClick:()=>l({databaseType:W.SQL_SERVER}),children:Me.sql_server}),r.jsx(O,{onClick:()=>l({databaseType:W.MARIADB}),children:Me.mariadb}),r.jsx(O,{onClick:()=>l({databaseType:W.SQLITE}),children:Me.sqlite})]})]}),r.jsx(Ie,{}),r.jsxs(At,{children:[r.jsx(xt,{children:N("menu.file.export_sql")}),r.jsxs(gt,{children:[r.jsx(O,{onClick:()=>D(W.GENERIC),children:Me.generic}),r.jsxs(O,{onClick:()=>D(W.POSTGRESQL),children:[Me.postgresql,s!==W.POSTGRESQL&&r.jsx(Ce,{className:"text-base",children:E})]}),r.jsxs(O,{onClick:()=>D(W.MYSQL),children:[Me.mysql,s!==W.MYSQL&&r.jsx(Ce,{className:"text-base",children:E})]}),r.jsxs(O,{onClick:()=>D(W.SQL_SERVER),children:[Me.sql_server,s!==W.SQL_SERVER&&r.jsx(Ce,{className:"text-base",children:E})]}),r.jsxs(O,{onClick:()=>D(W.MARIADB),children:[Me.mariadb,s!==W.MARIADB&&r.jsx(Ce,{className:"text-base",children:E})]}),r.jsxs(O,{onClick:()=>D(W.SQLITE),children:[Me.sqlite,s!==W.SQLITE&&r.jsx(Ce,{className:"text-base",children:E})]})]})]}),r.jsxs(At,{children:[r.jsx(xt,{children:N("menu.file.export_as")}),r.jsxs(gt,{children:[r.jsx(O,{onClick:fe,children:"PNG"}),r.jsx(O,{onClick:oe,children:"JPG"}),r.jsx(O,{onClick:Q,children:"SVG"}),r.jsx(Ie,{}),r.jsx(O,{onClick:u,children:"JSON"})]})]}),r.jsx(Ie,{}),r.jsx(O,{onClick:()=>x({title:N("delete_diagram_alert.title"),description:N("delete_diagram_alert.description"),actionLabel:N("delete_diagram_alert.delete"),closeLabel:N("delete_diagram_alert.cancel"),onAction:Y}),children:N("menu.file.delete_diagram")}),r.jsx(Ie,{}),r.jsx(O,{children:N("menu.file.exit")})]})]}),r.jsxs(Tt,{children:[r.jsx(mt,{children:N("menu.edit.edit")}),r.jsxs(bt,{children:[r.jsxs(O,{onClick:G,disabled:!A,children:[N("menu.edit.undo"),r.jsx(Ce,{children:pt[ht.UNDO].keyCombinationLabel})]}),r.jsxs(O,{onClick:P,disabled:!H,children:[N("menu.edit.redo"),r.jsx(Ce,{children:pt[ht.REDO].keyCombinationLabel})]}),r.jsx(Ie,{}),r.jsx(O,{onClick:()=>x({title:N("clear_diagram_alert.title"),description:N("clear_diagram_alert.description"),actionLabel:N("clear_diagram_alert.clear"),closeLabel:N("clear_diagram_alert.cancel"),onAction:e}),children:N("menu.edit.clear")})]})]}),r.jsxs(Tt,{children:[r.jsx(mt,{children:N("menu.view.view")}),r.jsxs(bt,{children:[r.jsxs(O,{onClick:z,children:[N(b?"menu.view.hide_sidebar":"menu.view.show_sidebar"),r.jsx(Ce,{children:pt[ht.TOGGLE_SIDE_PANEL].keyCombinationLabel})]}),r.jsx(Ie,{}),r.jsx(O,{onClick:U,children:N(S?"menu.view.hide_cardinality":"menu.view.show_cardinality")}),s!==W.CLICKHOUSE?r.jsx(O,{onClick:M,children:N(_?"menu.view.hide_dependencies":"menu.view.show_dependencies")}):null,r.jsx(O,{onClick:$,children:N(T?"menu.view.hide_minimap":"menu.view.show_minimap")}),r.jsx(Ie,{}),r.jsxs(At,{children:[r.jsx(xt,{children:N("menu.view.zoom_on_scroll")}),r.jsxs(gt,{children:[r.jsx(vt,{checked:g==="zoom",onClick:()=>w("zoom"),children:N("zoom.on")}),r.jsx(vt,{checked:g==="pan",onClick:()=>w("pan"),children:N("zoom.off")})]})]}),r.jsx(Ie,{}),r.jsxs(At,{children:[r.jsxs(xt,{className:"flex items-center gap-1",children:[r.jsx("span",{children:N("menu.view.theme")}),r.jsx("div",{className:"flex-1"}),r.jsx(Ce,{children:pt[ht.TOGGLE_THEME].keyCombinationLabel})]}),r.jsxs(gt,{children:[r.jsx(vt,{checked:v==="system",onClick:()=>m("system"),children:N("theme.system")}),r.jsx(vt,{checked:v==="light",onClick:()=>m("light"),children:N("theme.light")}),r.jsx(vt,{checked:v==="dark",onClick:()=>m("dark"),children:N("theme.dark")})]})]})]})]}),r.jsxs(Tt,{children:[r.jsx(mt,{children:N("menu.backup.backup")}),r.jsxs(bt,{children:[r.jsx(O,{onClick:u,children:N("menu.backup.export_diagram")}),r.jsx(O,{onClick:f,children:N("menu.backup.restore_diagram")})]})]}),r.jsxs(Tt,{children:[r.jsx(mt,{children:N("menu.help.help")}),r.jsxs(bt,{children:[r.jsx(O,{onClick:ye,children:N("menu.help.docs_website")}),r.jsx(O,{onClick:Z,children:N("menu.help.join_discord")})]})]})]})};export{eh as D,Jp as E,th as L,rh as M,Qf as S,Zp as a,In as u};
