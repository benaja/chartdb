import{r as h,E as Xd,F as Yd,G as Wd,h as Y,j as g,m as Go,t as Cn,R as _e,w as ke,I as Gd,y as le,z as Be,x as po,J as Ud,k as Ue,K as go,g as Kd,L as qd,M as Zd,v as yo,s as Qd,q as Jd,B as ef,N as tf,O as nf,Q as rf,U as of,V as sf,W as af,X as cf,Y as uf,Z as lf,b as Ee,T as Zt,e as Qt,f as Jt,P as pr,A as df}from"./index-4Cz_Moiq.js";import{e as ff,c as Ce,u as hf}from"./theme-provider-BDcPqgZH.js";import{r as oa,m as mf,v as pf}from"./databases-BNVpV01H.js";import{D as me}from"./database-type-C2NNW5SW.js";import{u as gf,d as yf,a as ia,e as xf,z as oe,s as Tt}from"./use-storage-CH4CXthG.js";import{P as Se,d as sa,B as on,L as Ut}from"./label-D_EewkRs.js";const vf=(e,t,n,r)=>{var i,s,a,c;const o=[n,{code:t,...r||{}}];if((s=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&s.forward)return e.services.logger.forward(o,"warn","react-i18next::",!0);gt(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),(c=(a=e==null?void 0:e.services)==null?void 0:a.logger)!=null&&c.warn?e.services.logger.warn(...o):console!=null&&console.warn&&console.warn(...o)},ki={},xo=(e,t,n,r)=>{gt(n)&&ki[n]||(gt(n)&&(ki[n]=new Date),vf(e,t,n,r))},aa=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},vo=(e,t,n)=>{e.loadNamespaces(t,aa(e,n))},Ri=(e,t,n,r)=>{if(gt(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return vo(e,n,r);n.forEach(o=>{e.options.ns.indexOf(o)<0&&e.options.ns.push(o)}),e.loadLanguages(t,aa(e,r))},wf=(e,t,n={})=>!t.languages||!t.languages.length?(xo(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,o)=>{var i;if(((i=n.bindI18n)==null?void 0:i.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,e))return!1}}),gt=e=>typeof e=="string",bf=e=>typeof e=="object"&&e!==null,Cf=h.createContext();class _f{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Ef=(e,t)=>{const n=h.useRef();return h.useEffect(()=>{n.current=e},[e,t]),n.current},ca=(e,t,n,r)=>e.getFixedT(t,n,r),Sf=(e,t,n,r)=>h.useCallback(ca(e,t,n,r),[e,t,n,r]),ua=(e,t={})=>{var x,M,j,E;const{i18n:n}=t,{i18n:r,defaultNS:o}=h.useContext(Cf)||{},i=n||r||Xd();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new _f),!i){xo(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const N=(P,$)=>gt($)?$:bf($)&&gt($.defaultValue)?$.defaultValue:Array.isArray(P)?P[P.length-1]:P,R=[N,{},!1];return R.t=N,R.i18n={},R.ready=!1,R}(x=i.options.react)!=null&&x.wait&&xo(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...Yd(),...i.options.react,...t},{useSuspense:a,keyPrefix:c}=s;let u=o||((M=i.options)==null?void 0:M.defaultNS);u=gt(u)?[u]:u||["translation"],(E=(j=i.reportNamespaces).addUsedNamespaces)==null||E.call(j,u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every(N=>wf(N,i,s)),l=Sf(i,t.lng||null,s.nsMode==="fallback"?u:u[0],c),f=()=>l,m=()=>ca(i,t.lng||null,s.nsMode==="fallback"?u:u[0],c),[p,y]=h.useState(f);let w=u.join();t.lng&&(w=`${t.lng}${w}`);const v=Ef(w),_=h.useRef(!0);h.useEffect(()=>{const{bindI18n:N,bindI18nStore:R}=s;_.current=!0,!d&&!a&&(t.lng?Ri(i,t.lng,u,()=>{_.current&&y(m)}):vo(i,u,()=>{_.current&&y(m)})),d&&v&&v!==w&&_.current&&y(m);const P=()=>{_.current&&y(m)};return N&&(i==null||i.on(N,P)),R&&(i==null||i.store.on(R,P)),()=>{_.current=!1,i&&(N==null||N.split(" ").forEach($=>i.off($,P))),R&&i&&R.split(" ").forEach($=>i.store.off($,P))}},[i,w]),h.useEffect(()=>{_.current&&d&&y(f)},[i,c,d]);const b=[p,i,d];if(b.t=p,b.i18n=i,b.ready=d,d||!d&&!a)return b;throw new Promise(N=>{t.lng?Ri(i,t.lng,u,()=>N()):vo(i,u,()=>N())})};var la={},wo=function(e,t){return wo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},wo(e,t)};function da(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");wo(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Ie=function(){return Ie=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ie.apply(this,arguments)};function gr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function fa(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,n,i):s(t,n))||i);return o>3&&i&&Object.defineProperty(t,n,i),i}function ha(e,t){return function(n,r){t(n,r,e)}}function ma(e,t,n,r,o,i){function s(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),l,f=!1,m=n.length-1;m>=0;m--){var p={};for(var y in r)p[y]=y==="access"?{}:r[y];for(var y in r.access)p.access[y]=r.access[y];p.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(v||null))};var w=(0,n[m])(a==="accessor"?{get:d.get,set:d.set}:d[c],p);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(l=s(w.get))&&(d.get=l),(l=s(w.set))&&(d.set=l),(l=s(w.init))&&o.unshift(l)}else(l=s(w))&&(a==="field"?o.unshift(l):d[c]=l)}u&&Object.defineProperty(u,r.name,d),f=!0}function pa(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function ga(e){return typeof e=="symbol"?e:"".concat(e)}function ya(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function xa(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function va(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(d){try{u(r.next(d))}catch(l){s(l)}}function c(d){try{u(r.throw(d))}catch(l){s(l)}}function u(d){d.done?i(d.value):o(d.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function wa(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(d){u=[6,d],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var yr=Object.create?function(e,t,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]};function ba(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&yr(t,e,n)}function un(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Uo(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function Ca(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Uo(arguments[t]));return e}function _a(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}function Ko(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function At(e){return this instanceof At?(this.v=e,this):new At(e)}function Ea(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(m){return function(p){return Promise.resolve(p).then(m,l)}}function a(m,p){r[m]&&(o[m]=function(y){return new Promise(function(w,v){i.push([m,y,w,v])>1||c(m,y)})},p&&(o[m]=p(o[m])))}function c(m,p){try{u(r[m](p))}catch(y){f(i[0][3],y)}}function u(m){m.value instanceof At?Promise.resolve(m.value.v).then(d,l):f(i[0][2],m)}function d(m){c("next",m)}function l(m){c("throw",m)}function f(m,p){m(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Sa(e){var t,n;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,i){t[o]=e[o]?function(s){return(n=!n)?{value:At(e[o](s)),done:!1}:i?i(s):s}:i}}function Ma(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof un=="function"?un(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,c){s=e[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}}function Na(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Mf=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},bo=function(e){return bo=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},bo(e)};function Ta(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=bo(e),r=0;r<n.length;r++)n[r]!=="default"&&yr(t,e,n[r]);return Mf(t,e),t}function ka(e){return e&&e.__esModule?e:{default:e}}function Ra(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function Da(e,t,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(e,n):o?o.value=n:t.set(e,n),n}function Ia(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Aa(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var Nf=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function Pa(e){function t(i){e.error=e.hasError?new Nf(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var n,r=0;function o(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(o,function(s){return t(s),o()})}else r|=1}catch(s){t(s)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function ja(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,o,i,s){return r?t?".jsx":".js":o&&(!i||!s)?n:o+i+"."+s.toLowerCase()+"js"}):e}const Tf={__extends:da,__assign:Ie,__rest:gr,__decorate:fa,__param:ha,__esDecorate:ma,__runInitializers:pa,__propKey:ga,__setFunctionName:ya,__metadata:xa,__awaiter:va,__generator:wa,__createBinding:yr,__exportStar:ba,__values:un,__read:Uo,__spread:Ca,__spreadArrays:_a,__spreadArray:Ko,__await:At,__asyncGenerator:Ea,__asyncDelegator:Sa,__asyncValues:Ma,__makeTemplateObject:Na,__importStar:Ta,__importDefault:ka,__classPrivateFieldGet:Ra,__classPrivateFieldSet:Da,__classPrivateFieldIn:Ia,__addDisposableResource:Aa,__disposeResources:Pa,__rewriteRelativeImportExtension:ja},kf=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Aa,get __assign(){return Ie},__asyncDelegator:Sa,__asyncGenerator:Ea,__asyncValues:Ma,__await:At,__awaiter:va,__classPrivateFieldGet:Ra,__classPrivateFieldIn:Ia,__classPrivateFieldSet:Da,__createBinding:yr,__decorate:fa,__disposeResources:Pa,__esDecorate:ma,__exportStar:ba,__extends:da,__generator:wa,__importDefault:ka,__importStar:Ta,__makeTemplateObject:Na,__metadata:xa,__param:ha,__propKey:ga,__read:Uo,__rest:gr,__rewriteRelativeImportExtension:ja,__runInitializers:pa,__setFunctionName:ya,__spread:Ca,__spreadArray:Ko,__spreadArrays:_a,__values:un,default:Tf},Symbol.toStringTag,{value:"Module"})),Rf=Wd(kf);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EventEmitter=void 0,e.default=o;var t=Rf,n=h,r=e.EventEmitter=function(){function i(){var s=this;this.subscriptions=new Set,this.emit=function(a){var c,u;try{for(var d=(0,t.__values)(s.subscriptions),l=d.next();!l.done;l=d.next()){var f=l.value;f(a)}}catch(m){c={error:m}}finally{try{l&&!l.done&&(u=d.return)&&u.call(d)}finally{if(c)throw c.error}}},this.useSubscription=function(a){var c=(0,n.useRef)();c.current=a,(0,n.useEffect)(function(){function u(d){c.current&&c.current(d)}return s.subscriptions.add(u),function(){s.subscriptions.delete(u)}},[])}}return i}();function o(){var i=(0,n.useRef)();return i.current||(i.current=new r),i.current}})(la);const $a=h.createContext({databaseType:me.GENERIC,diagramName:"",diagramId:"",tables:[],relationships:[],dependencies:[],schemas:[],filteredSchemas:[],filterSchemas:Y,currentDiagram:{id:"",name:"",databaseType:me.GENERIC,createdAt:new Date,updatedAt:new Date},events:new la.EventEmitter,updateDiagramId:Y,updateDiagramName:Y,updateDiagramUpdatedAt:Y,loadDiagram:Y,loadDiagramFromData:Y,clearDiagramData:Y,deleteDiagram:Y,updateDatabaseType:Y,updateDatabaseEdition:Y,createTable:Y,getTable:Y,addTable:Y,addTables:Y,removeTable:Y,removeTables:Y,updateTable:Y,updateTablesState:Y,updateField:Y,removeField:Y,createField:Y,addField:Y,getField:Y,createIndex:Y,addIndex:Y,getIndex:Y,removeIndex:Y,updateIndex:Y,createRelationship:Y,addRelationship:Y,getRelationship:Y,removeRelationship:Y,updateRelationship:Y,removeRelationships:Y,addRelationships:Y,createDependency:Y,addDependency:Y,getDependency:Y,removeDependency:Y,removeDependencies:Y,addDependencies:Y,updateDependency:Y}),xr=()=>h.useContext($a),Df=h.createContext({openCreateDiagramDialog:Y,closeCreateDiagramDialog:Y,openOpenDiagramDialog:Y,closeOpenDiagramDialog:Y,openExportSQLDialog:Y,closeExportSQLDialog:Y,closeCreateRelationshipDialog:Y,openCreateRelationshipDialog:Y,openImportDatabaseDialog:Y,closeImportDatabaseDialog:Y,openTableSchemaDialog:Y,closeTableSchemaDialog:Y,openStarUsDialog:Y,closeStarUsDialog:Y,openExportImageDialog:Y,closeExportImageDialog:Y,openExportDiagramDialog:Y,closeExportDiagramDialog:Y,openImportDiagramDialog:Y,closeImportDiagramDialog:Y,openImportDBMLDialog:Y,closeImportDBMLDialog:Y}),If=()=>h.useContext(Df);function Fe(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}var Af=["color"],Jb=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,Af);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Pf=["color"],jf=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,Pf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),$f=["color"],e2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,$f);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Lf=["color"],Of=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,Lf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ff=["color"],t2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,Ff);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Hf=["color"],n2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,Hf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),zf=["color"],r2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,zf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.07451 1.82584C5.03267 1.81926 4.99014 1.81825 4.94803 1.82284C4.10683 1.91446 2.82673 2.36828 2.07115 2.77808C2.02106 2.80525 1.97621 2.84112 1.93869 2.88402C1.62502 3.24266 1.34046 3.82836 1.11706 4.38186C0.887447 4.95076 0.697293 5.55032 0.588937 5.98354C0.236232 7.39369 0.042502 9.08728 0.0174948 10.6925C0.0162429 10.7729 0.0351883 10.8523 0.0725931 10.9234C0.373679 11.496 1.02015 12.027 1.66809 12.4152C2.32332 12.8078 3.08732 13.1182 3.70385 13.1778C3.85335 13.1922 4.00098 13.1358 4.10282 13.0255C4.2572 12.8581 4.5193 12.4676 4.71745 12.1643C4.80739 12.0267 4.89157 11.8953 4.95845 11.7901C5.62023 11.9106 6.45043 11.9801 7.50002 11.9801C8.54844 11.9801 9.37796 11.9107 10.0394 11.7905C10.1062 11.8957 10.1903 12.0269 10.2801 12.1643C10.4783 12.4676 10.7404 12.8581 10.8947 13.0255C10.9966 13.1358 11.1442 13.1922 11.2937 13.1778C11.9102 13.1182 12.6742 12.8078 13.3295 12.4152C13.9774 12.027 14.6239 11.496 14.925 10.9234C14.9624 10.8523 14.9813 10.7729 14.9801 10.6925C14.9551 9.08728 14.7613 7.39369 14.4086 5.98354C14.3003 5.55032 14.1101 4.95076 13.8805 4.38186C13.6571 3.82836 13.3725 3.24266 13.0589 2.88402C13.0214 2.84112 12.9765 2.80525 12.9264 2.77808C12.1708 2.36828 10.8907 1.91446 10.0495 1.82284C10.0074 1.81825 9.96489 1.81926 9.92305 1.82584C9.71676 1.85825 9.5391 1.96458 9.40809 2.06355C9.26977 2.16804 9.1413 2.29668 9.0304 2.42682C8.86968 2.61544 8.71437 2.84488 8.61428 3.06225C8.27237 3.03501 7.90138 3.02 7.5 3.02C7.0977 3.02 6.72593 3.03508 6.38337 3.06244C6.28328 2.84501 6.12792 2.61549 5.96716 2.42682C5.85626 2.29668 5.72778 2.16804 5.58947 2.06355C5.45846 1.96458 5.2808 1.85825 5.07451 1.82584ZM11.0181 11.5382C11.0395 11.5713 11.0615 11.6051 11.0838 11.6392C11.2169 11.843 11.3487 12.0385 11.4508 12.1809C11.8475 12.0916 12.352 11.8818 12.8361 11.5917C13.3795 11.2661 13.8098 10.8918 14.0177 10.5739C13.9852 9.06758 13.7993 7.50369 13.4773 6.21648C13.38 5.82759 13.2038 5.27021 12.9903 4.74117C12.7893 4.24326 12.5753 3.82162 12.388 3.5792C11.7376 3.24219 10.7129 2.88582 10.0454 2.78987C10.0308 2.79839 10.0113 2.81102 9.98675 2.82955C9.91863 2.881 9.84018 2.95666 9.76111 3.04945C9.71959 3.09817 9.68166 3.1471 9.64768 3.19449C9.953 3.25031 10.2253 3.3171 10.4662 3.39123C11.1499 3.6016 11.6428 3.89039 11.884 4.212C12.0431 4.42408 12.0001 4.72494 11.788 4.884C11.5759 5.04306 11.2751 5.00008 11.116 4.788C11.0572 4.70961 10.8001 4.4984 10.1838 4.30877C9.58933 4.12585 8.71356 3.98 7.5 3.98C6.28644 3.98 5.41067 4.12585 4.81616 4.30877C4.19988 4.4984 3.94279 4.70961 3.884 4.788C3.72494 5.00008 3.42408 5.04306 3.212 4.884C2.99992 4.72494 2.95694 4.42408 3.116 4.212C3.35721 3.89039 3.85011 3.6016 4.53383 3.39123C4.77418 3.31727 5.04571 3.25062 5.35016 3.19488C5.31611 3.14738 5.27808 3.09831 5.23645 3.04945C5.15738 2.95666 5.07893 2.881 5.01081 2.82955C4.98628 2.81102 4.96674 2.79839 4.95217 2.78987C4.28464 2.88582 3.25999 3.24219 2.60954 3.5792C2.42226 3.82162 2.20825 4.24326 2.00729 4.74117C1.79376 5.27021 1.61752 5.82759 1.52025 6.21648C1.19829 7.50369 1.01236 9.06758 0.97986 10.5739C1.18772 10.8918 1.61807 11.2661 2.16148 11.5917C2.64557 11.8818 3.15003 12.0916 3.5468 12.1809C3.64885 12.0385 3.78065 11.843 3.9138 11.6392C3.93626 11.6048 3.95838 11.5708 3.97996 11.5375C3.19521 11.2591 2.77361 10.8758 2.50064 10.4664C2.35359 10.2458 2.4132 9.94778 2.63377 9.80074C2.85435 9.65369 3.15236 9.71329 3.29941 9.93387C3.56077 10.3259 4.24355 11.0201 7.50002 11.0201C10.7565 11.0201 11.4392 10.326 11.7006 9.93386C11.8477 9.71329 12.1457 9.65369 12.3663 9.80074C12.5869 9.94779 12.6465 10.2458 12.4994 10.4664C12.2262 10.8762 11.8041 11.2598 11.0181 11.5382ZM4.08049 7.01221C4.32412 6.74984 4.65476 6.60162 5.00007 6.59998C5.34538 6.60162 5.67603 6.74984 5.91966 7.01221C6.16329 7.27459 6.30007 7.62974 6.30007 7.99998C6.30007 8.37021 6.16329 8.72536 5.91966 8.98774C5.67603 9.25011 5.34538 9.39833 5.00007 9.39998C4.65476 9.39833 4.32412 9.25011 4.08049 8.98774C3.83685 8.72536 3.70007 8.37021 3.70007 7.99998C3.70007 7.62974 3.83685 7.27459 4.08049 7.01221ZM9.99885 6.59998C9.65354 6.60162 9.3229 6.74984 9.07926 7.01221C8.83563 7.27459 8.69885 7.62974 8.69885 7.99998C8.69885 8.37021 8.83563 8.72536 9.07926 8.98774C9.3229 9.25011 9.65354 9.39833 9.99885 9.39998C10.3442 9.39833 10.6748 9.25011 10.9184 8.98774C11.1621 8.72536 11.2989 8.37021 11.2989 7.99998C11.2989 7.62974 11.1621 7.27459 10.9184 7.01221C10.6748 6.74984 10.3442 6.60162 9.99885 6.59998Z",fill:r}))}),Bf=["color"],Vf=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,Bf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:r}))}),Xf=["color"],o2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,Xf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M5.5 4.625C6.12132 4.625 6.625 4.12132 6.625 3.5C6.625 2.87868 6.12132 2.375 5.5 2.375C4.87868 2.375 4.375 2.87868 4.375 3.5C4.375 4.12132 4.87868 4.625 5.5 4.625ZM9.5 4.625C10.1213 4.625 10.625 4.12132 10.625 3.5C10.625 2.87868 10.1213 2.375 9.5 2.375C8.87868 2.375 8.375 2.87868 8.375 3.5C8.375 4.12132 8.87868 4.625 9.5 4.625ZM10.625 7.5C10.625 8.12132 10.1213 8.625 9.5 8.625C8.87868 8.625 8.375 8.12132 8.375 7.5C8.375 6.87868 8.87868 6.375 9.5 6.375C10.1213 6.375 10.625 6.87868 10.625 7.5ZM5.5 8.625C6.12132 8.625 6.625 8.12132 6.625 7.5C6.625 6.87868 6.12132 6.375 5.5 6.375C4.87868 6.375 4.375 6.87868 4.375 7.5C4.375 8.12132 4.87868 8.625 5.5 8.625ZM10.625 11.5C10.625 12.1213 10.1213 12.625 9.5 12.625C8.87868 12.625 8.375 12.1213 8.375 11.5C8.375 10.8787 8.87868 10.375 9.5 10.375C10.1213 10.375 10.625 10.8787 10.625 11.5ZM5.5 12.625C6.12132 12.625 6.625 12.1213 6.625 11.5C6.625 10.8787 6.12132 10.375 5.5 10.375C4.87868 10.375 4.375 10.8787 4.375 11.5C4.375 12.1213 4.87868 12.625 5.5 12.625Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Yf=["color"],i2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,Yf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Wf=["color"],s2=h.forwardRef(function(e,t){var n=e.color,r=n===void 0?"currentColor":n,o=Fe(e,Wf);return h.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{ref:t}),h.createElement("path",{d:"M8 2H13.5C13.7761 2 14 2.22386 14 2.5V12.5C14 12.7761 13.7761 13 13.5 13H8V2ZM7 2H1.5C1.22386 2 1 2.22386 1 2.5V12.5C1 12.7761 1.22386 13 1.5 13H7V2ZM0 2.5C0 1.67157 0.671573 1 1.5 1H13.5C14.3284 1 15 1.67157 15 2.5V12.5C15 13.3284 14.3284 14 13.5 14H1.5C0.671573 14 0 13.3284 0 12.5V2.5Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Co=h.forwardRef((e,t)=>{const{children:n,...r}=e,o=h.Children.toArray(n),i=o.find(Uf);if(i){const s=i.props.children,a=o.map(c=>c===i?h.Children.count(s)>1?h.Children.only(null):h.isValidElement(s)?s.props.children:null:c);return g.jsx(_o,{...r,ref:t,children:h.isValidElement(s)?h.cloneElement(s,void 0,a):null})}return g.jsx(_o,{...r,ref:t,children:n})});Co.displayName="Slot";var _o=h.forwardRef((e,t)=>{const{children:n,...r}=e;if(h.isValidElement(n)){const o=qf(n);return h.cloneElement(n,{...Kf(r,n.props),ref:t?Go(t,o):o})}return h.Children.count(n)>1?h.Children.only(null):null});_o.displayName="SlotClone";var Gf=({children:e})=>g.jsx(g.Fragment,{children:e});function Uf(e){return h.isValidElement(e)&&e.type===Gf}function Kf(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{i(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function qf(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function La(e){const t=e+"CollectionProvider",[n,r]=Cn(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:p,children:y}=m,w=_e.useRef(null),v=_e.useRef(new Map).current;return g.jsx(o,{scope:p,itemMap:v,collectionRef:w,children:y})};s.displayName=t;const a=e+"CollectionSlot",c=_e.forwardRef((m,p)=>{const{scope:y,children:w}=m,v=i(a,y),_=ke(p,v.collectionRef);return g.jsx(Co,{ref:_,children:w})});c.displayName=a;const u=e+"CollectionItemSlot",d="data-radix-collection-item",l=_e.forwardRef((m,p)=>{const{scope:y,children:w,...v}=m,_=_e.useRef(null),b=ke(p,_),x=i(u,y);return _e.useEffect(()=>(x.itemMap.set(_,{ref:_,...v}),()=>void x.itemMap.delete(_))),g.jsx(Co,{[d]:"",ref:b,children:w})});l.displayName=u;function f(m){const p=i(e+"CollectionConsumer",m);return _e.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(p.itemMap.values()).sort((x,M)=>v.indexOf(x.ref.current)-v.indexOf(M.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:s,Slot:c,ItemSlot:l},f,r]}var Zf="DismissableLayer",Eo="dismissableLayer.update",Qf="dismissableLayer.pointerDownOutside",Jf="dismissableLayer.focusOutside",Di,Oa=h.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qo=h.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...c}=e,u=h.useContext(Oa),[d,l]=h.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=h.useState({}),p=ke(t,E=>l(E)),y=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(w),_=d?y.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,x=_>=v,M=th(E=>{const N=E.target,R=[...u.branches].some(P=>P.contains(N));!x||R||(o==null||o(E),s==null||s(E),E.defaultPrevented||a==null||a())},f),j=nh(E=>{const N=E.target;[...u.branches].some(P=>P.contains(N))||(i==null||i(E),s==null||s(E),E.defaultPrevented||a==null||a())},f);return Gd(E=>{_===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&a&&(E.preventDefault(),a()))},f),h.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Di=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Ii(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Di)}},[d,f,n,u]),h.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Ii())},[d,u]),h.useEffect(()=>{const E=()=>m({});return document.addEventListener(Eo,E),()=>document.removeEventListener(Eo,E)},[]),g.jsx(Se.div,{...c,ref:p,style:{pointerEvents:b?x?"auto":"none":void 0,...e.style},onFocusCapture:le(e.onFocusCapture,j.onFocusCapture),onBlurCapture:le(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:le(e.onPointerDownCapture,M.onPointerDownCapture)})});qo.displayName=Zf;var eh="DismissableLayerBranch",Fa=h.forwardRef((e,t)=>{const n=h.useContext(Oa),r=h.useRef(null),o=ke(t,r);return h.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),g.jsx(Se.div,{...e,ref:o})});Fa.displayName=eh;function th(e,t=globalThis==null?void 0:globalThis.document){const n=Be(e),r=h.useRef(!1),o=h.useRef(()=>{});return h.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){Ha(Qf,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=c,t.addEventListener("click",o.current,{once:!0})):c()}else t.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",o.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function nh(e,t=globalThis==null?void 0:globalThis.document){const n=Be(e),r=h.useRef(!1);return h.useEffect(()=>{const o=i=>{i.target&&!r.current&&Ha(Jf,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Ii(){const e=new CustomEvent(Eo);document.dispatchEvent(e)}function Ha(e,t,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),r?sa(o,i):o.dispatchEvent(i)}var a2=qo,c2=Fa,rh="Portal",za=h.forwardRef((e,t)=>{var a;const{container:n,...r}=e,[o,i]=h.useState(!1);po(()=>i(!0),[]);const s=n||o&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?Ud.createPortal(g.jsx(Se.div,{...r,ref:t}),s):null});za.displayName=rh;const oh=1,ih=1e6;let Yr=0;function sh(){return Yr=(Yr+1)%Number.MAX_SAFE_INTEGER,Yr.toString()}const Wr=new Map,Ai=e=>{if(Wr.has(e))return;const t=setTimeout(()=>{Wr.delete(e),sn({type:"REMOVE_TOAST",toastId:e})},ih);Wr.set(e,t)},ah=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,oh)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Ai(n):e.toasts.forEach(r=>{Ai(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Gn=[];let Un={toasts:[]};function sn(e){Un=ah(Un,e),Gn.forEach(t=>{t(Un)})}function ch({...e}){const t=sh(),n=o=>sn({type:"UPDATE_TOAST",toast:{...o,id:t}}),r=()=>sn({type:"DISMISS_TOAST",toastId:t});return sn({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:o=>{o||r()}}}),{id:t,dismiss:r,update:n}}function u2(){const[e,t]=_e.useState(Un);return _e.useEffect(()=>(Gn.push(t),()=>{const n=Gn.indexOf(t);n>-1&&Gn.splice(n,1)}),[e]),{...e,toast:ch,dismiss:n=>sn({type:"DISMISS_TOAST",toastId:n})}}const uh={sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1400px"};function lh(e){const t=ff({query:`(min-width: ${uh[e]})`});return{[`is${e[0].toUpperCase()+e.substring(1)}`]:t}}const dh=h.createContext({openedTableInSidebar:void 0,selectedSidebarSection:"tables",openedRelationshipInSidebar:void 0,openRelationshipFromSidebar:Y,closeAllRelationshipsInSidebar:Y,openedDependencyInSidebar:void 0,openDependencyFromSidebar:Y,closeAllDependenciesInSidebar:Y,selectSidebarSection:Y,openTableFromSidebar:Y,closeAllTablesInSidebar:Y,isSidePanelShowed:!1,hideSidePanel:Y,showSidePanel:Y,toggleSidePanel:Y,isSelectSchemaOpen:!1,openSelectSchema:Y,closeSelectSchema:Y}),Ba=()=>h.useContext(dh);var Gr=0;function fh(){h.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Pi()),document.body.insertAdjacentElement("beforeend",e[1]??Pi()),Gr++,()=>{Gr===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Gr--}},[])}function Pi(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Kn="right-scroll-bar-position",qn="width-before-scroll-bar",hh="with-scroll-bars-hidden",mh="--removed-body-scroll-bar-size";function Ur(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function ph(e,t){var n=h.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=t,n.facade}var gh=typeof window<"u"?h.useLayoutEffect:h.useEffect,ji=new WeakMap;function yh(e,t){var n=ph(null,function(r){return e.forEach(function(o){return Ur(o,r)})});return gh(function(){var r=ji.get(n);if(r){var o=new Set(r),i=new Set(e),s=n.current;o.forEach(function(a){i.has(a)||Ur(a,null)}),i.forEach(function(a){o.has(a)||Ur(a,s)})}ji.set(n,e)},[e]),n}function xh(e){return e}function vh(e,t){t===void 0&&(t=xh);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var c=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return o}function wh(e){e===void 0&&(e={});var t=vh(null);return t.options=Ie({async:!0,ssr:!1},e),t}var Va=function(e){var t=e.sideCar,n=gr(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return h.createElement(r,Ie({},n))};Va.isSideCarExport=!0;function bh(e,t){return e.useMedium(t),Va}var Xa=wh(),Kr=function(){},vr=h.forwardRef(function(e,t){var n=h.useRef(null),r=h.useState({onScrollCapture:Kr,onWheelCapture:Kr,onTouchMoveCapture:Kr}),o=r[0],i=r[1],s=e.forwardProps,a=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,l=e.shards,f=e.sideCar,m=e.noIsolation,p=e.inert,y=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,_=e.gapMode,b=gr(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),x=f,M=yh([n,t]),j=Ie(Ie({},b),o);return h.createElement(h.Fragment,null,d&&h.createElement(x,{sideCar:Xa,removeScrollBar:u,shards:l,noIsolation:m,inert:p,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:_}),s?h.cloneElement(h.Children.only(a),Ie(Ie({},j),{ref:M})):h.createElement(v,Ie({},j,{className:c,ref:M}),a))});vr.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vr.classNames={fullWidth:qn,zeroRight:Kn};var Ch=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _h(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ch();return t&&e.setAttribute("nonce",t),e}function Eh(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Sh(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Mh=function(){var e=0,t=null;return{add:function(n){e==0&&(t=_h())&&(Eh(t,n),Sh(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Nh=function(){var e=Mh();return function(t,n){h.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Ya=function(){var e=Nh(),t=function(n){var r=n.styles,o=n.dynamic;return e(r,o),null};return t},Th={left:0,top:0,right:0,gap:0},qr=function(e){return parseInt(e||"",10)||0},kh=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],o=t[e==="padding"?"paddingRight":"marginRight"];return[qr(n),qr(r),qr(o)]},Rh=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Th;var t=kh(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Dh=Ya(),kt="data-scroll-locked",Ih=function(e,t,n,r){var o=e.left,i=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(hh,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(kt,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Kn,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(qn,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Kn," .").concat(Kn,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(qn," .").concat(qn,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(kt,`] {
    `).concat(mh,": ").concat(a,`px;
  }
`)},$i=function(){var e=parseInt(document.body.getAttribute(kt)||"0",10);return isFinite(e)?e:0},Ah=function(){h.useEffect(function(){return document.body.setAttribute(kt,($i()+1).toString()),function(){var e=$i()-1;e<=0?document.body.removeAttribute(kt):document.body.setAttribute(kt,e.toString())}},[])},Ph=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,o=r===void 0?"margin":r;Ah();var i=h.useMemo(function(){return Rh(o)},[o]);return h.createElement(Dh,{styles:Ih(i,!t,o,n?"":"!important")})},So=!1;if(typeof window<"u")try{var Dn=Object.defineProperty({},"passive",{get:function(){return So=!0,!0}});window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{So=!1}var _t=So?{passive:!1}:!1,jh=function(e){return e.tagName==="TEXTAREA"},Wa=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!jh(e)&&n[t]==="visible")},$h=function(e){return Wa(e,"overflowY")},Lh=function(e){return Wa(e,"overflowX")},Li=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=Ga(e,r);if(o){var i=Ua(e,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Oh=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Fh=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Ga=function(e,t){return e==="v"?$h(t):Lh(t)},Ua=function(e,t){return e==="v"?Oh(t):Fh(t)},Hh=function(e,t){return e==="h"&&t==="rtl"?-1:1},zh=function(e,t,n,r,o){var i=Hh(e,window.getComputedStyle(t).direction),s=i*r,a=n.target,c=t.contains(a),u=!1,d=s>0,l=0,f=0;do{var m=Ua(e,a),p=m[0],y=m[1],w=m[2],v=y-w-i*p;(p||v)&&Ga(e,a)&&(l+=v,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(d&&Math.abs(l)<1||!d&&Math.abs(f)<1)&&(u=!0),u},In=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Oi=function(e){return[e.deltaX,e.deltaY]},Fi=function(e){return e&&"current"in e?e.current:e},Bh=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Vh=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Xh=0,Et=[];function Yh(e){var t=h.useRef([]),n=h.useRef([0,0]),r=h.useRef(),o=h.useState(Xh++)[0],i=h.useState(Ya)[0],s=h.useRef(e);h.useEffect(function(){s.current=e},[e]),h.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(o));var y=Ko([e.lockRef.current],(e.shards||[]).map(Fi),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(o))})}}},[e.inert,e.lockRef.current,e.shards]);var a=h.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!s.current.allowPinchZoom;var v=In(y),_=n.current,b="deltaX"in y?y.deltaX:_[0]-v[0],x="deltaY"in y?y.deltaY:_[1]-v[1],M,j=y.target,E=Math.abs(b)>Math.abs(x)?"h":"v";if("touches"in y&&E==="h"&&j.type==="range")return!1;var N=Li(E,j);if(!N)return!0;if(N?M=E:(M=E==="v"?"h":"v",N=Li(E,j)),!N)return!1;if(!r.current&&"changedTouches"in y&&(b||x)&&(r.current=M),!M)return!0;var R=r.current||M;return zh(R,w,y,R==="h"?b:x)},[]),c=h.useCallback(function(y){var w=y;if(!(!Et.length||Et[Et.length-1]!==i)){var v="deltaY"in w?Oi(w):In(w),_=t.current.filter(function(M){return M.name===w.type&&(M.target===w.target||w.target===M.shadowParent)&&Bh(M.delta,v)})[0];if(_&&_.should){w.cancelable&&w.preventDefault();return}if(!_){var b=(s.current.shards||[]).map(Fi).filter(Boolean).filter(function(M){return M.contains(w.target)}),x=b.length>0?a(w,b[0]):!s.current.noIsolation;x&&w.cancelable&&w.preventDefault()}}},[]),u=h.useCallback(function(y,w,v,_){var b={name:y,delta:w,target:v,should:_,shadowParent:Wh(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(x){return x!==b})},1)},[]),d=h.useCallback(function(y){n.current=In(y),r.current=void 0},[]),l=h.useCallback(function(y){u(y.type,Oi(y),y.target,a(y,e.lockRef.current))},[]),f=h.useCallback(function(y){u(y.type,In(y),y.target,a(y,e.lockRef.current))},[]);h.useEffect(function(){return Et.push(i),e.setCallbacks({onScrollCapture:l,onWheelCapture:l,onTouchMoveCapture:f}),document.addEventListener("wheel",c,_t),document.addEventListener("touchmove",c,_t),document.addEventListener("touchstart",d,_t),function(){Et=Et.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,_t),document.removeEventListener("touchmove",c,_t),document.removeEventListener("touchstart",d,_t)}},[]);var m=e.removeScrollBar,p=e.inert;return h.createElement(h.Fragment,null,p?h.createElement(i,{styles:Vh(o)}):null,m?h.createElement(Ph,{gapMode:e.gapMode}):null)}function Wh(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Gh=bh(Xa,Yh);var Ka=h.forwardRef(function(e,t){return h.createElement(vr,Ie({},e,{ref:t,sideCar:Gh}))});Ka.classNames=vr.classNames;var Uh=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},St=new WeakMap,An=new WeakMap,Pn={},Zr=0,qa=function(e){return e&&(e.host||qa(e.parentNode))},Kh=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=qa(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},qh=function(e,t,n,r){var o=Kh(t,Array.isArray(e)?e:[e]);Pn[n]||(Pn[n]=new WeakMap);var i=Pn[n],s=[],a=new Set,c=new Set(o),u=function(l){!l||a.has(l)||(a.add(l),u(l.parentNode))};o.forEach(u);var d=function(l){!l||c.has(l)||Array.prototype.forEach.call(l.children,function(f){if(a.has(f))d(f);else try{var m=f.getAttribute(r),p=m!==null&&m!=="false",y=(St.get(f)||0)+1,w=(i.get(f)||0)+1;St.set(f,y),i.set(f,w),s.push(f),y===1&&p&&An.set(f,!0),w===1&&f.setAttribute(n,"true"),p||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return d(t),a.clear(),Zr++,function(){s.forEach(function(l){var f=St.get(l)-1,m=i.get(l)-1;St.set(l,f),i.set(l,m),f||(An.has(l)||l.removeAttribute(r),An.delete(l)),m||l.removeAttribute(n)}),Zr--,Zr||(St=new WeakMap,St=new WeakMap,An=new WeakMap,Pn={})}},Zh=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=Uh(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),qh(r,o,n,"aria-hidden")):function(){return null}},Qh=h.createContext(void 0);function Za(e){const t=h.useContext(Qh);return e||t||"ltr"}/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=Ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=Ce("ChevronsLeftRight",[["path",{d:"m9 7-5 5 5 5",key:"j5w590"}],["path",{d:"m15 7 5 5-5 5",key:"1bl6da"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=Ce("ChevronsRightLeft",[["path",{d:"m20 17-5-5 5-5",key:"30x0n2"}],["path",{d:"m4 17 5-5-5-5",key:"16spf4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=Ce("CircleDotDashed",[["path",{d:"M10.1 2.18a9.93 9.93 0 0 1 3.8 0",key:"1qdqn0"}],["path",{d:"M17.6 3.71a9.95 9.95 0 0 1 2.69 2.7",key:"1bq7p6"}],["path",{d:"M21.82 10.1a9.93 9.93 0 0 1 0 3.8",key:"1rlaqf"}],["path",{d:"M20.29 17.6a9.95 9.95 0 0 1-2.7 2.69",key:"1xk03u"}],["path",{d:"M13.9 21.82a9.94 9.94 0 0 1-3.8 0",key:"l7re25"}],["path",{d:"M6.4 20.29a9.95 9.95 0 0 1-2.69-2.7",key:"1v18p6"}],["path",{d:"M2.18 13.9a9.93 9.93 0 0 1 0-3.8",key:"xdo6bj"}],["path",{d:"M3.71 6.4a9.95 9.95 0 0 1 2.7-2.69",key:"1jjmaz"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=Ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=Ce("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Ce("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=Ce("MessageCircleMore",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=Ce("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=Ce("SquareDot",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Ce("SquareMinus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Ce("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Ce("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=Ce("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),lm=h.createContext({redoStack:[],undoStack:[],addRedoAction:Y,addUndoAction:Y,resetRedoStack:Y,resetUndoStack:Y,hasRedo:!1,hasUndo:!1}),dm=()=>h.useContext(lm),fm={[me.POSTGRESQL]:"public",[me.SQL_SERVER]:"dbo",[me.CLICKHOUSE]:"default"};var hm=function(){function e(){var t=this;this.subscriptions=new Set,this.emit=function(n){var r,o;try{for(var i=un(t.subscriptions),s=i.next();!s.done;s=i.next()){var a=s.value;a(n)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}},this.useSubscription=function(n){var r=h.useRef();r.current=n,h.useEffect(function(){function o(i){r.current&&r.current(i)}return t.subscriptions.add(o),function(){t.subscriptions.delete(o)}},[])}}return e}();function mm(){var e=h.useRef();return e.current||(e.current=new hm),e.current}const pm=h.createContext(void 0),tr=()=>{const e=h.useContext(pm);if(e===void 0)throw new Error("useDiff must be used within an DiffProvider");return e},d2=({children:e,diagram:t,readonly:n})=>{const{hasDiff:r}=tr();let o=gf();const i=mm(),{setSchemasFilter:s,schemasFilter:a}=hf(),{addUndoAction:c,resetRedoStack:u,resetUndoStack:d}=dm(),[l,f]=h.useState(""),[m,p]=h.useState(""),[y,w]=h.useState(new Date),[v,_]=h.useState(new Date),[b,x]=h.useState(me.GENERIC),[M,j]=h.useState(),[E,N]=h.useState((t==null?void 0:t.tables)??[]),[R,P]=h.useState((t==null?void 0:t.relationships)??[]),[$,L]=h.useState((t==null?void 0:t.dependencies)??[]),{events:F}=tr(),C=h.useCallback(T=>{const{tablesAdded:H,fieldsAdded:G,relationshipsAdded:W}=T.data;N(K=>[...K,...H??[]].map(se=>{const q=G.get(se.id);return q?{...se,fields:[...se.fields,...q]}:se})),P(K=>[...K,...W??[]])},[]);F.useSubscription(C);const D=fm[b],S=h.useMemo(()=>n??r??!1,[n,r]);S&&(o=xf);const I=h.useMemo(()=>yf.includes(b)?[...new Set(E.map(T=>T.schema).filter(T=>!!T))].sort((T,H)=>T===D?-1:T.localeCompare(H)).map(T=>({id:ia(T),name:T,tableCount:E.filter(H=>H.schema===T).length})):[],[E,D,b]),A=h.useCallback(T=>{s(H=>({...H,[l]:T}))},[l,s]),k=h.useMemo(()=>{var H,G;return I.length===0?void 0:((a[l]??[]).length===0?void 0:a[l])??[((H=I.find(W=>W.name===D))==null?void 0:H.id)??((G=I[0])==null?void 0:G.id)]},[a,l,I,D]),O=h.useMemo(()=>({id:l,name:m,createdAt:y,updatedAt:v,databaseType:b,databaseEdition:M,tables:E,relationships:R,dependencies:$}),[l,m,b,M,E,R,$,y,v]),z=h.useCallback(async()=>{const T=new Date;N([]),P([]),L([]),_(T),u(),d(),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:T}}),o.deleteDiagramTables(l),o.deleteDiagramRelationships(l),o.deleteDiagramDependencies(l)])},[o,l,u,d]),B=h.useCallback(async()=>{f(""),p(""),x(me.GENERIC),j(void 0),N([]),P([]),L([]),u(),d(),await Promise.all([o.deleteDiagramTables(l),o.deleteDiagramRelationships(l),o.deleteDiagram(l),o.deleteDiagramDependencies(l)])},[o,l,u,d]),ne=h.useCallback(async()=>{const T=new Date;_(T),await o.updateDiagram({id:l,attributes:{updatedAt:T}})},[o,l,_]),U=h.useCallback(async T=>{x(T),await o.updateDiagram({id:l,attributes:{databaseType:T}})},[o,l,x]),J=h.useCallback(async T=>{j(T),await o.updateDiagram({id:l,attributes:{databaseEdition:T}})},[o,l,j]),Z=h.useCallback(async T=>{const H=l;f(T),await o.updateDiagram({id:H,attributes:{id:T}})},[o,l,f]),X=h.useCallback(async(T,H={updateHistory:!0})=>{const G=m;p(T);const W=new Date;_(W),await o.updateDiagram({id:l,attributes:{name:T,updatedAt:W}}),H.updateHistory&&(c({action:"updateDiagramName",redoData:{name:T},undoData:{name:G}}),u())},[o,l,p,c,m,u]),V=h.useCallback(async(T,H={updateHistory:!0})=>{N(W=>[...W,...T]);const G=new Date;_(G),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:G}}),...T.map(W=>o.addTable({diagramId:l,table:W}))]),i.emit({action:"add_tables",data:{tables:T}}),H.updateHistory&&(c({action:"addTables",redoData:{tables:T},undoData:{tableIds:T.map(W=>W.id)}}),u())},[o,l,N,c,u,i]),ee=h.useCallback(async(T,H={updateHistory:!0})=>V([T],H),[V]),ie=h.useCallback(async T=>{const H={id:Ue(),name:`table_${E.length+1}`,x:0,y:0,fields:[{id:Ue(),name:"id",type:b===me.SQLITE?{id:"integer",name:"integer"}:{id:"bigint",name:"bigint"},unique:!0,nullable:!1,primaryKey:!0,createdAt:Date.now()}],indexes:[],color:oa(),createdAt:Date.now(),isView:!1,order:E.length,...T};return await ee(H),H},[ee,E,b]),Q=h.useCallback(T=>E.find(H=>H.id===T)??null,[E]),te=h.useCallback(async(T,H)=>{const G=T.map(q=>Q(q)).filter(q=>!!q),W=R.filter(q=>T.includes(q.sourceTableId)||T.includes(q.targetTableId)),K=$.filter(q=>T.includes(q.tableId)||T.includes(q.dependentTableId));P(q=>q.filter(ue=>!W.some(ce=>ce.id===ue.id))),L(q=>q.filter(ue=>!K.some(ce=>ce.id===ue.id))),N(q=>q.filter(ue=>!T.includes(ue.id))),i.emit({action:"remove_tables",data:{tableIds:T}});const se=new Date;_(se),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:se}}),...W.map(q=>o.deleteRelationship({diagramId:l,id:q.id})),...K.map(q=>o.deleteDependency({diagramId:l,id:q.id})),...T.map(q=>o.deleteTable({diagramId:l,id:q}))]),G.length>0&&(H!=null&&H.updateHistory)&&(c({action:"removeTables",redoData:{tableIds:T},undoData:{tables:G,relationships:W,dependencies:K}}),u())},[o,l,N,c,u,Q,R,i,$]),ae=h.useCallback(async(T,H={updateHistory:!0})=>te([T],H),[te]),fe=h.useCallback(async(T,H,G={updateHistory:!0})=>{const W=Q(T);N(se=>se.map(q=>q.id===T?{...q,...H}:q)),i.emit({action:"update_table",data:{id:T,table:H}});const K=new Date;_(K),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:K}}),o.updateTable({id:T,attributes:H})]),W&&G.updateHistory&&(c({action:"updateTable",redoData:{tableId:T,table:H},undoData:{tableId:T,table:W}}),u())},[o,N,c,u,Q,l,i]),ye=h.useCallback(async(T,H={updateHistory:!0,forceOverride:!1})=>{const G=he=>{const be=T(he);return H.forceOverride?be:he.map(Pe=>{const Ct=be.find(Vr=>Vr.id===Pe.id);return Ct?{...Pe,...Ct}:Pe}).filter(Pe=>be.some(Ct=>Ct.id===Pe.id))},W=go(E),K=G(E),se=W.filter(he=>!K.some(be=>be.id===he.id)),q=R.filter(he=>se.some(be=>be.id===he.sourceTableId||be.id===he.targetTableId)),ue=$.filter(he=>se.some(be=>be.id===he.tableId||be.id===he.dependentTableId));P(he=>he.filter(be=>!q.some(Pe=>Pe.id===be.id))),L(he=>he.filter(be=>!ue.some(Pe=>Pe.id===be.id))),N(G),i.emit({action:"remove_tables",data:{tableIds:se.map(he=>he.id)}});const ce=[];for(const he of K)ce.push(o.putTable({diagramId:l,table:he}));for(const he of se)ce.push(o.deleteTable({diagramId:l,id:he.id}));for(const he of q)ce.push(o.deleteRelationship({diagramId:l,id:he.id}));for(const he of ue)ce.push(o.deleteDependency({diagramId:l,id:he.id}));const we=new Date;_(we),ce.push(o.updateDiagram({id:l,attributes:{updatedAt:we}})),await Promise.all(ce),H.updateHistory&&(c({action:"updateTablesState",redoData:{tables:K},undoData:{tables:W,relationships:q,dependencies:ue}}),u())},[o,E,N,l,c,u,R,i,$]),ve=h.useCallback((T,H)=>{const G=Q(T);return(G==null?void 0:G.fields.find(W=>W.id===H))??null},[Q]),ct=h.useCallback(async(T,H,G,W={updateHistory:!0})=>{const K=ve(T,H);N(ue=>ue.map(ce=>ce.id===T?{...ce,fields:ce.fields.map(we=>we.id===H?{...we,...G}:we)}:ce));const se=await o.getTable({diagramId:l,id:T});if(!se)return;const q=new Date;_(q),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:q}}),o.updateTable({id:T,attributes:{...se,fields:se.fields.map(ue=>ue.id===H?{...ue,...G}:ue)}})]),K&&W.updateHistory&&(c({action:"updateField",redoData:{tableId:T,fieldId:H,field:{...K,...G}},undoData:{tableId:T,fieldId:H,field:K}}),u())},[o,l,N,c,u,ve]),ut=h.useCallback(async(T,H,G={updateHistory:!0})=>{var ue;const W=((ue=Q(T))==null?void 0:ue.fields)??[],K=ve(T,H);N(ce=>ce.map(we=>we.id===T?{...we,fields:we.fields.filter(he=>he.id!==H)}:we)),i.emit({action:"remove_field",data:{tableId:T,fieldId:H,fields:W.filter(ce=>ce.id!==H)}});const se=await o.getTable({diagramId:l,id:T});if(!se)return;const q=new Date;_(q),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:q}}),o.updateTable({id:T,attributes:{...se,fields:se.fields.filter(ce=>ce.id!==H)}})]),K&&G.updateHistory&&(c({action:"removeField",redoData:{tableId:T,fieldId:H},undoData:{tableId:T,field:K}}),u())},[o,l,N,c,u,ve,Q,i]),De=h.useCallback(async(T,H,G={updateHistory:!0})=>{var q;const W=((q=Q(T))==null?void 0:q.fields)??[];N(ue=>ue.map(ce=>ce.id===T?{...ce,fields:[...ce.fields,H]}:ce)),i.emit({action:"add_field",data:{tableId:T,field:H,fields:[...W,H]}});const K=await o.getTable({diagramId:l,id:T});if(!K)return;const se=new Date;_(se),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:se}}),o.updateTable({id:T,attributes:{...K,fields:[...K.fields,H]}})]),G.updateHistory&&(c({action:"addField",redoData:{tableId:T,field:H},undoData:{tableId:T,fieldId:H.id}}),u())},[o,l,N,c,u,i,Q]),lt=h.useCallback(async T=>{var W;const H=Q(T),G={id:Ue(),name:`field_${(((W=H==null?void 0:H.fields)==null?void 0:W.length)??0)+1}`,type:b===me.SQLITE?{id:"integer",name:"integer"}:{id:"bigint",name:"bigint"},unique:!1,nullable:!0,primaryKey:!1,createdAt:Date.now()};return await De(T,G),G},[De,Q,b]),Xe=h.useCallback((T,H)=>{const G=Q(T);return(G==null?void 0:G.indexes.find(W=>W.id===H))??null},[Q]),Ye=h.useCallback(async(T,H,G={updateHistory:!0})=>{N(se=>se.map(q=>q.id===T?{...q,indexes:[...q.indexes,H]}:q));const W=await o.getTable({diagramId:l,id:T});if(!W)return;const K=new Date;_(K),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:K}}),o.updateTable({id:T,attributes:{...W,indexes:[...W.indexes,H]}})]),G.updateHistory&&(c({action:"addIndex",redoData:{tableId:T,index:H},undoData:{tableId:T,indexId:H.id}}),u())},[o,l,N,c,u]),dt=h.useCallback(async(T,H,G={updateHistory:!0})=>{const W=Xe(T,H);N(q=>q.map(ue=>ue.id===T?{...ue,indexes:ue.indexes.filter(ce=>ce.id!==H)}:ue));const K=await o.getTable({diagramId:l,id:T});if(!K)return;const se=new Date;_(se),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:se}}),o.updateTable({id:T,attributes:{...K,indexes:K.indexes.filter(q=>q.id!==H)}})]),W&&G.updateHistory&&(c({action:"removeIndex",redoData:{indexId:H,tableId:T},undoData:{tableId:T,index:W}}),u())},[o,l,N,c,u,Xe]),zt=h.useCallback(async T=>{var W;const H=Q(T),G={id:Ue(),name:`index_${(((W=H==null?void 0:H.indexes)==null?void 0:W.length)??0)+1}`,fieldIds:[],unique:!1,createdAt:Date.now()};return await Ye(T,G),G},[Ye,Q]),ft=h.useCallback(async(T,H,G,W={updateHistory:!0})=>{const K=Xe(T,H);N(ue=>ue.map(ce=>ce.id===T?{...ce,indexes:ce.indexes.map(we=>we.id===H?{...we,...G}:we)}:ce));const se=await o.getTable({diagramId:l,id:T});if(!se)return;const q=new Date;_(q),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:q}}),o.updateTable({id:T,attributes:{...se,indexes:se.indexes.map(ue=>ue.id===H?{...ue,...G}:ue)}})]),K&&W.updateHistory&&(c({action:"updateIndex",redoData:{tableId:T,indexId:H,index:G},undoData:{tableId:T,indexId:H,index:K}}),u())},[o,l,N,c,u,Xe]),We=h.useCallback(async(T,H={updateHistory:!0})=>{P(W=>[...W,...T]);const G=new Date;_(G),await Promise.all([...T.map(W=>o.addRelationship({diagramId:l,relationship:W})),o.updateDiagram({id:l,attributes:{updatedAt:G}})]),H.updateHistory&&(c({action:"addRelationships",redoData:{relationships:T},undoData:{relationshipIds:T.map(W=>W.id)}}),u())},[o,l,P,c,u]),et=h.useCallback(async(T,H={updateHistory:!0})=>We([T],H),[We]),$r=h.useCallback(async({sourceTableId:T,targetTableId:H,sourceFieldId:G,targetFieldId:W})=>{const K=Q(T),se=(K==null?void 0:K.name)??"",q=K==null?void 0:K.fields.find(we=>we.id===G),ue=(q==null?void 0:q.name)??"",ce={id:Ue(),name:`${se}_${ue}_fk`,sourceSchema:K==null?void 0:K.schema,sourceTableId:T,targetSchema:K==null?void 0:K.schema,targetTableId:H,sourceFieldId:G,targetFieldId:W,sourceCardinality:"one",targetCardinality:"one",createdAt:Date.now()};return await et(ce),ce},[et,Q]),ht=h.useCallback(T=>R.find(H=>H.id===T)??null,[R]),Bt=h.useCallback(async(T,H={updateHistory:!0})=>{const G=[...R.filter(K=>T.includes(K.id))];P(K=>K.filter(se=>!T.includes(se.id)));const W=new Date;_(W),await Promise.all([...T.map(K=>o.deleteRelationship({diagramId:l,id:K})),o.updateDiagram({id:l,attributes:{updatedAt:W}})]),G.length>0&&H.updateHistory&&(c({action:"removeRelationships",redoData:{relationshipsIds:T},undoData:{relationships:G}}),u())},[o,l,P,R,c,u]),Lr=h.useCallback(async(T,H={updateHistory:!0})=>Bt([T],H),[Bt]),Or=h.useCallback(async(T,H,G={updateHistory:!0})=>{const W=ht(T);P(se=>se.map(q=>q.id===T?{...q,...H}:q));const K=new Date;_(K),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:K}}),o.updateRelationship({id:T,attributes:H})]),W&&G.updateHistory&&(c({action:"updateRelationship",redoData:{relationshipId:T,relationship:H},undoData:{relationshipId:T,relationship:W}}),u())},[o,P,c,ht,u,l]),Vt=h.useCallback(async(T,H={updateHistory:!0})=>{L(W=>[...W,...T]);const G=new Date;_(G),await Promise.all([...T.map(W=>o.addDependency({diagramId:l,dependency:W})),o.updateDiagram({id:l,attributes:{updatedAt:G}})]),H.updateHistory&&(c({action:"addDependencies",redoData:{dependencies:T},undoData:{dependenciesIds:T.map(W=>W.id)}}),u())},[o,l,L,c,u]),Xt=h.useCallback(async(T,H={updateHistory:!0})=>Vt([T],H),[Vt]),Fr=h.useCallback(async({tableId:T,dependentTableId:H})=>{const G=Q(T),W=Q(H),K={id:Ue(),tableId:T,dependentTableId:H,dependentSchema:W==null?void 0:W.schema,schema:G==null?void 0:G.schema,createdAt:Date.now()};return await Xt(K),K},[Xt,Q]),Yt=h.useCallback(T=>$.find(H=>H.id===T)??null,[$]),Wt=h.useCallback(async(T,H={updateHistory:!0})=>{const G=[...$.filter(K=>T.includes(K.id))];L(K=>K.filter(se=>!T.includes(se.id)));const W=new Date;_(W),await Promise.all([...T.map(K=>o.deleteDependency({diagramId:l,id:K})),o.updateDiagram({id:l,attributes:{updatedAt:W}})]),G.length>0&&H.updateHistory&&(c({action:"removeDependencies",redoData:{dependenciesIds:T},undoData:{dependencies:G}}),u())},[o,l,L,c,u,$]),Hr=h.useCallback(async(T,H={updateHistory:!0})=>Wt([T],H),[Wt]),zr=h.useCallback(async(T,H,G={updateHistory:!0})=>{const W=Yt(T);L(se=>se.map(q=>q.id===T?{...q,...H}:q));const K=new Date;_(K),await Promise.all([o.updateDiagram({id:l,attributes:{updatedAt:K}}),o.updateDependency({id:T,attributes:H})]),W&&G.updateHistory&&(c({action:"updateDependency",redoData:{dependencyId:T,dependency:H},undoData:{dependencyId:T,dependency:W}}),u())},[o,l,L,c,u,Yt]),Gt=h.useCallback(async T=>{f(T.id),p(T.name),x(T.databaseType),j(T.databaseEdition),N((T==null?void 0:T.tables)??[]),P((T==null?void 0:T.relationships)??[]),L((T==null?void 0:T.dependencies)??[]),w(T.createdAt),_(T.updatedAt),i.emit({action:"load_diagram",data:{diagram:T}})},[f,p,x,j,N,P,L,w,_,i]),Br=h.useCallback(async T=>{const H=await o.getDiagram(T,{includeRelationships:!0,includeTables:!0,includeDependencies:!0});return H&&Gt(H),H},[o,Gt]);return g.jsx($a.Provider,{value:{diagramId:l,diagramName:m,databaseType:b,tables:E,relationships:R,dependencies:$,currentDiagram:O,schemas:I,filteredSchemas:k,events:i,readonly:S,filterSchemas:A,updateDiagramId:Z,updateDiagramName:X,loadDiagram:Br,loadDiagramFromData:Gt,updateDatabaseType:U,updateDatabaseEdition:J,clearDiagramData:z,deleteDiagram:B,updateDiagramUpdatedAt:ne,createTable:ie,addTable:ee,addTables:V,getTable:Q,removeTable:ae,removeTables:te,updateTable:fe,updateTablesState:ye,updateField:ct,removeField:ut,createField:lt,addField:De,addIndex:Ye,createIndex:zt,removeIndex:dt,getField:ve,getIndex:Xe,updateIndex:ft,addRelationship:et,addRelationships:We,createRelationship:$r,getRelationship:ht,removeRelationship:Lr,removeRelationships:Bt,updateRelationship:Or,addDependency:Xt,addDependencies:Vt,createDependency:Fr,getDependency:Yt,removeDependency:Hr,removeDependencies:Wt,updateDependency:zr},children:e})},gm=h.createContext({undo:Y,redo:Y,hasUndo:!1,hasRedo:!1});function xe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=xe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ym={value:()=>{}};function wr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Zn(n)}function Zn(e){this._=e}function xm(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Zn.prototype=wr.prototype={constructor:Zn,on:function(e,t){var n=this._,r=xm(e+"",n),o,i=-1,s=r.length;if(arguments.length<2){for(;++i<s;)if((o=(e=r[i]).type)&&(o=vm(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(o=(e=r[i]).type)n[o]=Hi(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Hi(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zn(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function vm(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Hi(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=ym,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Mo="http://www.w3.org/1999/xhtml";const zi={svg:"http://www.w3.org/2000/svg",xhtml:Mo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function br(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),zi.hasOwnProperty(t)?{space:zi[t],local:e}:e}function wm(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Mo&&t.documentElement.namespaceURI===Mo?t.createElement(e):t.createElementNS(n,e)}}function bm(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rc(e){var t=br(e);return(t.local?bm:wm)(t)}function Cm(){}function Zo(e){return e==null?Cm:function(){return this.querySelector(e)}}function _m(e){typeof e!="function"&&(e=Zo(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=new Array(s),c,u,d=0;d<s;++d)(c=i[d])&&(u=e.call(c,c.__data__,d,i))&&("__data__"in c&&(u.__data__=c.__data__),a[d]=u);return new Re(r,this._parents)}function Em(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Sm(){return[]}function oc(e){return e==null?Sm:function(){return this.querySelectorAll(e)}}function Mm(e){return function(){return Em(e.apply(this,arguments))}}function Nm(e){typeof e=="function"?e=Mm(e):e=oc(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var s=t[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(r.push(e.call(c,c.__data__,u,s)),o.push(c));return new Re(r,o)}function ic(e){return function(){return this.matches(e)}}function sc(e){return function(t){return t.matches(e)}}var Tm=Array.prototype.find;function km(e){return function(){return Tm.call(this.children,e)}}function Rm(){return this.firstElementChild}function Dm(e){return this.select(e==null?Rm:km(typeof e=="function"?e:sc(e)))}var Im=Array.prototype.filter;function Am(){return Array.from(this.children)}function Pm(e){return function(){return Im.call(this.children,e)}}function jm(e){return this.selectAll(e==null?Am:Pm(typeof e=="function"?e:sc(e)))}function $m(e){typeof e!="function"&&(e=ic(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Re(r,this._parents)}function ac(e){return new Array(e.length)}function Lm(){return new Re(this._enter||this._groups.map(ac),this._parents)}function nr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}nr.prototype={constructor:nr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Om(e){return function(){return e}}function Fm(e,t,n,r,o,i){for(var s=0,a,c=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],r[s]=a):n[s]=new nr(e,i[s]);for(;s<c;++s)(a=t[s])&&(o[s]=a)}function Hm(e,t,n,r,o,i,s){var a,c,u=new Map,d=t.length,l=i.length,f=new Array(d),m;for(a=0;a<d;++a)(c=t[a])&&(f[a]=m=s.call(c,c.__data__,a,t)+"",u.has(m)?o[a]=c:u.set(m,c));for(a=0;a<l;++a)m=s.call(e,i[a],a,i)+"",(c=u.get(m))?(r[a]=c,c.__data__=i[a],u.delete(m)):n[a]=new nr(e,i[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(f[a])===c&&(o[a]=c)}function zm(e){return e.__data__}function Bm(e,t){if(!arguments.length)return Array.from(this,zm);var n=t?Hm:Fm,r=this._parents,o=this._groups;typeof e!="function"&&(e=Om(e));for(var i=o.length,s=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var d=r[u],l=o[u],f=l.length,m=Vm(e.call(d,d&&d.__data__,u,r)),p=m.length,y=a[u]=new Array(p),w=s[u]=new Array(p),v=c[u]=new Array(f);n(d,l,y,w,v,m,t);for(var _=0,b=0,x,M;_<p;++_)if(x=y[_]){for(_>=b&&(b=_+1);!(M=w[b])&&++b<p;);x._next=M||null}}return s=new Re(s,r),s._enter=a,s._exit=c,s}function Vm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xm(){return new Re(this._exit||this._groups.map(ac),this._parents)}function Ym(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Wm(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,s=Math.min(o,i),a=new Array(o),c=0;c<s;++c)for(var u=n[c],d=r[c],l=u.length,f=a[c]=new Array(l),m,p=0;p<l;++p)(m=u[p]||d[p])&&(f[p]=m);for(;c<o;++c)a[c]=n[c];return new Re(a,this._parents)}function Gm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],s;--o>=0;)(s=r[o])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function Um(e){e||(e=Km);function t(l,f){return l&&f?e(l.__data__,f.__data__):!l-!f}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var s=n[i],a=s.length,c=o[i]=new Array(a),u,d=0;d<a;++d)(u=s[d])&&(c[d]=u);c.sort(t)}return new Re(o,this._parents).order()}function Km(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zm(){return Array.from(this)}function Qm(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var s=r[o];if(s)return s}return null}function Jm(){let e=0;for(const t of this)++e;return e}function ep(){return!this.node()}function tp(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,s=o.length,a;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this}function np(e){return function(){this.removeAttribute(e)}}function rp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function op(e,t){return function(){this.setAttribute(e,t)}}function ip(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function sp(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ap(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cp(e,t){var n=br(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?rp:np:typeof t=="function"?n.local?ap:sp:n.local?ip:op)(n,t))}function cc(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function up(e){return function(){this.style.removeProperty(e)}}function lp(e,t,n){return function(){this.style.setProperty(e,t,n)}}function dp(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function fp(e,t,n){return arguments.length>1?this.each((t==null?up:typeof t=="function"?dp:lp)(e,t,n??"")):Pt(this.node(),e)}function Pt(e,t){return e.style.getPropertyValue(t)||cc(e).getComputedStyle(e,null).getPropertyValue(t)}function hp(e){return function(){delete this[e]}}function mp(e,t){return function(){this[e]=t}}function pp(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function gp(e,t){return arguments.length>1?this.each((t==null?hp:typeof t=="function"?pp:mp)(e,t)):this.node()[e]}function uc(e){return e.trim().split(/^|\s+/)}function Qo(e){return e.classList||new lc(e)}function lc(e){this._node=e,this._names=uc(e.getAttribute("class")||"")}lc.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function dc(e,t){for(var n=Qo(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function fc(e,t){for(var n=Qo(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function yp(e){return function(){dc(this,e)}}function xp(e){return function(){fc(this,e)}}function vp(e,t){return function(){(t.apply(this,arguments)?dc:fc)(this,e)}}function wp(e,t){var n=uc(e+"");if(arguments.length<2){for(var r=Qo(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?vp:t?yp:xp)(n,t))}function bp(){this.textContent=""}function Cp(e){return function(){this.textContent=e}}function _p(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ep(e){return arguments.length?this.each(e==null?bp:(typeof e=="function"?_p:Cp)(e)):this.node().textContent}function Sp(){this.innerHTML=""}function Mp(e){return function(){this.innerHTML=e}}function Np(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Tp(e){return arguments.length?this.each(e==null?Sp:(typeof e=="function"?Np:Mp)(e)):this.node().innerHTML}function kp(){this.nextSibling&&this.parentNode.appendChild(this)}function Rp(){return this.each(kp)}function Dp(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ip(){return this.each(Dp)}function Ap(e){var t=typeof e=="function"?e:rc(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Pp(){return null}function jp(e,t){var n=typeof e=="function"?e:rc(e),r=t==null?Pp:typeof t=="function"?t:Zo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function $p(){var e=this.parentNode;e&&e.removeChild(this)}function Lp(){return this.each($p)}function Op(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fp(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Hp(e){return this.select(e?Fp:Op)}function zp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Bp(e){return function(t){e.call(this,t,this.__data__)}}function Vp(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Xp(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Yp(e,t,n){return function(){var r=this.__on,o,i=Bp(t);if(r){for(var s=0,a=r.length;s<a;++s)if((o=r[s]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Wp(e,t,n){var r=Vp(e+""),o,i=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,d;c<u;++c)for(o=0,d=a[c];o<i;++o)if((s=r[o]).type===d.type&&s.name===d.name)return d.value}return}for(a=t?Yp:Xp,o=0;o<i;++o)this.each(a(r[o],t,n));return this}function hc(e,t,n){var r=cc(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Gp(e,t){return function(){return hc(this,e,t)}}function Up(e,t){return function(){return hc(this,e,t.apply(this,arguments))}}function Kp(e,t){return this.each((typeof t=="function"?Up:Gp)(e,t))}function*qp(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,s;o<i;++o)(s=r[o])&&(yield s)}var mc=[null];function Re(e,t){this._groups=e,this._parents=t}function _n(){return new Re([[document.documentElement]],mc)}function Zp(){return this}Re.prototype=_n.prototype={constructor:Re,select:_m,selectAll:Nm,selectChild:Dm,selectChildren:jm,filter:$m,data:Bm,enter:Lm,exit:Xm,join:Ym,merge:Wm,selection:Zp,order:Gm,sort:Um,call:qm,nodes:Zm,node:Qm,size:Jm,empty:ep,each:tp,attr:cp,style:fp,property:gp,classed:wp,text:Ep,html:Tp,raise:Rp,lower:Ip,append:Ap,insert:jp,remove:Lp,clone:Hp,datum:zp,on:Wp,dispatch:Kp,[Symbol.iterator]:qp};function Te(e){return typeof e=="string"?new Re([[document.querySelector(e)]],[document.documentElement]):new Re([[e]],mc)}function Qp(e){let t;for(;t=e.sourceEvent;)e=t;return e}function je(e,t){if(e=Qp(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Jp={passive:!1},ln={capture:!0,passive:!1};function Qr(e){e.stopImmediatePropagation()}function Rt(e){e.preventDefault(),e.stopImmediatePropagation()}function pc(e){var t=e.document.documentElement,n=Te(e).on("dragstart.drag",Rt,ln);"onselectstart"in t?n.on("selectstart.drag",Rt,ln):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function gc(e,t){var n=e.document.documentElement,r=Te(e).on("dragstart.drag",null);t&&(r.on("click.drag",Rt,ln),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const jn=e=>()=>e;function No(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:s,y:a,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}No.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function eg(e){return!e.ctrlKey&&!e.button}function tg(){return this.parentNode}function ng(e,t){return t??{x:e.x,y:e.y}}function rg(){return navigator.maxTouchPoints||"ontouchstart"in this}function yc(){var e=eg,t=tg,n=ng,r=rg,o={},i=wr("start","drag","end"),s=0,a,c,u,d,l=0;function f(x){x.on("mousedown.drag",m).filter(r).on("touchstart.drag",w).on("touchmove.drag",v,Jp).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(x,M){if(!(d||!e.call(this,x,M))){var j=b(this,t.call(this,x,M),x,M,"mouse");j&&(Te(x.view).on("mousemove.drag",p,ln).on("mouseup.drag",y,ln),pc(x.view),Qr(x),u=!1,a=x.clientX,c=x.clientY,j("start",x))}}function p(x){if(Rt(x),!u){var M=x.clientX-a,j=x.clientY-c;u=M*M+j*j>l}o.mouse("drag",x)}function y(x){Te(x.view).on("mousemove.drag mouseup.drag",null),gc(x.view,u),Rt(x),o.mouse("end",x)}function w(x,M){if(e.call(this,x,M)){var j=x.changedTouches,E=t.call(this,x,M),N=j.length,R,P;for(R=0;R<N;++R)(P=b(this,E,x,M,j[R].identifier,j[R]))&&(Qr(x),P("start",x,j[R]))}}function v(x){var M=x.changedTouches,j=M.length,E,N;for(E=0;E<j;++E)(N=o[M[E].identifier])&&(Rt(x),N("drag",x,M[E]))}function _(x){var M=x.changedTouches,j=M.length,E,N;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<j;++E)(N=o[M[E].identifier])&&(Qr(x),N("end",x,M[E]))}function b(x,M,j,E,N,R){var P=i.copy(),$=je(R||j,M),L,F,C;if((C=n.call(x,new No("beforestart",{sourceEvent:j,target:f,identifier:N,active:s,x:$[0],y:$[1],dx:0,dy:0,dispatch:P}),E))!=null)return L=C.x-$[0]||0,F=C.y-$[1]||0,function D(S,I,A){var k=$,O;switch(S){case"start":o[N]=D,O=s++;break;case"end":delete o[N],--s;case"drag":$=je(A||I,M),O=s;break}P.call(S,x,new No(S,{sourceEvent:I,subject:C,target:f,identifier:N,active:O,x:$[0]+L,y:$[1]+F,dx:$[0]-k[0],dy:$[1]-k[1],dispatch:P}),E)}}return f.filter=function(x){return arguments.length?(e=typeof x=="function"?x:jn(!!x),f):e},f.container=function(x){return arguments.length?(t=typeof x=="function"?x:jn(x),f):t},f.subject=function(x){return arguments.length?(n=typeof x=="function"?x:jn(x),f):n},f.touchable=function(x){return arguments.length?(r=typeof x=="function"?x:jn(!!x),f):r},f.on=function(){var x=i.on.apply(i,arguments);return x===i?f:x},f.clickDistance=function(x){return arguments.length?(l=(x=+x)*x,f):Math.sqrt(l)},f}function Jo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function En(){}var dn=.7,rr=1/dn,Dt="\\s*([+-]?\\d+)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",og=/^#([0-9a-f]{3,8})$/,ig=new RegExp(`^rgb\\(${Dt},${Dt},${Dt}\\)$`),sg=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),ag=new RegExp(`^rgba\\(${Dt},${Dt},${Dt},${fn}\\)$`),cg=new RegExp(`^rgba\\(${ze},${ze},${ze},${fn}\\)$`),ug=new RegExp(`^hsl\\(${fn},${ze},${ze}\\)$`),lg=new RegExp(`^hsla\\(${fn},${ze},${ze},${fn}\\)$`),Bi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jo(En,hn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vi,formatHex:Vi,formatHex8:dg,formatHsl:fg,formatRgb:Xi,toString:Xi});function Vi(){return this.rgb().formatHex()}function dg(){return this.rgb().formatHex8()}function fg(){return vc(this).formatHsl()}function Xi(){return this.rgb().formatRgb()}function hn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=og.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yi(t):n===3?new Ne(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?$n(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?$n(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ig.exec(e))?new Ne(t[1],t[2],t[3],1):(t=sg.exec(e))?new Ne(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ag.exec(e))?$n(t[1],t[2],t[3],t[4]):(t=cg.exec(e))?$n(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ug.exec(e))?Ui(t[1],t[2]/100,t[3]/100,1):(t=lg.exec(e))?Ui(t[1],t[2]/100,t[3]/100,t[4]):Bi.hasOwnProperty(e)?Yi(Bi[e]):e==="transparent"?new Ne(NaN,NaN,NaN,0):null}function Yi(e){return new Ne(e>>16&255,e>>8&255,e&255,1)}function $n(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ne(e,t,n,r)}function hg(e){return e instanceof En||(e=hn(e)),e?(e=e.rgb(),new Ne(e.r,e.g,e.b,e.opacity)):new Ne}function To(e,t,n,r){return arguments.length===1?hg(e):new Ne(e,t,n,r??1)}function Ne(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Jo(Ne,To,xc(En,{brighter(e){return e=e==null?rr:Math.pow(rr,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dn:Math.pow(dn,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ne(yt(this.r),yt(this.g),yt(this.b),or(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wi,formatHex:Wi,formatHex8:mg,formatRgb:Gi,toString:Gi}));function Wi(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}`}function mg(){return`#${pt(this.r)}${pt(this.g)}${pt(this.b)}${pt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gi(){const e=or(this.opacity);return`${e===1?"rgb(":"rgba("}${yt(this.r)}, ${yt(this.g)}, ${yt(this.b)}${e===1?")":`, ${e})`}`}function or(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pt(e){return e=yt(e),(e<16?"0":"")+e.toString(16)}function Ui(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $e(e,t,n,r)}function vc(e){if(e instanceof $e)return new $e(e.h,e.s,e.l,e.opacity);if(e instanceof En||(e=hn(e)),!e)return new $e;if(e instanceof $e)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),s=NaN,a=i-o,c=(i+o)/2;return a?(t===i?s=(n-r)/a+(n<r)*6:n===i?s=(r-t)/a+2:s=(t-n)/a+4,a/=c<.5?i+o:2-i-o,s*=60):a=c>0&&c<1?0:s,new $e(s,a,c,e.opacity)}function pg(e,t,n,r){return arguments.length===1?vc(e):new $e(e,t,n,r??1)}function $e(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Jo($e,pg,xc(En,{brighter(e){return e=e==null?rr:Math.pow(rr,e),new $e(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dn:Math.pow(dn,e),new $e(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ne(Jr(e>=240?e-240:e+120,o,r),Jr(e,o,r),Jr(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new $e(Ki(this.h),Ln(this.s),Ln(this.l),or(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=or(this.opacity);return`${e===1?"hsl(":"hsla("}${Ki(this.h)}, ${Ln(this.s)*100}%, ${Ln(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ki(e){return e=(e||0)%360,e<0?e+360:e}function Ln(e){return Math.max(0,Math.min(1,e||0))}function Jr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const wc=e=>()=>e;function gg(e,t){return function(n){return e+n*t}}function yg(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function xg(e){return(e=+e)==1?bc:function(t,n){return n-t?yg(t,n,e):wc(isNaN(t)?n:t)}}function bc(e,t){var n=t-e;return n?gg(e,n):wc(isNaN(e)?t:e)}const qi=function e(t){var n=xg(t);function r(o,i){var s=n((o=To(o)).r,(i=To(i)).r),a=n(o.g,i.g),c=n(o.b,i.b),u=bc(o.opacity,i.opacity);return function(d){return o.r=s(d),o.g=a(d),o.b=c(d),o.opacity=u(d),o+""}}return r.gamma=e,r}(1);function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var ko=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eo=new RegExp(ko.source,"g");function vg(e){return function(){return e}}function wg(e){return function(t){return e(t)+""}}function bg(e,t){var n=ko.lastIndex=eo.lastIndex=0,r,o,i,s=-1,a=[],c=[];for(e=e+"",t=t+"";(r=ko.exec(e))&&(o=eo.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(r=r[0])===(o=o[0])?a[s]?a[s]+=o:a[++s]=o:(a[++s]=null,c.push({i:s,x:ot(r,o)})),n=eo.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?wg(c[0].x):vg(t):(t=c.length,function(u){for(var d=0,l;d<t;++d)a[(l=c[d]).i]=l.x(u);return a.join("")})}var Zi=180/Math.PI,Ro={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cc(e,t,n,r,o,i){var s,a,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Zi,skewX:Math.atan(c)*Zi,scaleX:s,scaleY:a}}var On;function Cg(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ro:Cc(t.a,t.b,t.c,t.d,t.e,t.f)}function _g(e){return e==null||(On||(On=document.createElementNS("http://www.w3.org/2000/svg","g")),On.setAttribute("transform",e),!(e=On.transform.baseVal.consolidate()))?Ro:(e=e.matrix,Cc(e.a,e.b,e.c,e.d,e.e,e.f))}function _c(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function i(u,d,l,f,m,p){if(u!==l||d!==f){var y=m.push("translate(",null,t,null,n);p.push({i:y-4,x:ot(u,l)},{i:y-2,x:ot(d,f)})}else(l||f)&&m.push("translate("+l+t+f+n)}function s(u,d,l,f){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),f.push({i:l.push(o(l)+"rotate(",null,r)-2,x:ot(u,d)})):d&&l.push(o(l)+"rotate("+d+r)}function a(u,d,l,f){u!==d?f.push({i:l.push(o(l)+"skewX(",null,r)-2,x:ot(u,d)}):d&&l.push(o(l)+"skewX("+d+r)}function c(u,d,l,f,m,p){if(u!==l||d!==f){var y=m.push(o(m)+"scale(",null,",",null,")");p.push({i:y-4,x:ot(u,l)},{i:y-2,x:ot(d,f)})}else(l!==1||f!==1)&&m.push(o(m)+"scale("+l+","+f+")")}return function(u,d){var l=[],f=[];return u=e(u),d=e(d),i(u.translateX,u.translateY,d.translateX,d.translateY,l,f),s(u.rotate,d.rotate,l,f),a(u.skewX,d.skewX,l,f),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,l,f),u=d=null,function(m){for(var p=-1,y=f.length,w;++p<y;)l[(w=f[p]).i]=w.x(m);return l.join("")}}}var Eg=_c(Cg,"px, ","px)","deg)"),Sg=_c(_g,", ",")",")"),Mg=1e-12;function Qi(e){return((e=Math.exp(e))+1/e)/2}function Ng(e){return((e=Math.exp(e))-1/e)/2}function Tg(e){return((e=Math.exp(2*e))-1)/(e+1)}const kg=function e(t,n,r){function o(i,s){var a=i[0],c=i[1],u=i[2],d=s[0],l=s[1],f=s[2],m=d-a,p=l-c,y=m*m+p*p,w,v;if(y<Mg)v=Math.log(f/u)/t,w=function(E){return[a+E*m,c+E*p,u*Math.exp(t*E*v)]};else{var _=Math.sqrt(y),b=(f*f-u*u+r*y)/(2*u*n*_),x=(f*f-u*u-r*y)/(2*f*n*_),M=Math.log(Math.sqrt(b*b+1)-b),j=Math.log(Math.sqrt(x*x+1)-x);v=(j-M)/t,w=function(E){var N=E*v,R=Qi(M),P=u/(n*_)*(R*Tg(t*N+M)-Ng(M));return[a+P*m,c+P*p,u*R/Qi(t*N+M)]}}return w.duration=v*1e3*t/Math.SQRT2,w}return o.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return e(s,a,c)},o}(Math.SQRT2,2,4);var jt=0,en=0,Kt=0,Ec=1e3,ir,tn,sr=0,vt=0,Cr=0,mn=typeof performance=="object"&&performance.now?performance:Date,Sc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ei(){return vt||(Sc(Rg),vt=mn.now()+Cr)}function Rg(){vt=0}function ar(){this._call=this._time=this._next=null}ar.prototype=Mc.prototype={constructor:ar,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ei():+n)+(t==null?0:+t),!this._next&&tn!==this&&(tn?tn._next=this:ir=this,tn=this),this._call=e,this._time=n,Do()},stop:function(){this._call&&(this._call=null,this._time=1/0,Do())}};function Mc(e,t,n){var r=new ar;return r.restart(e,t,n),r}function Dg(){ei(),++jt;for(var e=ir,t;e;)(t=vt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--jt}function Ji(){vt=(sr=mn.now())+Cr,jt=en=0;try{Dg()}finally{jt=0,Ag(),vt=0}}function Ig(){var e=mn.now(),t=e-sr;t>Ec&&(Cr-=t,sr=e)}function Ag(){for(var e,t=ir,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ir=n);tn=e,Do(r)}function Do(e){if(!jt){en&&(en=clearTimeout(en));var t=e-vt;t>24?(e<1/0&&(en=setTimeout(Ji,e-mn.now()-Cr)),Kt&&(Kt=clearInterval(Kt))):(Kt||(sr=mn.now(),Kt=setInterval(Ig,Ec)),jt=1,Sc(Ji))}}function es(e,t,n){var r=new ar;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Pg=wr("start","end","cancel","interrupt"),jg=[],Nc=0,ts=1,Io=2,Qn=3,ns=4,Ao=5,Jn=6;function _r(e,t,n,r,o,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;$g(e,n,{name:t,index:r,group:o,on:Pg,tween:jg,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Nc})}function ti(e,t){var n=He(e,t);if(n.state>Nc)throw new Error("too late; already scheduled");return n}function Ve(e,t){var n=He(e,t);if(n.state>Qn)throw new Error("too late; already running");return n}function He(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function $g(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Mc(i,0,n.time);function i(u){n.state=ts,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var d,l,f,m;if(n.state!==ts)return c();for(d in r)if(m=r[d],m.name===n.name){if(m.state===Qn)return es(s);m.state===ns?(m.state=Jn,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[d]):+d<t&&(m.state=Jn,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[d])}if(es(function(){n.state===Qn&&(n.state=ns,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Io,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Io){for(n.state=Qn,o=new Array(f=n.tween.length),d=0,l=-1;d<f;++d)(m=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(o[++l]=m);o.length=l+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Ao,1),l=-1,f=o.length;++l<f;)o[l].call(e,d);n.state===Ao&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Jn,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function er(e,t){var n=e.__transition,r,o,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){i=!1;continue}o=r.state>Io&&r.state<Ao,r.state=Jn,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}i&&delete e.__transition}}function Lg(e){return this.each(function(){er(this,e)})}function Og(e,t){var n,r;return function(){var o=Ve(this,e),i=o.tween;if(i!==n){r=n=i;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}o.tween=r}}function Fg(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=Ve(this,e),s=i.tween;if(s!==r){o=(r=s).slice();for(var a={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=a;break}c===u&&o.push(a)}i.tween=o}}function Hg(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=He(this.node(),n).tween,o=0,i=r.length,s;o<i;++o)if((s=r[o]).name===e)return s.value;return null}return this.each((t==null?Og:Fg)(n,e,t))}function ni(e,t,n){var r=e._id;return e.each(function(){var o=Ve(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return He(o,r).value[t]}}function Tc(e,t){var n;return(typeof t=="number"?ot:t instanceof hn?qi:(n=hn(t))?(t=n,qi):bg)(e,t)}function zg(e){return function(){this.removeAttribute(e)}}function Bg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttribute(e);return s===o?null:s===r?i:i=t(r=s,n)}}function Xg(e,t,n){var r,o=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===o?null:s===r?i:i=t(r=s,n)}}function Yg(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function Wg(e,t,n){var r,o,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),c=a+"",s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a)))}}function Gg(e,t){var n=br(e),r=n==="transform"?Sg:Tc;return this.attrTween(e,typeof t=="function"?(n.local?Wg:Yg)(n,r,ni(this,"attr."+e,t)):t==null?(n.local?Bg:zg)(n):(n.local?Xg:Vg)(n,r,t))}function Ug(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Kg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function qg(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Kg(e,i)),n}return o._value=t,o}function Zg(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Ug(e,i)),n}return o._value=t,o}function Qg(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=br(e);return this.tween(n,(r.local?qg:Zg)(r,t))}function Jg(e,t){return function(){ti(this,e).delay=+t.apply(this,arguments)}}function e0(e,t){return t=+t,function(){ti(this,e).delay=t}}function t0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jg:e0)(t,e)):He(this.node(),t).delay}function n0(e,t){return function(){Ve(this,e).duration=+t.apply(this,arguments)}}function r0(e,t){return t=+t,function(){Ve(this,e).duration=t}}function o0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?n0:r0)(t,e)):He(this.node(),t).duration}function i0(e,t){if(typeof t!="function")throw new Error;return function(){Ve(this,e).ease=t}}function s0(e){var t=this._id;return arguments.length?this.each(i0(t,e)):He(this.node(),t).ease}function a0(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ve(this,e).ease=n}}function c0(e){if(typeof e!="function")throw new Error;return this.each(a0(this._id,e))}function u0(e){typeof e!="function"&&(e=ic(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],s=i.length,a=r[o]=[],c,u=0;u<s;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Ze(r,this._parents,this._name,this._id)}function l0(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),s=new Array(r),a=0;a<i;++a)for(var c=t[a],u=n[a],d=c.length,l=s[a]=new Array(d),f,m=0;m<d;++m)(f=c[m]||u[m])&&(l[m]=f);for(;a<r;++a)s[a]=t[a];return new Ze(s,this._parents,this._name,this._id)}function d0(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function f0(e,t,n){var r,o,i=d0(t)?ti:Ve;return function(){var s=i(this,e),a=s.on;a!==r&&(o=(r=a).copy()).on(t,n),s.on=o}}function h0(e,t){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(e):this.each(f0(n,e,t))}function m0(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function p0(){return this.on("end.remove",m0(this._id))}function g0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Zo(e));for(var r=this._groups,o=r.length,i=new Array(o),s=0;s<o;++s)for(var a=r[s],c=a.length,u=i[s]=new Array(c),d,l,f=0;f<c;++f)(d=a[f])&&(l=e.call(d,d.__data__,f,a))&&("__data__"in d&&(l.__data__=d.__data__),u[f]=l,_r(u[f],t,n,f,u,He(d,n)));return new Ze(i,this._parents,t,n)}function y0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=oc(e));for(var r=this._groups,o=r.length,i=[],s=[],a=0;a<o;++a)for(var c=r[a],u=c.length,d,l=0;l<u;++l)if(d=c[l]){for(var f=e.call(d,d.__data__,l,c),m,p=He(d,n),y=0,w=f.length;y<w;++y)(m=f[y])&&_r(m,t,n,y,f,p);i.push(f),s.push(d)}return new Ze(i,s,t,n)}var x0=_n.prototype.constructor;function v0(){return new x0(this._groups,this._parents)}function w0(e,t){var n,r,o;return function(){var i=Pt(this,e),s=(this.style.removeProperty(e),Pt(this,e));return i===s?null:i===n&&s===r?o:o=t(n=i,r=s)}}function kc(e){return function(){this.style.removeProperty(e)}}function b0(e,t,n){var r,o=n+"",i;return function(){var s=Pt(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}function C0(e,t,n){var r,o,i;return function(){var s=Pt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Pt(this,e))),s===c?null:s===r&&c===o?i:(o=c,i=t(r=s,a))}}function _0(e,t){var n,r,o,i="style."+t,s="end."+i,a;return function(){var c=Ve(this,e),u=c.on,d=c.value[i]==null?a||(a=kc(t)):void 0;(u!==n||o!==d)&&(r=(n=u).copy()).on(s,o=d),c.on=r}}function E0(e,t,n){var r=(e+="")=="transform"?Eg:Tc;return t==null?this.styleTween(e,w0(e,r)).on("end.style."+e,kc(e)):typeof t=="function"?this.styleTween(e,C0(e,r,ni(this,"style."+e,t))).each(_0(this._id,e)):this.styleTween(e,b0(e,r,t),n).on("end.style."+e,null)}function S0(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function M0(e,t,n){var r,o;function i(){var s=t.apply(this,arguments);return s!==o&&(r=(o=s)&&S0(e,s,n)),r}return i._value=t,i}function N0(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,M0(e,t,n??""))}function T0(e){return function(){this.textContent=e}}function k0(e){return function(){var t=e(this);this.textContent=t??""}}function R0(e){return this.tween("text",typeof e=="function"?k0(ni(this,"text",e)):T0(e==null?"":e+""))}function D0(e){return function(t){this.textContent=e.call(this,t)}}function I0(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&D0(o)),t}return r._value=e,r}function A0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,I0(e))}function P0(){for(var e=this._name,t=this._id,n=Rc(),r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var d=He(c,t);_r(c,e,n,u,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ze(r,this._parents,e,n)}function j0(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--o===0&&i()}};n.each(function(){var u=Ve(this,r),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),o===0&&i()})}var $0=0;function Ze(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Rc(){return++$0}var Ge=_n.prototype;Ze.prototype={constructor:Ze,select:g0,selectAll:y0,selectChild:Ge.selectChild,selectChildren:Ge.selectChildren,filter:u0,merge:l0,selection:v0,transition:P0,call:Ge.call,nodes:Ge.nodes,node:Ge.node,size:Ge.size,empty:Ge.empty,each:Ge.each,on:h0,attr:Gg,attrTween:Qg,style:E0,styleTween:N0,text:R0,textTween:A0,remove:p0,tween:Hg,delay:t0,duration:o0,ease:s0,easeVarying:c0,end:j0,[Symbol.iterator]:Ge[Symbol.iterator]};function L0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var O0={time:null,delay:0,duration:250,ease:L0};function F0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function H0(e){var t,n;e instanceof Ze?(t=e._id,e=e._name):(t=Rc(),(n=O0).time=ei(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var s=r[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&_r(c,e,t,u,s,n||F0(c,t));return new Ze(r,this._parents,e,t)}_n.prototype.interrupt=Lg;_n.prototype.transition=H0;const Fn=e=>()=>e;function z0(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ke(e,t,n){this.k=e,this.x=t,this.y=n}Ke.prototype={constructor:Ke,scale:function(e){return e===1?this:new Ke(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ke(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Er=new Ke(1,0,0);Dc.prototype=Ke.prototype;function Dc(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Er;return e.__zoom}function to(e){e.stopImmediatePropagation()}function qt(e){e.preventDefault(),e.stopImmediatePropagation()}function B0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function V0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function rs(){return this.__zoom||Er}function X0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Y0(){return navigator.maxTouchPoints||"ontouchstart"in this}function W0(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function Ic(){var e=B0,t=V0,n=W0,r=X0,o=Y0,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=kg,u=wr("start","zoom","end"),d,l,f,m=500,p=150,y=0,w=10;function v(C){C.property("__zoom",rs).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",P).filter(o).on("touchstart.zoom",$).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(C,D,S,I){var A=C.selection?C.selection():C;A.property("__zoom",rs),C!==A?M(C,D,S,I):A.interrupt().each(function(){j(this,arguments).event(I).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},v.scaleBy=function(C,D,S,I){v.scaleTo(C,function(){var A=this.__zoom.k,k=typeof D=="function"?D.apply(this,arguments):D;return A*k},S,I)},v.scaleTo=function(C,D,S,I){v.transform(C,function(){var A=t.apply(this,arguments),k=this.__zoom,O=S==null?x(A):typeof S=="function"?S.apply(this,arguments):S,z=k.invert(O),B=typeof D=="function"?D.apply(this,arguments):D;return n(b(_(k,B),O,z),A,s)},S,I)},v.translateBy=function(C,D,S,I){v.transform(C,function(){return n(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),s)},null,I)},v.translateTo=function(C,D,S,I,A){v.transform(C,function(){var k=t.apply(this,arguments),O=this.__zoom,z=I==null?x(k):typeof I=="function"?I.apply(this,arguments):I;return n(Er.translate(z[0],z[1]).scale(O.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof S=="function"?-S.apply(this,arguments):-S),k,s)},I,A)};function _(C,D){return D=Math.max(i[0],Math.min(i[1],D)),D===C.k?C:new Ke(D,C.x,C.y)}function b(C,D,S){var I=D[0]-S[0]*C.k,A=D[1]-S[1]*C.k;return I===C.x&&A===C.y?C:new Ke(C.k,I,A)}function x(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function M(C,D,S,I){C.on("start.zoom",function(){j(this,arguments).event(I).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(I).end()}).tween("zoom",function(){var A=this,k=arguments,O=j(A,k).event(I),z=t.apply(A,k),B=S==null?x(z):typeof S=="function"?S.apply(A,k):S,ne=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),U=A.__zoom,J=typeof D=="function"?D.apply(A,k):D,Z=c(U.invert(B).concat(ne/U.k),J.invert(B).concat(ne/J.k));return function(X){if(X===1)X=J;else{var V=Z(X),ee=ne/V[2];X=new Ke(ee,B[0]-V[0]*ee,B[1]-V[1]*ee)}O.zoom(null,X)}})}function j(C,D,S){return!S&&C.__zooming||new E(C,D)}function E(C,D){this.that=C,this.args=D,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,D),this.taps=0}E.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,D){return this.mouse&&C!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var D=Te(this.that).datum();u.call(C,this.that,new z0(C,{sourceEvent:this.sourceEvent,target:v,transform:this.that.__zoom,dispatch:u}),D)}};function N(C,...D){if(!e.apply(this,arguments))return;var S=j(this,D).event(C),I=this.__zoom,A=Math.max(i[0],Math.min(i[1],I.k*Math.pow(2,r.apply(this,arguments)))),k=je(C);if(S.wheel)(S.mouse[0][0]!==k[0]||S.mouse[0][1]!==k[1])&&(S.mouse[1]=I.invert(S.mouse[0]=k)),clearTimeout(S.wheel);else{if(I.k===A)return;S.mouse=[k,I.invert(k)],er(this),S.start()}qt(C),S.wheel=setTimeout(O,p),S.zoom("mouse",n(b(_(I,A),S.mouse[0],S.mouse[1]),S.extent,s));function O(){S.wheel=null,S.end()}}function R(C,...D){if(f||!e.apply(this,arguments))return;var S=C.currentTarget,I=j(this,D,!0).event(C),A=Te(C.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",ne,!0),k=je(C,S),O=C.clientX,z=C.clientY;pc(C.view),to(C),I.mouse=[k,this.__zoom.invert(k)],er(this),I.start();function B(U){if(qt(U),!I.moved){var J=U.clientX-O,Z=U.clientY-z;I.moved=J*J+Z*Z>y}I.event(U).zoom("mouse",n(b(I.that.__zoom,I.mouse[0]=je(U,S),I.mouse[1]),I.extent,s))}function ne(U){A.on("mousemove.zoom mouseup.zoom",null),gc(U.view,I.moved),qt(U),I.event(U).end()}}function P(C,...D){if(e.apply(this,arguments)){var S=this.__zoom,I=je(C.changedTouches?C.changedTouches[0]:C,this),A=S.invert(I),k=S.k*(C.shiftKey?.5:2),O=n(b(_(S,k),I,A),t.apply(this,D),s);qt(C),a>0?Te(this).transition().duration(a).call(M,O,I,C):Te(this).call(v.transform,O,I,C)}}function $(C,...D){if(e.apply(this,arguments)){var S=C.touches,I=S.length,A=j(this,D,C.changedTouches.length===I).event(C),k,O,z,B;for(to(C),O=0;O<I;++O)z=S[O],B=je(z,this),B=[B,this.__zoom.invert(B),z.identifier],A.touch0?!A.touch1&&A.touch0[2]!==B[2]&&(A.touch1=B,A.taps=0):(A.touch0=B,k=!0,A.taps=1+!!d);d&&(d=clearTimeout(d)),k&&(A.taps<2&&(l=B[0],d=setTimeout(function(){d=null},m)),er(this),A.start())}}function L(C,...D){if(this.__zooming){var S=j(this,D).event(C),I=C.changedTouches,A=I.length,k,O,z,B;for(qt(C),k=0;k<A;++k)O=I[k],z=je(O,this),S.touch0&&S.touch0[2]===O.identifier?S.touch0[0]=z:S.touch1&&S.touch1[2]===O.identifier&&(S.touch1[0]=z);if(O=S.that.__zoom,S.touch1){var ne=S.touch0[0],U=S.touch0[1],J=S.touch1[0],Z=S.touch1[1],X=(X=J[0]-ne[0])*X+(X=J[1]-ne[1])*X,V=(V=Z[0]-U[0])*V+(V=Z[1]-U[1])*V;O=_(O,Math.sqrt(X/V)),z=[(ne[0]+J[0])/2,(ne[1]+J[1])/2],B=[(U[0]+Z[0])/2,(U[1]+Z[1])/2]}else if(S.touch0)z=S.touch0[0],B=S.touch0[1];else return;S.zoom("touch",n(b(O,z,B),S.extent,s))}}function F(C,...D){if(this.__zooming){var S=j(this,D).event(C),I=C.changedTouches,A=I.length,k,O;for(to(C),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),k=0;k<A;++k)O=I[k],S.touch0&&S.touch0[2]===O.identifier?delete S.touch0:S.touch1&&S.touch1[2]===O.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(O=je(O,this),Math.hypot(l[0]-O[0],l[1]-O[1])<w)){var z=Te(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return v.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:Fn(+C),v):r},v.filter=function(C){return arguments.length?(e=typeof C=="function"?C:Fn(!!C),v):e},v.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:Fn(!!C),v):o},v.extent=function(C){return arguments.length?(t=typeof C=="function"?C:Fn([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),v):t},v.scaleExtent=function(C){return arguments.length?(i[0]=+C[0],i[1]=+C[1],v):[i[0],i[1]]},v.translateExtent=function(C){return arguments.length?(s[0][0]=+C[0][0],s[1][0]=+C[1][0],s[0][1]=+C[0][1],s[1][1]=+C[1][1],v):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},v.constrain=function(C){return arguments.length?(n=C,v):n},v.duration=function(C){return arguments.length?(a=+C,v):a},v.interpolate=function(C){return arguments.length?(c=C,v):c},v.on=function(){var C=u.on.apply(u,arguments);return C===u?v:C},v.clickDistance=function(C){return arguments.length?(y=(C=+C)*C,v):Math.sqrt(y)},v.tapDistance=function(C){return arguments.length?(w=+C,v):w},v}const Qe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID."},pn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ac=["Enter"," ","Escape"];var $t;(function(e){e.Strict="strict",e.Loose="loose"})($t||($t={}));var xt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(xt||(xt={}));var gn;(function(e){e.Partial="partial",e.Full="full"})(gn||(gn={}));const Pc={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var it;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(it||(it={}));var cr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(cr||(cr={}));var re;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(re||(re={}));const os={[re.Left]:re.Right,[re.Right]:re.Left,[re.Top]:re.Bottom,[re.Bottom]:re.Top};function jc(e){return e===null?null:e?"valid":"invalid"}const $c=e=>"id"in e&&"source"in e&&"target"in e,G0=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),ri=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Sn=(e,t=[0,0])=>{const{width:n,height:r}=Je(e),o=e.origin??t,i=n*o[0],s=r*o[1];return{x:e.position.x-i,y:e.position.y-s}},U0=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const i=typeof o=="string";let s=!t.nodeLookup&&!i?o:void 0;t.nodeLookup&&(s=i?t.nodeLookup.get(o):ri(o)?o:t.nodeLookup.get(o.id));const a=s?ur(s,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Sr(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Mr(n)},Mn=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const o=ur(r);n=Sr(n,o)}}),Mr(n)},Lc=(e,t,[n,r,o]=[0,0,1],i=!1,s=!1)=>{const a={...Nn(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const u of e.values()){const{measured:d,selectable:l=!0,hidden:f=!1}=u;if(s&&!l||f)continue;const m=d.width??u.width??u.initialWidth??null,p=d.height??u.height??u.initialHeight??null,y=yn(a,Ot(u)),w=(m??0)*(p??0),v=i&&y>0;(!u.internals.handleBounds||v||y>=w||u.dragging)&&c.push(u)}return c},K0=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Po(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function jo({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},s){if(e.size===0)return Promise.resolve(!1);const a=Mn(e),c=oi(a,t,n,(s==null?void 0:s.minZoom)??o,(s==null?void 0:s.maxZoom)??i,(s==null?void 0:s.padding)??.1);return await r.setViewport(c,{duration:s==null?void 0:s.duration}),Promise.resolve(!0)}function Oc({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const s=n.get(e),a=s.parentId?n.get(s.parentId):void 0,{x:c,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},d=s.origin??r;let l=o;if(s.extent==="parent"&&!s.expandParent)if(!a)i==null||i("005",Qe.error005());else{const m=a.measured.width,p=a.measured.height;m&&p&&(l=[[c,u],[c+m,u+p]])}else a&&Ft(s.extent)&&(l=[[s.extent[0][0]+c,s.extent[0][1]+u],[s.extent[1][0]+c,s.extent[1][1]+u]]);const f=Ft(l)?wt(t,l,s.measured):t;return{position:{x:f.x-c+s.measured.width*d[0],y:f.y-u+s.measured.height*d[1]},positionAbsolute:f}}async function q0({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(f=>f.id)),s=[];for(const f of n){if(f.deletable===!1)continue;const m=i.has(f.id),p=!m&&f.parentId&&s.find(y=>y.id===f.parentId);(m||p)&&s.push(f)}const a=new Set(t.map(f=>f.id)),c=r.filter(f=>f.deletable!==!1),d=K0(s,c);for(const f of c)a.has(f.id)&&!d.find(p=>p.id===f.id)&&d.push(f);if(!o)return{edges:d,nodes:s};const l=await o({nodes:s,edges:d});return typeof l=="boolean"?l?{edges:d,nodes:s}:{edges:[],nodes:[]}:l}const Lt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),wt=(e={x:0,y:0},t,n)=>({x:Lt(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Lt(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function Fc(e,t,n){const{width:r,height:o}=Je(n),{x:i,y:s}=n.internals.positionAbsolute;return wt(e,[[i,s],[i+r,s+o]],t)}const is=(e,t,n)=>e<t?Lt(Math.abs(e-t),1,t)/t:e>n?-Lt(Math.abs(e-n),1,t)/t:0,Hc=(e,t,n=15,r=40)=>{const o=is(e.x,r,t.width-r)*n,i=is(e.y,r,t.height-r)*n;return[o,i]},Sr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),$o=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Mr=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ot=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=ri(e)?e.internals.positionAbsolute:Sn(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},ur=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=ri(e)?e.internals.positionAbsolute:Sn(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},zc=(e,t)=>Mr(Sr($o(e),$o(t))),yn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},ss=e=>Le(e.width)&&Le(e.height)&&Le(e.x)&&Le(e.y),Le=e=>!isNaN(e)&&isFinite(e),Z0=(e,t)=>{},Nr=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Nn=({x:e,y:t},[n,r,o],i=!1,s=[1,1])=>{const a={x:(e-n)/o,y:(t-r)/o};return i?Nr(a,s):a},Bc=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r}),oi=(e,t,n,r,o,i)=>{const s=t/(e.width*(1+i)),a=n/(e.height*(1+i)),c=Math.min(s,a),u=Lt(c,r,o),d=e.x+e.width/2,l=e.y+e.height/2,f=t/2-d*u,m=n/2-l*u;return{x:f,y:m,zoom:u}},lr=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Ft(e){return e!==void 0&&e!=="parent"}function Je(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function Vc(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function Xc(e,t={width:0,height:0},n,r,o){const i={...e},s=r.get(n);if(s){const a=s.origin||o;i.x+=s.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=s.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function as(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function an(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:s}=qe(e),a=Nn({x:i-((o==null?void 0:o.left)??0),y:s-((o==null?void 0:o.top)??0)},r),{x:c,y:u}=n?Nr(a,t):a;return{xSnapped:c,ySnapped:u,...a}}const Tr=e=>({width:e.offsetWidth,height:e.offsetHeight}),Yc=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Q0=["INPUT","SELECT","TEXTAREA"];function Lo(e){var r,o;const t=((o=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:Q0.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Wc=e=>"clientX"in e,qe=(e,t)=>{var i,s;const n=Wc(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},cs=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Tr(s)}})};function Gc({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=e*.125+o*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+r*.125,d=Math.abs(c-e),l=Math.abs(u-t);return[c,u,d,l]}function Hn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function us({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case re.Left:return[t-Hn(t-r,i),n];case re.Right:return[t+Hn(r-t,i),n];case re.Top:return[t,n-Hn(n-o,i)];case re.Bottom:return[t,n+Hn(o-n,i)]}}function Uc({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:r,targetY:o,targetPosition:i=re.Top,curvature:s=.25}){const[a,c]=us({pos:n,x1:e,y1:t,x2:r,y2:o,c:s}),[u,d]=us({pos:i,x1:r,y1:o,x2:e,y2:t,c:s}),[l,f,m,p]=Gc({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${c} ${u},${d} ${r},${o}`,l,f,m,p]}function Kc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[i,a,o,s]}function J0({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;const i=n||t.selected||e.selected,s=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?s:0)}function ey({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=Sr(ur(e),ur(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return yn(s,Mr(i))>0}const ty=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,ny=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),ry=(e,t)=>{if(!e.source||!e.target)return t;let n;return $c(e)?n={...e}:n={...e,id:ty(e)},ny(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function qc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,s,a]=Kc({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,s,a]}const ls={[re.Left]:{x:-1,y:0},[re.Right]:{x:1,y:0},[re.Top]:{x:0,y:-1},[re.Bottom]:{x:0,y:1}},oy=({source:e,sourcePosition:t=re.Bottom,target:n})=>t===re.Left||t===re.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ds=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function iy({source:e,sourcePosition:t=re.Bottom,target:n,targetPosition:r=re.Top,center:o,offset:i}){const s=ls[t],a=ls[r],c={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},d=oy({source:c,sourcePosition:t,target:u}),l=d.x!==0?"x":"y",f=d[l];let m=[],p,y;const w={x:0,y:0},v={x:0,y:0},[_,b,x,M]=Kc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[l]*a[l]===-1){p=o.x??_,y=o.y??b;const E=[{x:p,y:c.y},{x:p,y:u.y}],N=[{x:c.x,y},{x:u.x,y}];s[l]===f?m=l==="x"?E:N:m=l==="x"?N:E}else{const E=[{x:c.x,y:u.y}],N=[{x:u.x,y:c.y}];if(l==="x"?m=s.x===f?N:E:m=s.y===f?E:N,t===r){const F=Math.abs(e[l]-n[l]);if(F<=i){const C=Math.min(i-1,i-F);s[l]===f?w[l]=(c[l]>e[l]?-1:1)*C:v[l]=(u[l]>n[l]?-1:1)*C}}if(t!==r){const F=l==="x"?"y":"x",C=s[l]===a[F],D=c[F]>u[F],S=c[F]<u[F];(s[l]===1&&(!C&&D||C&&S)||s[l]!==1&&(!C&&S||C&&D))&&(m=l==="x"?E:N)}const R={x:c.x+w.x,y:c.y+w.y},P={x:u.x+v.x,y:u.y+v.y},$=Math.max(Math.abs(R.x-m[0].x),Math.abs(P.x-m[0].x)),L=Math.max(Math.abs(R.y-m[0].y),Math.abs(P.y-m[0].y));$>=L?(p=(R.x+P.x)/2,y=m[0].y):(p=m[0].x,y=(R.y+P.y)/2)}return[[e,{x:c.x+w.x,y:c.y+w.y},...m,{x:u.x+v.x,y:u.y+v.y},n],p,y,x,M]}function sy(e,t,n,r){const o=Math.min(ds(e,t)/2,ds(t,n)/2,r),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${i+o*u},${s}Q ${i},${s} ${i},${s+o*d}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${s+o*c}Q ${i},${s} ${i+o*a},${s}`}function Oo({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:r,targetY:o,targetPosition:i=re.Top,borderRadius:s=5,centerX:a,centerY:c,offset:u=20}){const[d,l,f,m,p]=iy({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:c},offset:u});return[d.reduce((w,v,_)=>{let b="";return _>0&&_<d.length-1?b=sy(d[_-1],v,d[_+1],s):b=`${_===0?"M":"L"}${v.x} ${v.y}`,w+=b,w},""),l,f,m,p]}function fs(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function ay(e){var l;const{sourceNode:t,targetNode:n}=e;if(!fs(t)||!fs(n))return null;const r=t.internals.handleBounds||hs(t.handles),o=n.internals.handleBounds||hs(n.handles),i=ms((r==null?void 0:r.source)??[],e.sourceHandle),s=ms(e.connectionMode===$t.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!i||!s)return(l=e.onError)==null||l.call(e,"008",Qe.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(i==null?void 0:i.position)||re.Bottom,c=(s==null?void 0:s.position)||re.Top,u=xn(t,i,a),d=xn(n,s,c);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:a,targetPosition:c}}function hs(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function xn(e,t,n=re.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:s,height:a}=t??Je(e);if(r)return{x:o+s/2,y:i+a/2};switch((t==null?void 0:t.position)??n){case re.Top:return{x:o+s/2,y:i};case re.Right:return{x:o+s,y:i+a/2};case re.Bottom:return{x:o+s/2,y:i+a};case re.Left:return{x:o,y:i+a/2}}}function ms(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Fo(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function cy(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((s,a)=>([a.markerStart||r,a.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const u=Fo(c,t);i.has(u)||(s.push({id:u,color:c.color||n,...c}),i.add(u))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))}const ii={nodeOrigin:[0,0],nodeExtent:pn,elevateNodesOnSelect:!0,defaults:{}},uy={...ii,checkEquality:!0};function si(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function ly(e,t,n){const r=si(ii,n);for(const o of e.values())if(o.parentId)ai(o,e,t,r);else{const i=Sn(o,r.nodeOrigin),s=Ft(o.extent)?o.extent:r.nodeExtent,a=wt(i,s,Je(o));o.internals.positionAbsolute=a}}function Ho(e,t,n,r){var a,c;const o=si(uy,r),i=new Map(t),s=o!=null&&o.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=i.get(u.id);if(o.checkEquality&&u===(d==null?void 0:d.internals.userNode))t.set(u.id,d);else{const l=Sn(u,o.nodeOrigin),f=Ft(u.extent)?u.extent:o.nodeExtent,m=wt(l,f,Je(u));d={...o.defaults,...u,measured:{width:(a=u.measured)==null?void 0:a.width,height:(c=u.measured)==null?void 0:c.height},internals:{positionAbsolute:m,handleBounds:u.measured?d==null?void 0:d.internals.handleBounds:void 0,z:Zc(u,s),userNode:u}},t.set(u.id,d)}u.parentId&&ai(d,t,n,r)}}function dy(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function ai(e,t,n,r){const{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:s}=si(ii,r),a=e.parentId,c=t.get(a);if(!c){console.warn(`Parent node ${a} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}dy(e,n);const u=o?1e3:0,{x:d,y:l,z:f}=fy(e,c,i,s,u),{positionAbsolute:m}=e.internals,p=d!==m.x||l!==m.y;(p||f!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:p?{x:d,y:l}:m,z:f}})}function Zc(e,t){return(Le(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function fy(e,t,n,r,o){const{x:i,y:s}=t.internals.positionAbsolute,a=Je(e),c=Sn(e,n),u=Ft(e.extent)?wt(c,e.extent,a):c;let d=wt({x:i+u.x,y:s+u.y},r,a);e.extent==="parent"&&(d=Fc(d,a,t));const l=Zc(e,o),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>l?f:l}}function ci(e,t,n,r=[0,0]){var s;const o=[],i=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const u=((s=i.get(a.parentId))==null?void 0:s.expandedRect)??Ot(c),d=zc(u,a.rect);i.set(a.parentId,{expandedRect:d,parent:c})}return i.size>0&&i.forEach(({expandedRect:a,parent:c},u)=>{var b;const d=c.internals.positionAbsolute,l=Je(c),f=c.origin??r,m=a.x<d.x?Math.round(Math.abs(d.x-a.x)):0,p=a.y<d.y?Math.round(Math.abs(d.y-a.y)):0,y=Math.max(l.width,Math.round(a.width)),w=Math.max(l.height,Math.round(a.height)),v=(y-l.width)*f[0],_=(w-l.height)*f[1];(m>0||p>0||v||_)&&(o.push({id:u,type:"position",position:{x:c.position.x-m+v,y:c.position.y-p+_}}),(b=n.get(u))==null||b.forEach(x=>{e.some(M=>M.id===x.id)||o.push({id:x.id,type:"position",position:{x:x.position.x+m,y:x.position.y+p}})})),(l.width<a.width||l.height<a.height||m||p)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:y+(m?f[0]*m-v:0),height:w+(p?f[1]*p-_:0)}})}),o}function hy(e,t,n,r,o,i){const s=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!s)return{changes:[],updatedInternals:a};const c=[],u=window.getComputedStyle(s),{m22:d}=new window.DOMMatrixReadOnly(u.transform),l=[];for(const f of e.values()){const m=t.get(f.id);if(!m)continue;if(m.hidden){t.set(m.id,{...m,internals:{...m.internals,handleBounds:void 0}}),a=!0;continue}const p=Tr(f.nodeElement),y=m.measured.width!==p.width||m.measured.height!==p.height;if(!!(p.width&&p.height&&(y||!m.internals.handleBounds||f.force))){const v=f.nodeElement.getBoundingClientRect(),_=Ft(m.extent)?m.extent:i;let{positionAbsolute:b}=m.internals;m.parentId&&m.extent==="parent"?b=Fc(b,p,t.get(m.parentId)):_&&(b=wt(b,_,p));const x={...m,measured:p,internals:{...m.internals,positionAbsolute:b,handleBounds:{source:cs("source",f.nodeElement,v,d,m.id),target:cs("target",f.nodeElement,v,d,m.id)}}};t.set(m.id,x),m.parentId&&ai(x,t,n,{nodeOrigin:o}),a=!0,y&&(c.push({id:m.id,type:"dimensions",dimensions:p}),m.expandParent&&m.parentId&&l.push({id:m.id,parentId:m.parentId,rect:Ot(x,o)}))}}if(l.length>0){const f=ci(l,t,n,o);c.push(...f)}return{changes:c,updatedInternals:a}}async function my({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const s=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),a=!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2]);return Promise.resolve(a)}function ps(e,t,n,r,o,i){let s=o;const a=r.get(s)||new Map;r.set(s,a.set(n,t)),s=`${o}-${e}`;const c=r.get(s)||new Map;if(r.set(s,c.set(n,t)),i){s=`${o}-${e}-${i}`;const u=r.get(s)||new Map;r.set(s,u.set(n,t))}}function Qc(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:i,sourceHandle:s=null,targetHandle:a=null}=r,c={edgeId:r.id,source:o,target:i,sourceHandle:s,targetHandle:a},u=`${o}-${s}--${i}-${a}`,d=`${i}-${a}--${o}-${s}`;ps("source",c,d,e,o,s),ps("target",c,u,e,i,a),t.set(r.id,r)}}function Jc(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Jc(n,t):!1}function gs(e,t,n){var o;let r=e;do{if((o=r==null?void 0:r.matches)!=null&&o.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function py(e,t,n,r){const o=new Map;for(const[i,s]of e)if((s.selected||s.id===r)&&(!s.parentId||!Jc(s,e))&&(s.draggable||t&&typeof s.draggable>"u")){const a=e.get(i);a&&o.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return o}function no({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var s,a,c;const o=[];for(const[u,d]of t){const l=(s=n.get(u))==null?void 0:s.internals.userNode;l&&o.push({...l,position:d.position,dragging:r})}if(!e)return[o[0],o];const i=(a=n.get(e))==null?void 0:a.internals.userNode;return[i?{...i,position:((c=t.get(e))==null?void 0:c.position)||i.position,dragging:r}:o[0],o]}function gy({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},s=0,a=new Map,c=!1,u={x:0,y:0},d=null,l=!1,f=null,m=!1;function p({noDragClassName:w,handleSelector:v,domNode:_,isSelectable:b,nodeId:x,nodeClickDistance:M=0}){f=Te(_);function j({x:P,y:$},L){const{nodeLookup:F,nodeExtent:C,snapGrid:D,snapToGrid:S,nodeOrigin:I,onNodeDrag:A,onSelectionDrag:k,onError:O,updateNodePositions:z}=t();i={x:P,y:$};let B=!1,ne={x:0,y:0,x2:0,y2:0};if(a.size>1&&C){const U=Mn(a);ne=$o(U)}for(const[U,J]of a){if(!F.has(U))continue;let Z={x:P-J.distance.x,y:$-J.distance.y};S&&(Z=Nr(Z,D));let X=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];if(a.size>1&&C&&!J.extent){const{positionAbsolute:ie}=J.internals,Q=ie.x-ne.x+C[0][0],te=ie.x+J.measured.width-ne.x2+C[1][0],ae=ie.y-ne.y+C[0][1],fe=ie.y+J.measured.height-ne.y2+C[1][1];X=[[Q,ae],[te,fe]]}const{position:V,positionAbsolute:ee}=Oc({nodeId:U,nextPosition:Z,nodeLookup:F,nodeExtent:X,nodeOrigin:I,onError:O});B=B||J.position.x!==V.x||J.position.y!==V.y,J.position=V,J.internals.positionAbsolute=ee}if(B&&(z(a,!0),L&&(r||A||!x&&k))){const[U,J]=no({nodeId:x,dragItems:a,nodeLookup:F});r==null||r(L,a,U,J),A==null||A(L,U,J),x||k==null||k(L,J)}}async function E(){if(!d)return;const{transform:P,panBy:$,autoPanSpeed:L}=t(),[F,C]=Hc(u,d,L);(F!==0||C!==0)&&(i.x=(i.x??0)-F/P[2],i.y=(i.y??0)-C/P[2],await $({x:F,y:C})&&j(i,null)),s=requestAnimationFrame(E)}function N(P){var B;const{nodeLookup:$,multiSelectionActive:L,nodesDraggable:F,transform:C,snapGrid:D,snapToGrid:S,selectNodesOnDrag:I,onNodeDragStart:A,onSelectionDragStart:k,unselectNodesAndEdges:O}=t();l=!0,(!I||!b)&&!L&&x&&((B=$.get(x))!=null&&B.selected||O()),b&&I&&x&&(e==null||e(x));const z=an(P.sourceEvent,{transform:C,snapGrid:D,snapToGrid:S,containerBounds:d});if(i=z,a=py($,F,z,x),a.size>0&&(n||A||!x&&k)){const[ne,U]=no({nodeId:x,dragItems:a,nodeLookup:$});n==null||n(P.sourceEvent,a,ne,U),A==null||A(P.sourceEvent,ne,U),x||k==null||k(P.sourceEvent,U)}}const R=yc().clickDistance(M).on("start",P=>{const{domNode:$,nodeDragThreshold:L,transform:F,snapGrid:C,snapToGrid:D}=t();d=($==null?void 0:$.getBoundingClientRect())||null,m=!1,L===0&&N(P),i=an(P.sourceEvent,{transform:F,snapGrid:C,snapToGrid:D,containerBounds:d}),u=qe(P.sourceEvent,d)}).on("drag",P=>{const{autoPanOnNodeDrag:$,transform:L,snapGrid:F,snapToGrid:C,nodeDragThreshold:D,nodeLookup:S}=t(),I=an(P.sourceEvent,{transform:L,snapGrid:F,snapToGrid:C,containerBounds:d});if((P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||x&&!S.has(x))&&(m=!0),!m){if(!c&&$&&l&&(c=!0,E()),!l){const A=I.xSnapped-(i.x??0),k=I.ySnapped-(i.y??0);Math.sqrt(A*A+k*k)>D&&N(P)}(i.x!==I.xSnapped||i.y!==I.ySnapped)&&a&&l&&(u=qe(P.sourceEvent,d),j(I,P.sourceEvent))}}).on("end",P=>{if(!(!l||m)&&(c=!1,l=!1,cancelAnimationFrame(s),a.size>0)){const{nodeLookup:$,updateNodePositions:L,onNodeDragStop:F,onSelectionDragStop:C}=t();if(L(a,!1),o||F||!x&&C){const[D,S]=no({nodeId:x,dragItems:a,nodeLookup:$,dragging:!1});o==null||o(P.sourceEvent,a,D,S),F==null||F(P.sourceEvent,D,S),x||C==null||C(P.sourceEvent,S)}}}).filter(P=>{const $=P.target;return!P.button&&(!w||!gs($,`.${w}`,_))&&(!v||gs($,v,_))});f.call(R)}function y(){f==null||f.on(".drag",null)}return{update:p,destroy:y}}function yy(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())yn(o,Ot(i))>0&&r.push(i);return r}const xy=250;function vy(e,t,n,r){var a,c;let o=[],i=1/0;const s=yy(e,n,t+xy);for(const u of s){const d=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((c=u.internals.handleBounds)==null?void 0:c.target)??[]];for(const l of d){if(r.nodeId===l.nodeId&&r.type===l.type&&r.id===l.id)continue;const{x:f,y:m}=xn(u,l,l.position,!0),p=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(m-e.y,2));p>t||(p<i?(o=[{...l,x:f,y:m}],i=p):p===i&&o.push({...l,x:f,y:m}))}}if(!o.length)return null;if(o.length>1){const u=r.type==="source"?"target":"source";return o.find(d=>d.type===u)??o[0]}return o[0]}function eu(e,t,n,r,o,i=!1){var u,d,l;const s=r.get(e);if(!s)return null;const a=o==="strict"?(u=s.internals.handleBounds)==null?void 0:u[t]:[...((d=s.internals.handleBounds)==null?void 0:d.source)??[],...((l=s.internals.handleBounds)==null?void 0:l.target)??[]],c=(n?a==null?void 0:a.find(f=>f.id===n):a==null?void 0:a[0])??null;return c&&i?{...c,...xn(s,c,c.position,!0)}:c}function tu(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function wy(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const nu=()=>!0;function by(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:s,domNode:a,nodeLookup:c,lib:u,autoPanOnConnect:d,flowId:l,panBy:f,cancelConnection:m,onConnectStart:p,onConnect:y,onConnectEnd:w,isValidConnection:v=nu,onReconnectEnd:_,updateConnection:b,getTransform:x,getFromHandle:M,autoPanSpeed:j}){const E=Yc(e.target);let N=0,R;const{x:P,y:$}=qe(e),L=E==null?void 0:E.elementFromPoint(P,$),F=tu(i,L),C=a==null?void 0:a.getBoundingClientRect();if(!C||!F)return;const D=eu(o,F,r,c,t);if(!D)return;let S=qe(e,C),I=!1,A=null,k=!1,O=null;function z(){if(!d||!C)return;const[ee,ie]=Hc(S,C,j);f({x:ee,y:ie}),N=requestAnimationFrame(z)}const B={...D,nodeId:o,type:F,position:D.position},ne=c.get(o),J={inProgress:!0,isValid:null,from:xn(ne,B,re.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:ne,to:S,toHandle:null,toPosition:os[B.position],toNode:null};b(J);let Z=J;p==null||p(e,{nodeId:o,handleId:r,handleType:F});function X(ee){if(!M()||!B){V(ee);return}const ie=x();S=qe(ee,C),R=vy(Nn(S,ie,!1,[1,1]),n,c,B),I||(z(),I=!0);const Q=ru(ee,{handle:R,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:s?"target":"source",isValidConnection:v,doc:E,lib:u,flowId:l,nodeLookup:c});O=Q.handleDomNode,A=Q.connection,k=wy(!!R,Q.isValid);const te={...Z,isValid:k,to:R&&k?Bc({x:R.x,y:R.y},ie):S,toHandle:Q.toHandle,toPosition:k&&Q.toHandle?Q.toHandle.position:os[B.position],toNode:Q.toHandle?c.get(Q.toHandle.nodeId):null};k&&R&&Z.toHandle&&te.toHandle&&Z.toHandle.type===te.toHandle.type&&Z.toHandle.nodeId===te.toHandle.nodeId&&Z.toHandle.id===te.toHandle.id&&Z.to.x===te.to.x&&Z.to.y===te.to.y||(b(te),Z=te)}function V(ee){(R||O)&&A&&k&&(y==null||y(A));const{inProgress:ie,...Q}=Z,te={...Q,toPosition:Z.toHandle?Z.toPosition:null};w==null||w(ee,te),i&&(_==null||_(ee,te)),m(),cancelAnimationFrame(N),I=!1,k=!1,A=null,O=null,E.removeEventListener("mousemove",X),E.removeEventListener("mouseup",V),E.removeEventListener("touchmove",X),E.removeEventListener("touchend",V)}E.addEventListener("mousemove",X),E.addEventListener("mouseup",V),E.addEventListener("touchmove",X),E.addEventListener("touchend",V)}function ru(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:s,lib:a,flowId:c,isValidConnection:u=nu,nodeLookup:d}){const l=i==="target",f=t?s.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:m,y:p}=qe(e),y=s.elementFromPoint(m,p),w=y!=null&&y.classList.contains(`${a}-flow__handle`)?y:f,v={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const _=tu(void 0,w),b=w.getAttribute("data-nodeid"),x=w.getAttribute("data-handleid"),M=w.classList.contains("connectable"),j=w.classList.contains("connectableend");if(!b||!_)return v;const E={source:l?b:r,sourceHandle:l?x:o,target:l?r:b,targetHandle:l?o:x};v.connection=E;const R=M&&j&&(n===$t.Strict?l&&_==="source"||!l&&_==="target":b!==r||x!==o);v.isValid=R&&u(E),v.toHandle=eu(b,_,x,d,n,!1)}return v}const zo={onPointerDown:by,isValid:ru};function Cy({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Te(e);function i({translateExtent:a,width:c,height:u,zoomStep:d=10,pannable:l=!0,zoomable:f=!0,inversePan:m=!1}){const p=b=>{const x=n();if(b.sourceEvent.type!=="wheel"||!t)return;const M=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*d,j=x[2]*Math.pow(2,M);t.scaleTo(j)};let y=[0,0];const w=b=>{(b.sourceEvent.type==="mousedown"||b.sourceEvent.type==="touchstart")&&(y=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},v=b=>{const x=n();if(b.sourceEvent.type!=="mousemove"&&b.sourceEvent.type!=="touchmove"||!t)return;const M=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],j=[M[0]-y[0],M[1]-y[1]];y=M;const E=r()*Math.max(x[2],Math.log(x[2]))*(m?-1:1),N={x:x[0]-j[0]*E,y:x[1]-j[1]*E},R=[[0,0],[c,u]];t.setViewportConstrained({x:N.x,y:N.y,zoom:x[2]},R,a)},_=Ic().on("start",w).on("zoom",l?v:null).on("zoom.wheel",f?p:null);o.call(_,{})}function s(){o.on("zoom",null)}return{update:i,destroy:s,pointer:je}}const _y=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,kr=e=>({x:e.x,y:e.y,zoom:e.k}),ro=({x:e,y:t,zoom:n})=>Er.translate(e,t).scale(n),Mt=(e,t)=>e.target.closest(`.${t}`),ou=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),oo=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},iu=e=>{const t=e.ctrlKey&&lr()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Ey({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:s,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:u}){return d=>{if(Mt(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();const l=n.property("__zoom").k||1;if(d.ctrlKey&&s){const w=je(d),v=iu(d),_=l*Math.pow(2,v);r.scaleTo(n,_,w,d);return}const f=d.deltaMode===1?20:1;let m=o===xt.Vertical?0:d.deltaX*f,p=o===xt.Horizontal?0:d.deltaY*f;!lr()&&d.shiftKey&&o!==xt.Vertical&&(m=d.deltaY*f,p=0),r.translateBy(n,-(m/l)*i,-(p/l)*i,{internal:!0});const y=kr(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,a==null||a(d,y)),e.isPanScrolling&&(c==null||c(d,y),e.panScrollTimeout=setTimeout(()=>{u==null||u(d,y),e.isPanScrolling=!1},150))}}function Sy({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){if(!t&&r.type==="wheel"&&!r.ctrlKey||Mt(r,e))return null;r.preventDefault(),n.call(this,r,o)}}function My({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,s,a;if((i=r.sourceEvent)!=null&&i.internal)return;const o=kr(r.transform);e.mouseButton=((s=r.sourceEvent)==null?void 0:s.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function Ny({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{var s,a;e.usedRightMouseButton=!!(n&&ou(t,e.mouseButton??0)),(s=i.sourceEvent)!=null&&s.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!((a=i.sourceEvent)!=null&&a.internal)&&(o==null||o(i.sourceEvent,kr(i.transform)))}}function Ty({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return s=>{var a;if(!((a=s.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,i&&ou(t,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&i(s.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&_y(e.prevViewport,s.transform))){const c=kr(s.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(s.sourceEvent,c)},n?150:0)}}}function ky({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:s,noWheelClassName:a,noPanClassName:c,lib:u}){return d=>{var p;const l=e||t,f=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(Mt(d,`${u}-flow__node`)||Mt(d,`${u}-flow__edge`)))return!0;if(!r&&!l&&!o&&!i&&!n||s||Mt(d,a)&&d.type==="wheel"||Mt(d,c)&&(d.type!=="wheel"||o&&d.type==="wheel"&&!e)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((p=d.touches)==null?void 0:p.length)>1)return d.preventDefault(),!1;if(!l&&!o&&!f&&d.type==="wheel"||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const m=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&m}}function Ry({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:s,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:u}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},l=e.getBoundingClientRect(),f=Ic().clickDistance(!Le(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),m=Te(e).call(f);b({x:i.x,y:i.y,zoom:Lt(i.zoom,t,n)},[[0,0],[l.width,l.height]],o);const p=m.on("wheel.zoom"),y=m.on("dblclick.zoom");f.wheelDelta(iu);function w(L,F){return m?new Promise(C=>{f==null||f.transform(oo(m,F==null?void 0:F.duration,()=>C(!0)),L)}):Promise.resolve(!1)}function v({noWheelClassName:L,noPanClassName:F,onPaneContextMenu:C,userSelectionActive:D,panOnScroll:S,panOnDrag:I,panOnScrollMode:A,panOnScrollSpeed:k,preventScrolling:O,zoomOnPinch:z,zoomOnScroll:B,zoomOnDoubleClick:ne,zoomActivationKeyPressed:U,lib:J,onTransformChange:Z}){D&&!d.isZoomingOrPanning&&_();const V=S&&!U&&!D?Ey({zoomPanValues:d,noWheelClassName:L,d3Selection:m,d3Zoom:f,panOnScrollMode:A,panOnScrollSpeed:k,zoomOnPinch:z,onPanZoomStart:a,onPanZoom:s,onPanZoomEnd:c}):Sy({noWheelClassName:L,preventScrolling:O,d3ZoomHandler:p});if(m.on("wheel.zoom",V,{passive:!1}),!D){const ie=My({zoomPanValues:d,onDraggingChange:u,onPanZoomStart:a});f.on("start",ie);const Q=Ny({zoomPanValues:d,panOnDrag:I,onPaneContextMenu:!!C,onPanZoom:s,onTransformChange:Z});f.on("zoom",Q);const te=Ty({zoomPanValues:d,panOnDrag:I,panOnScroll:S,onPaneContextMenu:C,onPanZoomEnd:c,onDraggingChange:u});f.on("end",te)}const ee=ky({zoomActivationKeyPressed:U,panOnDrag:I,zoomOnScroll:B,panOnScroll:S,zoomOnDoubleClick:ne,zoomOnPinch:z,userSelectionActive:D,noPanClassName:F,noWheelClassName:L,lib:J});f.filter(ee),ne?m.on("dblclick.zoom",y):m.on("dblclick.zoom",null)}function _(){f.on("zoom",null)}async function b(L,F,C){const D=ro(L),S=f==null?void 0:f.constrain()(D,F,C);return S&&await w(S),new Promise(I=>I(S))}async function x(L,F){const C=ro(L);return await w(C,F),new Promise(D=>D(C))}function M(L){if(m){const F=ro(L),C=m.property("__zoom");(C.k!==L.zoom||C.x!==L.x||C.y!==L.y)&&(f==null||f.transform(m,F,null,{sync:!0}))}}function j(){const L=m?Dc(m.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function E(L,F){return m?new Promise(C=>{f==null||f.scaleTo(oo(m,F==null?void 0:F.duration,()=>C(!0)),L)}):Promise.resolve(!1)}function N(L,F){return m?new Promise(C=>{f==null||f.scaleBy(oo(m,F==null?void 0:F.duration,()=>C(!0)),L)}):Promise.resolve(!1)}function R(L){f==null||f.scaleExtent(L)}function P(L){f==null||f.translateExtent(L)}function $(L){const F=!Le(L)||L<0?0:L;f==null||f.clickDistance(F)}return{update:v,destroy:_,setViewport:x,setViewportConstrained:b,getViewport:j,scaleTo:E,scaleBy:N,setScaleExtent:R,setTranslateExtent:P,syncViewport:M,setClickDistance:$}}var It;(function(e){e.Line="line",e.Handle="handle"})(It||(It={}));const Dy=["top-left","top-right","bottom-left","bottom-right"],Iy=["top","right","bottom","left"];function Ay({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const s=e-t,a=n-r,c=[s>0?1:s<0?-1:0,a>0?1:a<0?-1:0];return s&&o&&(c[0]=c[0]*-1),a&&i&&(c[1]=c[1]*-1),c}function Py(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function tt(e,t){return Math.max(0,t-e)}function nt(e,t){return Math.max(0,e-t)}function zn(e,t,n){return Math.max(0,t-e,e-n)}function ys(e,t){return e?!t:t}function jy(e,t,n,r,o,i,s,a){let{affectsX:c,affectsY:u}=t;const{isHorizontal:d,isVertical:l}=t,f=d&&l,{xSnapped:m,ySnapped:p}=n,{minWidth:y,maxWidth:w,minHeight:v,maxHeight:_}=r,{x:b,y:x,width:M,height:j,aspectRatio:E}=e;let N=Math.floor(d?m-e.pointerX:0),R=Math.floor(l?p-e.pointerY:0);const P=M+(c?-N:N),$=j+(u?-R:R),L=-i[0]*M,F=-i[1]*j;let C=zn(P,y,w),D=zn($,v,_);if(s){let A=0,k=0;c&&N<0?A=tt(b+N+L,s[0][0]):!c&&N>0&&(A=nt(b+P+L,s[1][0])),u&&R<0?k=tt(x+R+F,s[0][1]):!u&&R>0&&(k=nt(x+$+F,s[1][1])),C=Math.max(C,A),D=Math.max(D,k)}if(a){let A=0,k=0;c&&N>0?A=nt(b+N,a[0][0]):!c&&N<0&&(A=tt(b+P,a[1][0])),u&&R>0?k=nt(x+R,a[0][1]):!u&&R<0&&(k=tt(x+$,a[1][1])),C=Math.max(C,A),D=Math.max(D,k)}if(o){if(d){const A=zn(P/E,v,_)*E;if(C=Math.max(C,A),s){let k=0;!c&&!u||c&&!u&&f?k=nt(x+F+P/E,s[1][1])*E:k=tt(x+F+(c?N:-N)/E,s[0][1])*E,C=Math.max(C,k)}if(a){let k=0;!c&&!u||c&&!u&&f?k=tt(x+P/E,a[1][1])*E:k=nt(x+(c?N:-N)/E,a[0][1])*E,C=Math.max(C,k)}}if(l){const A=zn($*E,y,w)/E;if(D=Math.max(D,A),s){let k=0;!c&&!u||u&&!c&&f?k=nt(b+$*E+L,s[1][0])/E:k=tt(b+(u?R:-R)*E+L,s[0][0])/E,D=Math.max(D,k)}if(a){let k=0;!c&&!u||u&&!c&&f?k=tt(b+$*E,a[1][0])/E:k=nt(b+(u?R:-R)*E,a[0][0])/E,D=Math.max(D,k)}}}R=R+(R<0?D:-D),N=N+(N<0?C:-C),o&&(f?P>$*E?R=(ys(c,u)?-N:N)/E:N=(ys(c,u)?-R:R)*E:d?(R=N/E,u=c):(N=R*E,c=u));const S=c?b+N:b,I=u?x+R:x;return{width:M+(c?-N:N),height:j+(u?-R:R),x:i[0]*N*(c?-1:1)+S,y:i[1]*R*(u?-1:1)+I}}const su={width:0,height:0,x:0,y:0},$y={...su,pointerX:0,pointerY:0,aspectRatio:1};function Ly(e){return[[0,0],[e.measured.width,e.measured.height]]}function Oy(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,s=e.measured.height??0,a=n[0]*i,c=n[1]*s;return[[r-a,o-c],[r+i-a,o+s-c]]}function Fy({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=Te(e);function s({controlPosition:c,boundaries:u,keepAspectRatio:d,onResizeStart:l,onResize:f,onResizeEnd:m,shouldResize:p}){let y={...su},w={...$y};const v=Py(c);let _,b=null,x=[],M,j,E;const N=yc().on("start",R=>{const{nodeLookup:P,transform:$,snapGrid:L,snapToGrid:F,nodeOrigin:C,paneDomNode:D}=n();if(_=P.get(t),!_)return;b=(D==null?void 0:D.getBoundingClientRect())??null;const{xSnapped:S,ySnapped:I}=an(R.sourceEvent,{transform:$,snapGrid:L,snapToGrid:F,containerBounds:b});y={width:_.measured.width??0,height:_.measured.height??0,x:_.position.x??0,y:_.position.y??0},w={...y,pointerX:S,pointerY:I,aspectRatio:y.width/y.height},M=void 0,_.parentId&&(_.extent==="parent"||_.expandParent)&&(M=P.get(_.parentId),j=M&&_.extent==="parent"?Ly(M):void 0),x=[],E=void 0;for(const[A,k]of P)if(k.parentId===t&&(x.push({id:A,position:{...k.position},extent:k.extent}),k.extent==="parent"||k.expandParent)){const O=Oy(k,_,k.origin??C);E?E=[[Math.min(O[0][0],E[0][0]),Math.min(O[0][1],E[0][1])],[Math.max(O[1][0],E[1][0]),Math.max(O[1][1],E[1][1])]]:E=O}l==null||l(R,{...y})}).on("drag",R=>{const{transform:P,snapGrid:$,snapToGrid:L,nodeOrigin:F}=n(),C=an(R.sourceEvent,{transform:P,snapGrid:$,snapToGrid:L,containerBounds:b}),D=[];if(!_)return;const{x:S,y:I,width:A,height:k}=y,O={},z=_.origin??F,{width:B,height:ne,x:U,y:J}=jy(w,v,C,u,d,z,j,E),Z=B!==A,X=ne!==k,V=U!==S&&Z,ee=J!==I&&X;if(!V&&!ee&&!Z&&!X)return;if((V||ee||z[0]===1||z[1]===1)&&(O.x=V?U:y.x,O.y=ee?J:y.y,y.x=O.x,y.y=O.y,x.length>0)){const ae=U-S,fe=J-I;for(const ye of x)ye.position={x:ye.position.x-ae+z[0]*(B-A),y:ye.position.y-fe+z[1]*(ne-k)},D.push(ye)}if((Z||X)&&(O.width=Z?B:y.width,O.height=X?ne:y.height,y.width=O.width,y.height=O.height),M&&_.expandParent){const ae=z[0]*(O.width??0);O.x&&O.x<ae&&(y.x=ae,w.x=w.x-(O.x-ae));const fe=z[1]*(O.height??0);O.y&&O.y<fe&&(y.y=fe,w.y=w.y-(O.y-fe))}const ie=Ay({width:y.width,prevWidth:A,height:y.height,prevHeight:k,affectsX:v.affectsX,affectsY:v.affectsY}),Q={...y,direction:ie};(p==null?void 0:p(R,Q))!==!1&&(f==null||f(R,Q),r(O,D))}).on("end",R=>{m==null||m(R,{...y}),o==null||o()});i.call(N)}function a(){i.on(".drag",null)}return{update:s,destroy:a}}var au={exports:{}},cu={},uu={exports:{}},lu={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht=h;function Hy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zy=typeof Object.is=="function"?Object.is:Hy,By=Ht.useState,Vy=Ht.useEffect,Xy=Ht.useLayoutEffect,Yy=Ht.useDebugValue;function Wy(e,t){var n=t(),r=By({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return Xy(function(){o.value=n,o.getSnapshot=t,io(o)&&i({inst:o})},[e,n,t]),Vy(function(){return io(o)&&i({inst:o}),e(function(){io(o)&&i({inst:o})})},[e]),Yy(n),n}function io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zy(e,n)}catch{return!0}}function Gy(e,t){return t()}var Uy=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Gy:Wy;lu.useSyncExternalStore=Ht.useSyncExternalStore!==void 0?Ht.useSyncExternalStore:Uy;uu.exports=lu;var Ky=uu.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rr=h,qy=Ky;function Zy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qy=typeof Object.is=="function"?Object.is:Zy,Jy=qy.useSyncExternalStore,e1=Rr.useRef,t1=Rr.useEffect,n1=Rr.useMemo,r1=Rr.useDebugValue;cu.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=e1(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=n1(function(){function c(m){if(!u){if(u=!0,d=m,m=r(m),o!==void 0&&s.hasValue){var p=s.value;if(o(p,m))return l=p}return l=m}if(p=l,Qy(d,m))return p;var y=r(m);return o!==void 0&&o(p,y)?(d=m,p):(d=m,l=y)}var u=!1,d,l,f=n===void 0?null:n;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,n,r,o]);var a=Jy(e,i[0],i[1]);return t1(function(){s.hasValue=!0,s.value=a},[a]),r1(a),a};au.exports=cu;var o1=au.exports;const i1=Kd(o1),s1={},xs=e=>{let t;const n=new Set,r=(d,l)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=l??(typeof f!="object"||f===null)?f:Object.assign({},t,f),n.forEach(p=>p(t,m))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(s1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,c);return c},a1=e=>e?xs(e):xs,{useDebugValue:c1}=_e,{useSyncExternalStoreWithSelector:u1}=i1,l1=e=>e;function du(e,t=l1,n){const r=u1(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return c1(r),r}const vs=(e,t)=>{const n=a1(e),r=(o,i=t)=>du(n,o,i);return Object.assign(r,n),r},d1=(e,t)=>e?vs(e,t):vs;function ge(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Dr=h.createContext(null),f1=Dr.Provider,fu=Qe.error001();function de(e,t){const n=h.useContext(Dr);if(n===null)throw new Error(fu);return du(n,e,t)}function pe(){const e=h.useContext(Dr);if(e===null)throw new Error(fu);return h.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const ws={display:"none"},h1={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},hu="react-flow__node-desc",mu="react-flow__edge-desc",m1="react-flow__aria-live",p1=e=>e.ariaLiveMessage;function g1({rfId:e}){const t=de(p1);return g.jsx("div",{id:`${m1}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:h1,children:t})}function y1({rfId:e,disableKeyboardA11y:t}){return g.jsxs(g.Fragment,{children:[g.jsxs("div",{id:`${hu}-${e}`,style:ws,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),g.jsx("div",{id:`${mu}-${e}`,style:ws,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&g.jsx(g1,{rfId:e})]})}const x1=e=>e.userSelectionActive?"none":"all",ui=h.forwardRef(({position:e="top-left",children:t,className:n,style:r,...o},i)=>{const s=de(x1),a=`${e}`.split("-");return g.jsx("div",{className:xe(["react-flow__panel",n,...a]),style:{...r,pointerEvents:s},ref:i,...o,children:t})});function v1({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:g.jsx(ui,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const w1=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Bn=e=>e.id;function b1(e,t){return ge(e.selectedNodes.map(Bn),t.selectedNodes.map(Bn))&&ge(e.selectedEdges.map(Bn),t.selectedEdges.map(Bn))}function C1({onSelectionChange:e}){const t=pe(),{selectedNodes:n,selectedEdges:r}=de(w1,b1);return h.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(i=>i(o))},[n,r,e]),null}const _1=e=>!!e.onSelectionChangeHandlers;function E1({onSelectionChange:e}){const t=de(_1);return e||t?g.jsx(C1,{onSelectionChange:e}):null}const pu=[0,0],S1={x:0,y:0,zoom:1},M1=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],bs=[...M1,"rfId"],N1=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),Cs={translateExtent:pn,nodeOrigin:pu,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function T1(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:s,reset:a,setDefaultNodesAndEdges:c,setPaneClickDistance:u}=de(N1,ge),d=pe();h.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{l.current=Cs,a()}),[]);const l=h.useRef(Cs);return h.useEffect(()=>{for(const f of bs){const m=e[f],p=l.current[f];m!==p&&(typeof e[f]>"u"||(f==="nodes"?t(m):f==="edges"?n(m):f==="minZoom"?r(m):f==="maxZoom"?o(m):f==="translateExtent"?i(m):f==="nodeExtent"?s(m):f==="paneClickDistance"?u(m):f==="fitView"?d.setState({fitViewOnInit:m}):f==="fitViewOptions"?d.setState({fitViewOnInitOptions:m}):d.setState({[f]:m})))}l.current=e},bs.map(f=>e[f])),null}function _s(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function k1(e){var r;const[t,n]=h.useState(e==="system"?null:e);return h.useEffect(()=>{if(e!=="system"){n(e);return}const o=_s(),i=()=>n(o!=null&&o.matches?"dark":"light");return i(),o==null||o.addEventListener("change",i),()=>{o==null||o.removeEventListener("change",i)}},[e]),t!==null?t:(r=_s())!=null&&r.matches?"dark":"light"}const Es=typeof document<"u"?document:null;function vn(e=null,t={target:Es,actInsideInputWithModifier:!0}){const[n,r]=h.useState(!1),o=h.useRef(!1),i=h.useRef(new Set([])),[s,a]=h.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(l=>typeof l=="string").map(l=>l.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=u.reduce((l,f)=>l.concat(...f),[]);return[u,d]}return[[],[]]},[e]);return h.useEffect(()=>{const c=(t==null?void 0:t.target)||Es;if(e!==null){const u=f=>{if(o.current=f.ctrlKey||f.metaKey||f.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Lo(f))return!1;const p=Ms(f.code,a);i.current.add(f[p]),Ss(s,i.current,!1)&&(f.preventDefault(),r(!0))},d=f=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Lo(f))return!1;const p=Ms(f.code,a);Ss(s,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(f[p]),f.key==="Meta"&&i.current.clear(),o.current=!1},l=()=>{i.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",u),c==null||c.addEventListener("keyup",d),window.addEventListener("blur",l),window.addEventListener("contextmenu",l),()=>{c==null||c.removeEventListener("keydown",u),c==null||c.removeEventListener("keyup",d),window.removeEventListener("blur",l),window.removeEventListener("contextmenu",l)}}},[e,r]),n}function Ss(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Ms(e,t){return t.includes(e)?"code":"key"}const R1=()=>{const e=pe();return h.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:s}=e.getState();return s?(await s.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:o,panZoom:i,domNode:s}=e.getState();if(!i||!s)return Promise.resolve(!1);const a=Po(n,t),{width:c,height:u}=Tr(s);return jo({nodes:a,width:c,height:u,minZoom:r,maxZoom:o,panZoom:i},t)},setCenter:async(t,n,r)=>{const{width:o,height:i,maxZoom:s,panZoom:a}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:s,u=o/2-t*c,d=i/2-n*c;return a?(await a.setViewport({x:u,y:d,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:s,panZoom:a}=e.getState(),c=oi(t,r,o,i,s,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:o,domNode:i}=e.getState();if(!i)return t;const{x:s,y:a}=i.getBoundingClientRect(),c={x:t.x-s,y:t.y-a};return Nn(c,r,n.snapToGrid,o)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),s=Bc(t,n);return{x:s.x+o,y:s.y+i}}}),[])};function gu(e,t){const n=[],r=new Map,o=[];for(const i of e)if(i.type==="add"){o.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const s=r.get(i.id);s?s.push(i):r.set(i.id,[i])}for(const i of t){const s=r.get(i.id);if(!s){n.push(i);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){n.push({...s[0].item});continue}const a={...i};for(const c of s)D1(c,a);n.push(a)}return o.length&&o.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function D1(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function yu(e,t){return gu(e,t)}function xu(e,t){return gu(e,t)}function mt(e,t){return{id:e,type:"select",selected:t}}function Nt(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const s=t.has(o);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),r.push(mt(i.id,s)))}return r}function Ns({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const a=t.get(s.id),c=((o=a==null?void 0:a.internals)==null?void 0:o.userNode)??a;c!==void 0&&c!==s&&n.push({id:s.id,item:s,type:"replace"}),c===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function Ts(e){return{id:e.id,type:"remove"}}const ks=e=>G0(e),I1=e=>$c(e);function vu(e){return h.forwardRef(e)}const A1=typeof window<"u"?h.useLayoutEffect:h.useEffect;function Rs(e){const[t,n]=h.useState(BigInt(0)),[r]=h.useState(()=>P1(()=>n(o=>o+BigInt(1))));return A1(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function P1(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const wu=h.createContext(null);function j1({children:e}){const t=pe(),n=h.useCallback(a=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:d,onNodesChange:l,nodeLookup:f}=t.getState();let m=c;for(const p of a)m=typeof p=="function"?p(m):p;d?u(m):l&&l(Ns({items:m,lookup:f}))},[]),r=Rs(n),o=h.useCallback(a=>{const{edges:c=[],setEdges:u,hasDefaultEdges:d,onEdgesChange:l,edgeLookup:f}=t.getState();let m=c;for(const p of a)m=typeof p=="function"?p(m):p;d?u(m):l&&l(Ns({items:m,lookup:f}))},[]),i=Rs(o),s=h.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return g.jsx(wu.Provider,{value:s,children:e})}function $1(){const e=h.useContext(wu);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const L1=e=>!!e.panZoom;function li(){const e=R1(),t=pe(),n=$1(),r=de(L1),o=h.useMemo(()=>{const i=l=>t.getState().nodeLookup.get(l),s=l=>{n.nodeQueue.push(l)},a=l=>{n.edgeQueue.push(l)},c=l=>{var v,_;const{nodeLookup:f,nodeOrigin:m}=t.getState(),p=ks(l)?l:f.get(l.id),y=p.parentId?Xc(p.position,p.measured,p.parentId,f,m):p.position,w={...p,position:y,width:((v=p.measured)==null?void 0:v.width)??p.width,height:((_=p.measured)==null?void 0:_.height)??p.height};return Ot(w)},u=(l,f,m={replace:!1})=>{s(p=>p.map(y=>{if(y.id===l){const w=typeof f=="function"?f(y):f;return m.replace&&ks(w)?w:{...y,...w}}return y}))},d=(l,f,m={replace:!1})=>{a(p=>p.map(y=>{if(y.id===l){const w=typeof f=="function"?f(y):f;return m.replace&&I1(w)?w:{...y,...w}}return y}))};return{getNodes:()=>t.getState().nodes.map(l=>({...l})),getNode:l=>{var f;return(f=i(l))==null?void 0:f.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:l=[]}=t.getState();return l.map(f=>({...f}))},getEdge:l=>t.getState().edgeLookup.get(l),setNodes:s,setEdges:a,addNodes:l=>{const f=Array.isArray(l)?l:[l];n.nodeQueue.push(m=>[...m,...f])},addEdges:l=>{const f=Array.isArray(l)?l:[l];n.edgeQueue.push(m=>[...m,...f])},toObject:()=>{const{nodes:l=[],edges:f=[],transform:m}=t.getState(),[p,y,w]=m;return{nodes:l.map(v=>({...v})),edges:f.map(v=>({...v})),viewport:{x:p,y,zoom:w}}},deleteElements:async({nodes:l=[],edges:f=[]})=>{const{nodes:m,edges:p,onNodesDelete:y,onEdgesDelete:w,triggerNodeChanges:v,triggerEdgeChanges:_,onDelete:b,onBeforeDelete:x}=t.getState(),{nodes:M,edges:j}=await q0({nodesToRemove:l,edgesToRemove:f,nodes:m,edges:p,onBeforeDelete:x}),E=j.length>0,N=M.length>0;if(E){const R=j.map(Ts);w==null||w(j),_(R)}if(N){const R=M.map(Ts);y==null||y(M),v(R)}return(N||E)&&(b==null||b({nodes:M,edges:j})),{deletedNodes:M,deletedEdges:j}},getIntersectingNodes:(l,f=!0,m)=>{const p=ss(l),y=p?l:c(l),w=m!==void 0;return y?(m||t.getState().nodes).filter(v=>{const _=t.getState().nodeLookup.get(v.id);if(_&&!p&&(v.id===l.id||!_.internals.positionAbsolute))return!1;const b=Ot(w?v:_),x=yn(b,y);return f&&x>0||x>=y.width*y.height}):[]},isNodeIntersecting:(l,f,m=!0)=>{const y=ss(l)?l:c(l);if(!y)return!1;const w=yn(y,f);return m&&w>0||w>=y.width*y.height},updateNode:u,updateNodeData:(l,f,m={replace:!1})=>{u(l,p=>{const y=typeof f=="function"?f(p):f;return m.replace?{...p,data:y}:{...p,data:{...p.data,...y}}},m)},updateEdge:d,updateEdgeData:(l,f,m={replace:!1})=>{d(l,p=>{const y=typeof f=="function"?f(p):f;return m.replace?{...p,data:y}:{...p,data:{...p.data,...y}}},m)},getNodesBounds:l=>{const{nodeLookup:f,nodeOrigin:m}=t.getState();return U0(l,{nodeLookup:f,nodeOrigin:m})},getHandleConnections:({type:l,id:f,nodeId:m})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${m}-${l}${f?`-${f}`:""}`))==null?void 0:p.values())??[])},getNodeConnections:({type:l,handleId:f,nodeId:m})=>{var p;return Array.from(((p=t.getState().connectionLookup.get(`${m}${l?f?`-${l}-${f}`:`-${l}`:""}`))==null?void 0:p.values())??[])}}},[]);return h.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const Ds=e=>e.selected,O1={actInsideInputWithModifier:!1},F1=typeof window<"u"?window:void 0;function H1({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=pe(),{deleteElements:r}=li(),o=vn(e,O1),i=vn(t,{target:F1});h.useEffect(()=>{if(o){const{edges:s,nodes:a}=n.getState();r({nodes:a.filter(Ds),edges:s.filter(Ds)}),n.setState({nodesSelectionActive:!1})}},[o]),h.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function z1(e){const t=pe();h.useEffect(()=>{const n=()=>{var o,i;if(!e.current)return!1;const r=Tr(e.current);(r.height===0||r.width===0)&&((i=(o=t.getState()).onError)==null||i.call(o,"004",Qe.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Ir={position:"absolute",width:"100%",height:"100%",top:0,left:0},B1=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function V1({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=xt.Free,zoomOnDoubleClick:s=!0,panOnDrag:a=!0,defaultViewport:c,translateExtent:u,minZoom:d,maxZoom:l,zoomActivationKeyCode:f,preventScrolling:m=!0,children:p,noWheelClassName:y,noPanClassName:w,onViewportChange:v,isControlledViewport:_,paneClickDistance:b}){const x=pe(),M=h.useRef(null),{userSelectionActive:j,lib:E}=de(B1,ge),N=vn(f),R=h.useRef();z1(M);const P=h.useCallback($=>{v==null||v({x:$[0],y:$[1],zoom:$[2]}),_||x.setState({transform:$})},[v,_]);return h.useEffect(()=>{if(M.current){R.current=Ry({domNode:M.current,minZoom:d,maxZoom:l,translateExtent:u,viewport:c,paneClickDistance:b,onDraggingChange:C=>x.setState({paneDragging:C}),onPanZoomStart:(C,D)=>{const{onViewportChangeStart:S,onMoveStart:I}=x.getState();I==null||I(C,D),S==null||S(D)},onPanZoom:(C,D)=>{const{onViewportChange:S,onMove:I}=x.getState();I==null||I(C,D),S==null||S(D)},onPanZoomEnd:(C,D)=>{const{onViewportChangeEnd:S,onMoveEnd:I}=x.getState();I==null||I(C,D),S==null||S(D)}});const{x:$,y:L,zoom:F}=R.current.getViewport();return x.setState({panZoom:R.current,transform:[$,L,F],domNode:M.current.closest(".react-flow")}),()=>{var C;(C=R.current)==null||C.destroy()}}},[]),h.useEffect(()=>{var $;($=R.current)==null||$.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:s,panOnDrag:a,zoomActivationKeyPressed:N,preventScrolling:m,noPanClassName:w,userSelectionActive:j,noWheelClassName:y,lib:E,onTransformChange:P})},[e,t,n,r,o,i,s,a,N,m,w,j,y,E,P]),g.jsx("div",{className:"react-flow__renderer",ref:M,style:Ir,children:p})}const X1=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Y1(){const{userSelectionActive:e,userSelectionRect:t}=de(X1,ge);return e&&t?g.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const so=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},W1=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function G1({isSelecting:e,selectionKeyPressed:t,selectionMode:n=gn.Full,panOnDrag:r,selectionOnDrag:o,onSelectionStart:i,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:c,onPaneScroll:u,onPaneMouseEnter:d,onPaneMouseMove:l,onPaneMouseLeave:f,children:m}){const p=pe(),{userSelectionActive:y,elementsSelectable:w,dragging:v}=de(W1,ge),_=w&&(e||y),b=h.useRef(null),x=h.useRef(),M=h.useRef(new Set),j=h.useRef(new Set),E=h.useRef(!1),N=h.useRef(!1),R=S=>{if(E.current){E.current=!1;return}a==null||a(S),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},P=S=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){S.preventDefault();return}c==null||c(S)},$=u?S=>u(S):void 0,L=S=>{var z,B;const{resetSelectedElements:I,domNode:A}=p.getState();if(x.current=A==null?void 0:A.getBoundingClientRect(),!w||!e||S.button!==0||S.target!==b.current||!x.current)return;(B=(z=S.target)==null?void 0:z.setPointerCapture)==null||B.call(z,S.pointerId),N.current=!0,E.current=!1;const{x:k,y:O}=qe(S.nativeEvent,x.current);I(),p.setState({userSelectionRect:{width:0,height:0,startX:k,startY:O,x:k,y:O}}),i==null||i(S)},F=S=>{const{userSelectionRect:I,transform:A,nodeLookup:k,edgeLookup:O,connectionLookup:z,triggerNodeChanges:B,triggerEdgeChanges:ne,defaultEdgeOptions:U}=p.getState();if(!x.current||!I)return;E.current=!0;const{x:J,y:Z}=qe(S.nativeEvent,x.current),{startX:X,startY:V}=I,ee={startX:X,startY:V,x:J<X?J:X,y:Z<V?Z:V,width:Math.abs(J-X),height:Math.abs(Z-V)},ie=M.current,Q=j.current;M.current=new Set(Lc(k,ee,A,n===gn.Partial,!0).map(ae=>ae.id)),j.current=new Set;const te=(U==null?void 0:U.selectable)??!0;for(const ae of M.current){const fe=z.get(ae);if(fe)for(const{edgeId:ye}of fe.values()){const ve=O.get(ye);ve&&(ve.selectable??te)&&j.current.add(ye)}}if(!as(ie,M.current)){const ae=Nt(k,M.current,!0);B(ae)}if(!as(Q,j.current)){const ae=Nt(O,j.current);ne(ae)}p.setState({userSelectionRect:ee,userSelectionActive:!0,nodesSelectionActive:!1})},C=S=>{var A,k;if(S.button!==0||!N.current)return;(k=(A=S.target)==null?void 0:A.releasePointerCapture)==null||k.call(A,S.pointerId);const{userSelectionRect:I}=p.getState();!y&&I&&S.target===b.current&&(R==null||R(S)),p.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:M.current.size>0}),s==null||s(S),(t||o)&&(E.current=!1),N.current=!1},D=r===!0||Array.isArray(r)&&r.includes(0);return g.jsxs("div",{className:xe(["react-flow__pane",{draggable:D,dragging:v,selection:e}]),onClick:_?void 0:so(R,b),onContextMenu:so(P,b),onWheel:so($,b),onPointerEnter:_?void 0:d,onPointerDown:_?L:l,onPointerMove:_?F:l,onPointerUp:_?C:void 0,onPointerLeave:f,ref:b,style:Ir,children:[m,g.jsx(Y1,{})]})}function Bo({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeLookup:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Qe.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.blur()})):o([e])}function bu({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:s}){const a=pe(),[c,u]=h.useState(!1),d=h.useRef();return h.useEffect(()=>{d.current=gy({getStoreItems:()=>a.getState(),onNodeMouseDown:l=>{Bo({id:l,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),h.useEffect(()=>{var l,f;if(t)(l=d.current)==null||l.destroy();else if(e.current)return(f=d.current)==null||f.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:s}),()=>{var m;(m=d.current)==null||m.destroy()}},[n,r,t,i,e,o]),c}const U1=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Cu(){const e=pe();return h.useCallback(n=>{const{nodeExtent:r,snapToGrid:o,snapGrid:i,nodesDraggable:s,onError:a,updateNodePositions:c,nodeLookup:u,nodeOrigin:d}=e.getState(),l=new Map,f=U1(s),m=o?i[0]:5,p=o?i[1]:5,y=n.direction.x*m*n.factor,w=n.direction.y*p*n.factor;for(const[,v]of u){if(!f(v))continue;let _={x:v.internals.positionAbsolute.x+y,y:v.internals.positionAbsolute.y+w};o&&(_=Nr(_,i));const{position:b,positionAbsolute:x}=Oc({nodeId:v.id,nextPosition:_,nodeLookup:u,nodeExtent:r,nodeOrigin:d,onError:a});v.position=b,v.internals.positionAbsolute=x,l.set(v.id,v)}c(l)},[])}const di=h.createContext(null),K1=di.Provider;di.Consumer;const _u=()=>h.useContext(di),q1=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Z1=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:s}=r,{fromHandle:a,toHandle:c,isValid:u}=s,d=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:d,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:i===$t.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,valid:d&&u}};function Q1({type:e="source",position:t=re.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:c,className:u,onMouseDown:d,onTouchStart:l,...f},m){var C,D;const p=s||null,y=e==="target",w=pe(),v=_u(),{connectOnClick:_,noPanClassName:b,rfId:x}=de(q1,ge),{connectingFrom:M,connectingTo:j,clickConnecting:E,isPossibleEndHandle:N,connectionInProcess:R,valid:P}=de(Z1(v,p,e),ge);v||(D=(C=w.getState()).onError)==null||D.call(C,"010",Qe.error010());const $=S=>{const{defaultEdgeOptions:I,onConnect:A,hasDefaultEdges:k}=w.getState(),O={...I,...S};if(k){const{edges:z,setEdges:B}=w.getState();B(ry(O,z))}A==null||A(O),a==null||a(O)},L=S=>{if(!v)return;const I=Wc(S.nativeEvent);if(o&&(I&&S.button===0||!I)){const A=w.getState();zo.onPointerDown(S.nativeEvent,{autoPanOnConnect:A.autoPanOnConnect,connectionMode:A.connectionMode,connectionRadius:A.connectionRadius,domNode:A.domNode,nodeLookup:A.nodeLookup,lib:A.lib,isTarget:y,handleId:p,nodeId:v,flowId:A.rfId,panBy:A.panBy,cancelConnection:A.cancelConnection,onConnectStart:A.onConnectStart,onConnectEnd:A.onConnectEnd,updateConnection:A.updateConnection,onConnect:$,isValidConnection:n||A.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:A.autoPanSpeed})}I?d==null||d(S):l==null||l(S)},F=S=>{const{onClickConnectStart:I,onClickConnectEnd:A,connectionClickStartHandle:k,connectionMode:O,isValidConnection:z,lib:B,rfId:ne,nodeLookup:U,connection:J}=w.getState();if(!v||!k&&!o)return;if(!k){I==null||I(S.nativeEvent,{nodeId:v,handleId:p,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:v,type:e,id:p}});return}const Z=Yc(S.target),X=n||z,{connection:V,isValid:ee}=zo.isValid(S.nativeEvent,{handle:{nodeId:v,id:p,type:e},connectionMode:O,fromNodeId:k.nodeId,fromHandleId:k.id||null,fromType:k.type,isValidConnection:X,flowId:ne,doc:Z,lib:B,nodeLookup:U});ee&&V&&$(V);const ie=structuredClone(J);delete ie.inProgress,ie.toPosition=ie.toHandle?ie.toHandle.position:null,A==null||A(S,ie),w.setState({connectionClickStartHandle:null})};return g.jsx("div",{"data-handleid":p,"data-nodeid":v,"data-handlepos":t,"data-id":`${x}-${v}-${p}-${e}`,className:xe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",b,u,{source:!y,target:y,connectable:r,connectablestart:o,connectableend:i,clickconnecting:E,connectingfrom:M,connectingto:j,valid:P,connectionindicator:r&&(!R||N)&&(R?i:o)}]),onMouseDown:L,onTouchStart:L,onClick:_?F:void 0,ref:m,...f,children:c})}const Oe=h.memo(vu(Q1));function J1({data:e,isConnectable:t,sourcePosition:n=re.Bottom}){return g.jsxs(g.Fragment,{children:[e==null?void 0:e.label,g.jsx(Oe,{type:"source",position:n,isConnectable:t})]})}function ex({data:e,isConnectable:t,targetPosition:n=re.Top,sourcePosition:r=re.Bottom}){return g.jsxs(g.Fragment,{children:[g.jsx(Oe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,g.jsx(Oe,{type:"source",position:r,isConnectable:t})]})}function tx(){return null}function nx({data:e,isConnectable:t,targetPosition:n=re.Top}){return g.jsxs(g.Fragment,{children:[g.jsx(Oe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const dr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Is={input:J1,default:ex,output:nx,group:tx};function rx(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const ox=e=>{const{width:t,height:n,x:r,y:o}=Mn(e.nodeLookup,{filter:i=>!!i.selected});return{width:Le(t)?t:null,height:Le(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function ix({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=pe(),{width:o,height:i,transformString:s,userSelectionActive:a}=de(ox,ge),c=Cu(),u=h.useRef(null);if(h.useEffect(()=>{var f;n||(f=u.current)==null||f.focus({preventScroll:!0})},[n]),bu({nodeRef:u}),a||!o||!i)return null;const d=e?f=>{const m=r.getState().nodes.filter(p=>p.selected);e(f,m)}:void 0,l=f=>{Object.prototype.hasOwnProperty.call(dr,f.key)&&(f.preventDefault(),c({direction:dr[f.key],factor:f.shiftKey?4:1}))};return g.jsx("div",{className:xe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:s},children:g.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:l,style:{width:o,height:i}})})}const As=typeof window<"u"?window:void 0,sx=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Eu({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,paneClickDistance:a,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:d,selectionMode:l,onSelectionStart:f,onSelectionEnd:m,multiSelectionKeyCode:p,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:v,zoomOnScroll:_,zoomOnPinch:b,panOnScroll:x,panOnScrollSpeed:M,panOnScrollMode:j,zoomOnDoubleClick:E,panOnDrag:N,defaultViewport:R,translateExtent:P,minZoom:$,maxZoom:L,preventScrolling:F,onSelectionContextMenu:C,noWheelClassName:D,noPanClassName:S,disableKeyboardA11y:I,onViewportChange:A,isControlledViewport:k}){const{nodesSelectionActive:O,userSelectionActive:z}=de(sx),B=vn(u,{target:As}),ne=vn(y,{target:As}),U=ne||N,J=ne||x,Z=d&&U!==!0,X=B||z||Z;return H1({deleteKeyCode:c,multiSelectionKeyCode:p}),g.jsx(V1,{onPaneContextMenu:i,elementsSelectable:v,zoomOnScroll:_,zoomOnPinch:b,panOnScroll:J,panOnScrollSpeed:M,panOnScrollMode:j,zoomOnDoubleClick:E,panOnDrag:!B&&U,defaultViewport:R,translateExtent:P,minZoom:$,maxZoom:L,zoomActivationKeyCode:w,preventScrolling:F,noWheelClassName:D,noPanClassName:S,onViewportChange:A,isControlledViewport:k,paneClickDistance:a,children:g.jsxs(G1,{onSelectionStart:f,onSelectionEnd:m,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:U,isSelecting:!!X,selectionMode:l,selectionKeyPressed:B,selectionOnDrag:Z,children:[e,O&&g.jsx(ix,{onSelectionContextMenu:C,noPanClassName:S,disableKeyboardA11y:I})]})})}Eu.displayName="FlowRenderer";const ax=h.memo(Eu),cx=e=>t=>e?Lc(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function ux(e){return de(h.useCallback(cx(e),[e]),ge)}const lx=e=>e.updateNodeInternals;function dx(){const e=de(lx),[t]=h.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const i=o.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:o.target,force:!0})}),e(r)}));return h.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function fx({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=pe(),i=h.useRef(null),s=h.useRef(null),a=h.useRef(e.sourcePosition),c=h.useRef(e.targetPosition),u=h.useRef(t),d=n&&!!e.internals.handleBounds;return h.useEffect(()=>{i.current&&!e.hidden&&(!d||s.current!==i.current)&&(s.current&&(r==null||r.unobserve(s.current)),r==null||r.observe(i.current),s.current=i.current)},[d,e.hidden]),h.useEffect(()=>()=>{s.current&&(r==null||r.unobserve(s.current),s.current=null)},[]),h.useEffect(()=>{if(i.current){const l=u.current!==t,f=a.current!==e.sourcePosition,m=c.current!==e.targetPosition;(l||f||m)&&(u.current=t,a.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function hx({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:s,nodesDraggable:a,elementsSelectable:c,nodesConnectable:u,nodesFocusable:d,resizeObserver:l,noDragClassName:f,noPanClassName:m,disableKeyboardA11y:p,rfId:y,nodeTypes:w,nodeExtent:v,nodeClickDistance:_,onError:b}){const{node:x,internals:M,isParent:j}=de(V=>{const ee=V.nodeLookup.get(e),ie=V.parentLookup.has(e);return{node:ee,internals:ee.internals,isParent:ie}},ge);let E=x.type||"default",N=(w==null?void 0:w[E])||Is[E];N===void 0&&(b==null||b("003",Qe.error003(E)),E="default",N=Is.default);const R=!!(x.draggable||a&&typeof x.draggable>"u"),P=!!(x.selectable||c&&typeof x.selectable>"u"),$=!!(x.connectable||u&&typeof x.connectable>"u"),L=!!(x.focusable||d&&typeof x.focusable>"u"),F=pe(),C=Vc(x),D=fx({node:x,nodeType:E,hasDimensions:C,resizeObserver:l}),S=bu({nodeRef:D,disabled:x.hidden||!R,noDragClassName:f,handleSelector:x.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:_}),I=Cu();if(x.hidden)return null;const A=Je(x),k=rx(x),O=P||R||t||n||r||o,z=n?V=>n(V,{...M.userNode}):void 0,B=r?V=>r(V,{...M.userNode}):void 0,ne=o?V=>o(V,{...M.userNode}):void 0,U=i?V=>i(V,{...M.userNode}):void 0,J=s?V=>s(V,{...M.userNode}):void 0,Z=V=>{const{selectNodesOnDrag:ee,nodeDragThreshold:ie}=F.getState();P&&(!ee||!R||ie>0)&&Bo({id:e,store:F,nodeRef:D}),t&&t(V,{...M.userNode})},X=V=>{if(!(Lo(V.nativeEvent)||p))if(Ac.includes(V.key)&&P){const ee=V.key==="Escape";Bo({id:e,store:F,unselect:ee,nodeRef:D})}else R&&x.selected&&Object.prototype.hasOwnProperty.call(dr,V.key)&&(V.preventDefault(),F.setState({ariaLiveMessage:`Moved selected node ${V.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~M.positionAbsolute.x}, y: ${~~M.positionAbsolute.y}`}),I({direction:dr[V.key],factor:V.shiftKey?4:1}))};return g.jsx("div",{className:xe(["react-flow__node",`react-flow__node-${E}`,{[m]:R},x.className,{selected:x.selected,selectable:P,parent:j,draggable:R,dragging:S}]),ref:D,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:O?"all":"none",visibility:C?"visible":"hidden",...x.style,...k},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:B,onMouseLeave:ne,onContextMenu:U,onClick:Z,onDoubleClick:J,onKeyDown:L?X:void 0,tabIndex:L?0:void 0,role:L?"button":void 0,"aria-describedby":p?void 0:`${hu}-${y}`,"aria-label":x.ariaLabel,children:g.jsx(K1,{value:e,children:g.jsx(N,{id:e,data:x.data,type:E,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:x.selected??!1,selectable:P,draggable:R,deletable:x.deletable??!0,isConnectable:$,sourcePosition:x.sourcePosition,targetPosition:x.targetPosition,dragging:S,dragHandle:x.dragHandle,zIndex:M.z,parentId:x.parentId,...A})})})}const mx=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Su(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=de(mx,ge),s=ux(e.onlyRenderVisibleElements),a=dx();return g.jsx("div",{className:"react-flow__nodes",style:Ir,children:s.map(c=>g.jsx(hx,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},c))})}Su.displayName="NodeRenderer";const px=h.memo(Su);function gx(e){return de(h.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const r=[];if(n.width&&n.height)for(const o of n.edges){const i=n.nodeLookup.get(o.source),s=n.nodeLookup.get(o.target);i&&s&&ey({sourceNode:i,targetNode:s,width:n.width,height:n.height,transform:n.transform})&&r.push(o.id)}return r},[e]),ge)}const yx=({color:e="none",strokeWidth:t=1})=>g.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),xx=({color:e="none",strokeWidth:t=1})=>g.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Ps={[cr.Arrow]:yx,[cr.ArrowClosed]:xx};function vx(e){const t=pe();return h.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(Ps,e)?Ps[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",Qe.error009(e)),null)},[e])}const wx=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=vx(t);return c?g.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:g.jsx(c,{color:n,strokeWidth:s})}):null},Mu=({defaultColor:e,rfId:t})=>{const n=de(i=>i.edges),r=de(i=>i.defaultEdgeOptions),o=h.useMemo(()=>cy(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?g.jsx("svg",{className:"react-flow__marker",children:g.jsx("defs",{children:o.map(i=>g.jsx(wx,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};Mu.displayName="MarkerDefinitions";var bx=h.memo(Mu);function Nu({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...d}){const[l,f]=h.useState({x:1,y:0,width:0,height:0}),m=xe(["react-flow__edge-textwrapper",u]),p=h.useRef(null);return h.useEffect(()=>{if(p.current){const y=p.current.getBBox();f({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:g.jsxs("g",{transform:`translate(${e-l.width/2} ${t-l.height/2})`,className:m,visibility:l.width?"visible":"hidden",...d,children:[o&&g.jsx("rect",{width:l.width+2*s[0],x:-s[0],y:-s[1],height:l.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),g.jsx("text",{className:"react-flow__edge-text",y:l.height/2,dy:"0.3em",ref:p,style:r,children:n}),c]})}Nu.displayName="EdgeText";const Cx=h.memo(Nu);function Ar({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:c,interactionWidth:u=20,...d}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{...d,d:e,fill:"none",className:xe(["react-flow__edge-path",d.className])}),u&&g.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}),r&&Le(t)&&Le(n)?g.jsx(Cx,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:c}):null]})}function js({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===re.Left||e===re.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Tu({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:r,targetY:o,targetPosition:i=re.Top}){const[s,a]=js({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,u]=js({pos:i,x1:r,y1:o,x2:e,y2:t}),[d,l,f,m]=Gc({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${a} ${c},${u} ${r},${o}`,d,l,f,m]}function ku(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=re.Bottom,targetPosition:a=re.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,interactionWidth:v})=>{const[_,b,x]=Tu({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a}),M=e.isInternal?void 0:t;return g.jsx(Ar,{id:M,path:_,labelX:b,labelY:x,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,interactionWidth:v})})}const _x=ku({isInternal:!1}),Ru=ku({isInternal:!0});_x.displayName="SimpleBezierEdge";Ru.displayName="SimpleBezierEdgeInternal";function Du(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,sourcePosition:m=re.Bottom,targetPosition:p=re.Top,markerEnd:y,markerStart:w,pathOptions:v,interactionWidth:_})=>{const[b,x,M]=Oo({sourceX:n,sourceY:r,sourcePosition:m,targetX:o,targetY:i,targetPosition:p,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset}),j=e.isInternal?void 0:t;return g.jsx(Ar,{id:j,path:b,labelX:x,labelY:M,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:y,markerStart:w,interactionWidth:_})})}const Iu=Du({isInternal:!1}),Au=Du({isInternal:!0});Iu.displayName="SmoothStepEdge";Au.displayName="SmoothStepEdgeInternal";function Pu(e){return h.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return g.jsx(Iu,{...n,id:r,pathOptions:h.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const Ex=Pu({isInternal:!1}),ju=Pu({isInternal:!0});Ex.displayName="StepEdge";ju.displayName="StepEdgeInternal";function $u(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:m,markerStart:p,interactionWidth:y})=>{const[w,v,_]=qc({sourceX:n,sourceY:r,targetX:o,targetY:i}),b=e.isInternal?void 0:t;return g.jsx(Ar,{id:b,path:w,labelX:v,labelY:_,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:m,markerStart:p,interactionWidth:y})})}const Sx=$u({isInternal:!1}),Lu=$u({isInternal:!0});Sx.displayName="StraightEdge";Lu.displayName="StraightEdgeInternal";function Ou(e){return h.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:s=re.Bottom,targetPosition:a=re.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,pathOptions:v,interactionWidth:_})=>{const[b,x,M]=Uc({sourceX:n,sourceY:r,sourcePosition:s,targetX:o,targetY:i,targetPosition:a,curvature:v==null?void 0:v.curvature}),j=e.isInternal?void 0:t;return g.jsx(Ar,{id:j,path:b,labelX:x,labelY:M,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:w,interactionWidth:_})})}const Mx=Ou({isInternal:!1}),Fu=Ou({isInternal:!0});Mx.displayName="BezierEdge";Fu.displayName="BezierEdgeInternal";const $s={default:Fu,straight:Lu,step:ju,smoothstep:Au,simplebezier:Ru},Ls={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Nx=(e,t,n)=>n===re.Left?e-t:n===re.Right?e+t:e,Tx=(e,t,n)=>n===re.Top?e-t:n===re.Bottom?e+t:e,Os="react-flow__edgeupdater";function Fs({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:s,type:a}){return g.jsx("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:s,className:xe([Os,`${Os}-${a}`]),cx:Nx(t,r,e),cy:Tx(n,r,e),r,stroke:"transparent",fill:"transparent"})}function kx({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:s,sourcePosition:a,targetPosition:c,onReconnect:u,onReconnectStart:d,onReconnectEnd:l,setReconnecting:f,setUpdateHover:m}){const p=pe(),y=(x,M)=>{if(x.button!==0)return;const{autoPanOnConnect:j,domNode:E,isValidConnection:N,connectionMode:R,connectionRadius:P,lib:$,onConnectStart:L,onConnectEnd:F,cancelConnection:C,nodeLookup:D,rfId:S,panBy:I,updateConnection:A}=p.getState(),k=M.type==="target";f(!0),d==null||d(x,n,M.type);const O=(B,ne)=>{f(!1),l==null||l(B,n,M.type,ne)},z=B=>u==null?void 0:u(n,B);zo.onPointerDown(x.nativeEvent,{autoPanOnConnect:j,connectionMode:R,connectionRadius:P,domNode:E,handleId:M.id,nodeId:M.nodeId,nodeLookup:D,isTarget:k,edgeUpdaterType:M.type,lib:$,flowId:S,cancelConnection:C,panBy:I,isValidConnection:N,onConnect:z,onConnectStart:L,onConnectEnd:F,onReconnectEnd:O,updateConnection:A,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle})},w=x=>y(x,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),v=x=>y(x,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),_=()=>m(!0),b=()=>m(!1);return g.jsxs(g.Fragment,{children:[(e===!0||e==="source")&&g.jsx(Fs,{position:a,centerX:r,centerY:o,radius:t,onMouseDown:w,onMouseEnter:_,onMouseOut:b,type:"source"}),(e===!0||e==="target")&&g.jsx(Fs,{position:c,centerX:i,centerY:s,radius:t,onMouseDown:v,onMouseEnter:_,onMouseOut:b,type:"target"})]})}function Rx({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,reconnectRadius:d,onReconnect:l,onReconnectStart:f,onReconnectEnd:m,rfId:p,edgeTypes:y,noPanClassName:w,onError:v,disableKeyboardA11y:_}){let b=de(te=>te.edgeLookup.get(e));const x=de(te=>te.defaultEdgeOptions);b=x?{...x,...b}:b;let M=b.type||"default",j=(y==null?void 0:y[M])||$s[M];j===void 0&&(v==null||v("011",Qe.error011(M)),M="default",j=$s.default);const E=!!(b.focusable||t&&typeof b.focusable>"u"),N=typeof l<"u"&&(b.reconnectable||n&&typeof b.reconnectable>"u"),R=!!(b.selectable||r&&typeof b.selectable>"u"),P=h.useRef(null),[$,L]=h.useState(!1),[F,C]=h.useState(!1),D=pe(),{zIndex:S,sourceX:I,sourceY:A,targetX:k,targetY:O,sourcePosition:z,targetPosition:B}=de(h.useCallback(te=>{const ae=te.nodeLookup.get(b.source),fe=te.nodeLookup.get(b.target);if(!ae||!fe)return{zIndex:b.zIndex,...Ls};const ye=ay({id:e,sourceNode:ae,targetNode:fe,sourceHandle:b.sourceHandle||null,targetHandle:b.targetHandle||null,connectionMode:te.connectionMode,onError:v});return{zIndex:J0({selected:b.selected,zIndex:b.zIndex,sourceNode:ae,targetNode:fe,elevateOnSelect:te.elevateEdgesOnSelect}),...ye||Ls}},[b.source,b.target,b.sourceHandle,b.targetHandle,b.selected,b.zIndex]),ge),ne=h.useMemo(()=>b.markerStart?`url('#${Fo(b.markerStart,p)}')`:void 0,[b.markerStart,p]),U=h.useMemo(()=>b.markerEnd?`url('#${Fo(b.markerEnd,p)}')`:void 0,[b.markerEnd,p]);if(b.hidden||I===null||A===null||k===null||O===null)return null;const J=te=>{var ve;const{addSelectedEdges:ae,unselectNodesAndEdges:fe,multiSelectionActive:ye}=D.getState();R&&(D.setState({nodesSelectionActive:!1}),b.selected&&ye?(fe({nodes:[],edges:[b]}),(ve=P.current)==null||ve.blur()):ae([e])),o&&o(te,b)},Z=i?te=>{i(te,{...b})}:void 0,X=s?te=>{s(te,{...b})}:void 0,V=a?te=>{a(te,{...b})}:void 0,ee=c?te=>{c(te,{...b})}:void 0,ie=u?te=>{u(te,{...b})}:void 0,Q=te=>{var ae;if(!_&&Ac.includes(te.key)&&R){const{unselectNodesAndEdges:fe,addSelectedEdges:ye}=D.getState();te.key==="Escape"?((ae=P.current)==null||ae.blur(),fe({edges:[b]})):ye([e])}};return g.jsx("svg",{style:{zIndex:S},children:g.jsxs("g",{className:xe(["react-flow__edge",`react-flow__edge-${M}`,b.className,w,{selected:b.selected,animated:b.animated,inactive:!R&&!o,updating:$,selectable:R}]),onClick:J,onDoubleClick:Z,onContextMenu:X,onMouseEnter:V,onMouseMove:ee,onMouseLeave:ie,onKeyDown:E?Q:void 0,tabIndex:E?0:void 0,role:E?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":b.ariaLabel===null?void 0:b.ariaLabel||`Edge from ${b.source} to ${b.target}`,"aria-describedby":E?`${mu}-${p}`:void 0,ref:P,children:[!F&&g.jsx(j,{id:e,source:b.source,target:b.target,type:b.type,selected:b.selected,animated:b.animated,selectable:R,deletable:b.deletable??!0,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,sourceX:I,sourceY:A,targetX:k,targetY:O,sourcePosition:z,targetPosition:B,data:b.data,style:b.style,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerStart:ne,markerEnd:U,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth}),N&&g.jsx(kx,{edge:b,isReconnectable:N,reconnectRadius:d,onReconnect:l,onReconnectStart:f,onReconnectEnd:m,sourceX:I,sourceY:A,targetX:k,targetY:O,sourcePosition:z,targetPosition:B,setUpdateHover:L,setReconnecting:C})]})})}const Dx=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Hu({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:s,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,reconnectRadius:l,onEdgeDoubleClick:f,onReconnectStart:m,onReconnectEnd:p,disableKeyboardA11y:y}){const{edgesFocusable:w,edgesReconnectable:v,elementsSelectable:_,onError:b}=de(Dx,ge),x=gx(t);return g.jsxs("div",{className:"react-flow__edges",children:[g.jsx(bx,{defaultColor:e,rfId:n}),x.map(M=>g.jsx(Rx,{id:M,edgesFocusable:w,edgesReconnectable:v,elementsSelectable:_,noPanClassName:o,onReconnect:i,onContextMenu:s,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:d,reconnectRadius:l,onDoubleClick:f,onReconnectStart:m,onReconnectEnd:p,rfId:n,onError:b,edgeTypes:r,disableKeyboardA11y:y},M))]})}Hu.displayName="EdgeRenderer";const Ix=h.memo(Hu),Ax=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Px({children:e}){const t=de(Ax);return g.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function jx(e){const t=li(),n=h.useRef(!1);h.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const $x=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function Lx(e){const t=de($x),n=pe();return h.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Ox(e){return e.connection.inProgress?{...e.connection,to:Nn(e.connection.to,e.transform)}:{...e.connection}}function Fx(e){return Ox}function fi(e){const t=Fx();return de(t,ge)}const Hx=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function zx({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:i,height:s,isValid:a,inProgress:c}=de(Hx,ge);return!(i&&o&&c)?null:g.jsx("svg",{style:e,width:i,height:s,className:"react-flow__connectionline react-flow__container",children:g.jsx("g",{className:xe(["react-flow__connection",jc(a)]),children:g.jsx(zu,{style:t,type:n,CustomComponent:r,isValid:a})})})}const zu=({style:e,type:t=it.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:i,fromNode:s,fromHandle:a,fromPosition:c,to:u,toNode:d,toHandle:l,toPosition:f}=fi();if(!o)return;if(n)return g.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:s,fromHandle:a,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:f,connectionStatus:jc(r),toNode:d,toHandle:l});let m="";const p={sourceX:i.x,sourceY:i.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case it.Bezier:[m]=Uc(p);break;case it.SimpleBezier:[m]=Tu(p);break;case it.Step:[m]=Oo({...p,borderRadius:0});break;case it.SmoothStep:[m]=Oo(p);break;default:[m]=qc(p)}return g.jsx("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};zu.displayName="ConnectionLine";const Bx={};function Hs(e=Bx){h.useRef(e),pe(),h.useEffect(()=>{},[e])}function Vx(){pe(),h.useRef(!1),h.useEffect(()=>{},[])}function Bu({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:s,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:d,onSelectionContextMenu:l,onSelectionStart:f,onSelectionEnd:m,connectionLineType:p,connectionLineStyle:y,connectionLineComponent:w,connectionLineContainerStyle:v,selectionKeyCode:_,selectionOnDrag:b,selectionMode:x,multiSelectionKeyCode:M,panActivationKeyCode:j,zoomActivationKeyCode:E,deleteKeyCode:N,onlyRenderVisibleElements:R,elementsSelectable:P,defaultViewport:$,translateExtent:L,minZoom:F,maxZoom:C,preventScrolling:D,defaultMarkerColor:S,zoomOnScroll:I,zoomOnPinch:A,panOnScroll:k,panOnScrollSpeed:O,panOnScrollMode:z,zoomOnDoubleClick:B,panOnDrag:ne,onPaneClick:U,onPaneMouseEnter:J,onPaneMouseMove:Z,onPaneMouseLeave:X,onPaneScroll:V,onPaneContextMenu:ee,paneClickDistance:ie,nodeClickDistance:Q,onEdgeContextMenu:te,onEdgeMouseEnter:ae,onEdgeMouseMove:fe,onEdgeMouseLeave:ye,reconnectRadius:ve,onReconnect:ct,onReconnectStart:ut,onReconnectEnd:De,noDragClassName:lt,noWheelClassName:Xe,noPanClassName:Ye,disableKeyboardA11y:dt,nodeExtent:zt,rfId:ft,viewport:We,onViewportChange:et}){return Hs(e),Hs(t),Vx(),jx(n),Lx(We),g.jsx(ax,{onPaneClick:U,onPaneMouseEnter:J,onPaneMouseMove:Z,onPaneMouseLeave:X,onPaneContextMenu:ee,onPaneScroll:V,paneClickDistance:ie,deleteKeyCode:N,selectionKeyCode:_,selectionOnDrag:b,selectionMode:x,onSelectionStart:f,onSelectionEnd:m,multiSelectionKeyCode:M,panActivationKeyCode:j,zoomActivationKeyCode:E,elementsSelectable:P,zoomOnScroll:I,zoomOnPinch:A,zoomOnDoubleClick:B,panOnScroll:k,panOnScrollSpeed:O,panOnScrollMode:z,panOnDrag:ne,defaultViewport:$,translateExtent:L,minZoom:F,maxZoom:C,onSelectionContextMenu:l,preventScrolling:D,noDragClassName:lt,noWheelClassName:Xe,noPanClassName:Ye,disableKeyboardA11y:dt,onViewportChange:et,isControlledViewport:!!We,children:g.jsxs(Px,{children:[g.jsx(Ix,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:ct,onReconnectStart:ut,onReconnectEnd:De,onlyRenderVisibleElements:R,onEdgeContextMenu:te,onEdgeMouseEnter:ae,onEdgeMouseMove:fe,onEdgeMouseLeave:ye,reconnectRadius:ve,defaultMarkerColor:S,noPanClassName:Ye,disableKeyboardA11y:dt,rfId:ft}),g.jsx(zx,{style:y,type:p,component:w,containerStyle:v}),g.jsx("div",{className:"react-flow__edgelabel-renderer"}),g.jsx(px,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:d,nodeClickDistance:Q,onlyRenderVisibleElements:R,noPanClassName:Ye,noDragClassName:lt,disableKeyboardA11y:dt,nodeExtent:zt,rfId:ft}),g.jsx("div",{className:"react-flow__viewport-portal"})]})})}Bu.displayName="GraphView";const Xx=h.memo(Bu),zs=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c}={})=>{const u=new Map,d=new Map,l=new Map,f=new Map,m=r??t??[],p=n??e??[],y=a??[0,0],w=c??pn;Qc(l,f,m),Ho(p,u,d,{nodeOrigin:y,nodeExtent:w,elevateNodesOnSelect:!1});let v=[0,0,1];if(s&&o&&i){const _=Mn(u,{filter:j=>!!((j.width||j.initialWidth)&&(j.height||j.initialHeight))}),{x:b,y:x,zoom:M}=oi(_,o,i,.5,2,.1);v=[b,x,M]}return{rfId:"1",width:0,height:0,transform:v,nodes:p,nodeLookup:u,parentLookup:d,edges:m,edgeLookup:f,connectionLookup:l,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:pn,nodeExtent:w,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:$t.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:y,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Pc},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:Z0,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},Yx=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c})=>d1((u,d)=>({...zs({nodes:e,edges:t,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:l=>{const{nodeLookup:f,parentLookup:m,nodeOrigin:p,elevateNodesOnSelect:y}=d();Ho(l,f,m,{nodeOrigin:p,nodeExtent:c,elevateNodesOnSelect:y,checkEquality:!0}),u({nodes:l})},setEdges:l=>{const{connectionLookup:f,edgeLookup:m}=d();Qc(f,m,l),u({edges:l})},setDefaultNodesAndEdges:(l,f)=>{if(l){const{setNodes:m}=d();m(l),u({hasDefaultNodes:!0})}if(f){const{setEdges:m}=d();m(f),u({hasDefaultEdges:!0})}},updateNodeInternals:(l,f={triggerFitView:!0})=>{const{triggerNodeChanges:m,nodeLookup:p,parentLookup:y,fitViewOnInit:w,fitViewDone:v,fitViewOnInitOptions:_,domNode:b,nodeOrigin:x,nodeExtent:M,debug:j,fitViewSync:E}=d(),{changes:N,updatedInternals:R}=hy(l,p,y,b,x,M);if(R){if(ly(p,y,{nodeOrigin:x,nodeExtent:M}),f.triggerFitView){let P=v;!v&&w&&(P=E({..._,nodes:_==null?void 0:_.nodes})),u({fitViewDone:P})}else u({});(N==null?void 0:N.length)>0&&(j&&console.log("React Flow: trigger node changes",N),m==null||m(N))}},updateNodePositions:(l,f=!1)=>{const m=[],p=[];for(const[y,w]of l){const v=!!(w!=null&&w.expandParent&&(w!=null&&w.parentId)&&(w!=null&&w.position)),_={id:y,type:"position",position:v?{x:Math.max(0,w.position.x),y:Math.max(0,w.position.y)}:w.position,dragging:f};v&&m.push({id:y,parentId:w.parentId,rect:{...w.internals.positionAbsolute,width:w.measured.width,height:w.measured.height}}),p.push(_)}if(m.length>0){const{nodeLookup:y,parentLookup:w,nodeOrigin:v}=d(),_=ci(m,y,w,v);p.push(..._)}d().triggerNodeChanges(p)},triggerNodeChanges:l=>{const{onNodesChange:f,setNodes:m,nodes:p,hasDefaultNodes:y,debug:w}=d();if(l!=null&&l.length){if(y){const v=yu(l,p);m(v)}w&&console.log("React Flow: trigger node changes",l),f==null||f(l)}},triggerEdgeChanges:l=>{const{onEdgesChange:f,setEdges:m,edges:p,hasDefaultEdges:y,debug:w}=d();if(l!=null&&l.length){if(y){const v=xu(l,p);m(v)}w&&console.log("React Flow: trigger edge changes",l),f==null||f(l)}},addSelectedNodes:l=>{const{multiSelectionActive:f,edgeLookup:m,nodeLookup:p,triggerNodeChanges:y,triggerEdgeChanges:w}=d();if(f){const v=l.map(_=>mt(_,!0));y(v);return}y(Nt(p,new Set([...l]),!0)),w(Nt(m))},addSelectedEdges:l=>{const{multiSelectionActive:f,edgeLookup:m,nodeLookup:p,triggerNodeChanges:y,triggerEdgeChanges:w}=d();if(f){const v=l.map(_=>mt(_,!0));w(v);return}w(Nt(m,new Set([...l]))),y(Nt(p,new Set,!0))},unselectNodesAndEdges:({nodes:l,edges:f}={})=>{const{edges:m,nodes:p,nodeLookup:y,triggerNodeChanges:w,triggerEdgeChanges:v}=d(),_=l||p,b=f||m,x=_.map(j=>{const E=y.get(j.id);return E&&(E.selected=!1),mt(j.id,!1)}),M=b.map(j=>mt(j.id,!1));w(x),v(M)},setMinZoom:l=>{const{panZoom:f,maxZoom:m}=d();f==null||f.setScaleExtent([l,m]),u({minZoom:l})},setMaxZoom:l=>{const{panZoom:f,minZoom:m}=d();f==null||f.setScaleExtent([m,l]),u({maxZoom:l})},setTranslateExtent:l=>{var f;(f=d().panZoom)==null||f.setTranslateExtent(l),u({translateExtent:l})},setPaneClickDistance:l=>{var f;(f=d().panZoom)==null||f.setClickDistance(l)},resetSelectedElements:()=>{const{edges:l,nodes:f,triggerNodeChanges:m,triggerEdgeChanges:p}=d(),y=f.reduce((v,_)=>_.selected?[...v,mt(_.id,!1)]:v,[]),w=l.reduce((v,_)=>_.selected?[...v,mt(_.id,!1)]:v,[]);m(y),p(w)},setNodeExtent:l=>{const{nodes:f,nodeLookup:m,parentLookup:p,nodeOrigin:y,elevateNodesOnSelect:w,nodeExtent:v}=d();l[0][0]===v[0][0]&&l[0][1]===v[0][1]&&l[1][0]===v[1][0]&&l[1][1]===v[1][1]||(Ho(f,m,p,{nodeOrigin:y,nodeExtent:l,elevateNodesOnSelect:w,checkEquality:!1}),u({nodeExtent:l}))},panBy:l=>{const{transform:f,width:m,height:p,panZoom:y,translateExtent:w}=d();return my({delta:l,panZoom:y,transform:f,translateExtent:w,width:m,height:p})},fitView:l=>{const{panZoom:f,width:m,height:p,minZoom:y,maxZoom:w,nodeLookup:v}=d();if(!f)return Promise.resolve(!1);const _=Po(v,l);return jo({nodes:_,width:m,height:p,panZoom:f,minZoom:y,maxZoom:w},l)},fitViewSync:l=>{const{panZoom:f,width:m,height:p,minZoom:y,maxZoom:w,nodeLookup:v}=d();if(!f)return!1;const _=Po(v,l);return jo({nodes:_,width:m,height:p,panZoom:f,minZoom:y,maxZoom:w},l),_.size>0},cancelConnection:()=>{u({connection:{...Pc}})},updateConnection:l=>{u({connection:l})},reset:()=>u({...zs()})}),Object.is);function Wx({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,fitView:s,nodeOrigin:a,nodeExtent:c,children:u}){const[d]=h.useState(()=>Yx({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:s,nodeOrigin:a,nodeExtent:c}));return g.jsx(f1,{value:d,children:g.jsx(j1,{children:u})})}function Gx({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:s,fitView:a,nodeOrigin:c,nodeExtent:u}){return h.useContext(Dr)?g.jsx(g.Fragment,{children:e}):g.jsx(Wx,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:s,fitView:a,nodeOrigin:c,nodeExtent:u,children:e})}const Ux={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Kx({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:s,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:l,onMoveEnd:f,onConnect:m,onConnectStart:p,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:v,onNodeMouseEnter:_,onNodeMouseMove:b,onNodeMouseLeave:x,onNodeContextMenu:M,onNodeDoubleClick:j,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:R,onNodesDelete:P,onEdgesDelete:$,onDelete:L,onSelectionChange:F,onSelectionDragStart:C,onSelectionDrag:D,onSelectionDragStop:S,onSelectionContextMenu:I,onSelectionStart:A,onSelectionEnd:k,onBeforeDelete:O,connectionMode:z,connectionLineType:B=it.Bezier,connectionLineStyle:ne,connectionLineComponent:U,connectionLineContainerStyle:J,deleteKeyCode:Z="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:V=!1,selectionMode:ee=gn.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:Q=lr()?"Meta":"Control",zoomActivationKeyCode:te=lr()?"Meta":"Control",snapToGrid:ae,snapGrid:fe,onlyRenderVisibleElements:ye=!1,selectNodesOnDrag:ve,nodesDraggable:ct,nodesConnectable:ut,nodesFocusable:De,nodeOrigin:lt=pu,edgesFocusable:Xe,edgesReconnectable:Ye,elementsSelectable:dt=!0,defaultViewport:zt=S1,minZoom:ft=.5,maxZoom:We=2,translateExtent:et=pn,preventScrolling:$r=!0,nodeExtent:ht,defaultMarkerColor:Bt="#b1b1b7",zoomOnScroll:Lr=!0,zoomOnPinch:Or=!0,panOnScroll:Vt=!1,panOnScrollSpeed:Xt=.5,panOnScrollMode:Fr=xt.Free,zoomOnDoubleClick:Yt=!0,panOnDrag:Wt=!0,onPaneClick:Hr,onPaneMouseEnter:zr,onPaneMouseMove:Gt,onPaneMouseLeave:Br,onPaneScroll:T,onPaneContextMenu:H,paneClickDistance:G=0,nodeClickDistance:W=0,children:K,onReconnect:se,onReconnectStart:q,onReconnectEnd:ue,onEdgeContextMenu:ce,onEdgeDoubleClick:we,onEdgeMouseEnter:he,onEdgeMouseMove:be,onEdgeMouseLeave:Pe,reconnectRadius:Ct=10,onNodesChange:Vr,onEdgesChange:yd,noDragClassName:xd="nodrag",noWheelClassName:vd="nowheel",noPanClassName:Si="nopan",fitView:Mi,fitViewOptions:wd,connectOnClick:bd,attributionPosition:Cd,proOptions:_d,defaultEdgeOptions:Ed,elevateNodesOnSelect:Sd,elevateEdgesOnSelect:Md,disableKeyboardA11y:Ni=!1,autoPanOnConnect:Nd,autoPanOnNodeDrag:Td,autoPanSpeed:kd,connectionRadius:Rd,isValidConnection:Dd,onError:Id,style:Ad,id:Ti,nodeDragThreshold:Pd,viewport:jd,onViewportChange:$d,width:Ld,height:Od,colorMode:Fd="light",debug:Hd,...zd},Bd){const Xr=Ti||"1",Vd=k1(Fd);return g.jsx("div",{"data-testid":"rf__wrapper",...zd,style:{...Ad,...Ux},ref:Bd,className:xe(["react-flow",o,Vd]),id:Ti,children:g.jsxs(Gx,{nodes:e,edges:t,width:Ld,height:Od,fitView:Mi,nodeOrigin:lt,nodeExtent:ht,children:[g.jsx(Xx,{onInit:u,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:_,onNodeMouseMove:b,onNodeMouseLeave:x,onNodeContextMenu:M,onNodeDoubleClick:j,nodeTypes:i,edgeTypes:s,connectionLineType:B,connectionLineStyle:ne,connectionLineComponent:U,connectionLineContainerStyle:J,selectionKeyCode:X,selectionOnDrag:V,selectionMode:ee,deleteKeyCode:Z,multiSelectionKeyCode:Q,panActivationKeyCode:ie,zoomActivationKeyCode:te,onlyRenderVisibleElements:ye,defaultViewport:zt,translateExtent:et,minZoom:ft,maxZoom:We,preventScrolling:$r,zoomOnScroll:Lr,zoomOnPinch:Or,zoomOnDoubleClick:Yt,panOnScroll:Vt,panOnScrollSpeed:Xt,panOnScrollMode:Fr,panOnDrag:Wt,onPaneClick:Hr,onPaneMouseEnter:zr,onPaneMouseMove:Gt,onPaneMouseLeave:Br,onPaneScroll:T,onPaneContextMenu:H,paneClickDistance:G,nodeClickDistance:W,onSelectionContextMenu:I,onSelectionStart:A,onSelectionEnd:k,onReconnect:se,onReconnectStart:q,onReconnectEnd:ue,onEdgeContextMenu:ce,onEdgeDoubleClick:we,onEdgeMouseEnter:he,onEdgeMouseMove:be,onEdgeMouseLeave:Pe,reconnectRadius:Ct,defaultMarkerColor:Bt,noDragClassName:xd,noWheelClassName:vd,noPanClassName:Si,rfId:Xr,disableKeyboardA11y:Ni,nodeExtent:ht,viewport:jd,onViewportChange:$d}),g.jsx(T1,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:p,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:v,nodesDraggable:ct,nodesConnectable:ut,nodesFocusable:De,edgesFocusable:Xe,edgesReconnectable:Ye,elementsSelectable:dt,elevateNodesOnSelect:Sd,elevateEdgesOnSelect:Md,minZoom:ft,maxZoom:We,nodeExtent:ht,onNodesChange:Vr,onEdgesChange:yd,snapToGrid:ae,snapGrid:fe,connectionMode:z,translateExtent:et,connectOnClick:bd,defaultEdgeOptions:Ed,fitView:Mi,fitViewOptions:wd,onNodesDelete:P,onEdgesDelete:$,onDelete:L,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:R,onSelectionDrag:D,onSelectionDragStart:C,onSelectionDragStop:S,onMove:d,onMoveStart:l,onMoveEnd:f,noPanClassName:Si,nodeOrigin:lt,rfId:Xr,autoPanOnConnect:Nd,autoPanOnNodeDrag:Td,autoPanSpeed:kd,onError:Id,connectionRadius:Rd,isValidConnection:Dd,selectNodesOnDrag:ve,nodeDragThreshold:Pd,onBeforeDelete:O,paneClickDistance:G,debug:Hd}),g.jsx(E1,{onSelectionChange:F}),K,g.jsx(v1,{proOptions:_d,position:Cd}),g.jsx(y1,{rfId:Xr,disableKeyboardA11y:Ni})]})})}var f2=vu(Kx);function Vu(){const e=pe();return h.useCallback(t=>{const{domNode:n,updateNodeInternals:r}=e.getState(),o=Array.isArray(t)?t:[t],i=new Map;o.forEach(s=>{const a=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${s}"]`);a&&i.set(s,{id:s,nodeElement:a,force:!0})}),requestAnimationFrame(()=>r(i,{triggerFitView:!1}))},[])}const qx=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function h2(){return de(qx,ge)}function m2(e){const[t,n]=h.useState(e),r=h.useCallback(o=>n(i=>yu(o,i)),[]);return[t,n,r]}function p2(e){const[t,n]=h.useState(e),r=h.useCallback(o=>n(i=>xu(o,i)),[]);return[t,n,r]}function g2({onStart:e,onChange:t,onEnd:n}){const r=pe();h.useEffect(()=>{r.setState({onViewportChangeStart:e})},[e]),h.useEffect(()=>{r.setState({onViewportChange:t})},[t]),h.useEffect(()=>{r.setState({onViewportChangeEnd:n})},[n])}function Zx({dimensions:e,lineWidth:t,variant:n,className:r}){return g.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:xe(["react-flow__background-pattern",n,r])})}function Qx({radius:e,className:t}){return g.jsx("circle",{cx:e,cy:e,r:e,className:xe(["react-flow__background-pattern","dots",t])})}var st;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(st||(st={}));const Jx={[st.Dots]:1,[st.Lines]:1,[st.Cross]:6},ev=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Xu({id:e,variant:t=st.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:s,bgColor:a,style:c,className:u,patternClassName:d}){const l=h.useRef(null),{transform:f,patternId:m}=de(ev,ge),p=r||Jx[t],y=t===st.Dots,w=t===st.Cross,v=Array.isArray(n)?n:[n,n],_=[v[0]*f[2]||1,v[1]*f[2]||1],b=p*f[2],x=Array.isArray(i)?i:[i,i],M=w?[b,b]:_,j=[x[0]*f[2]||1+M[0]/2,x[1]*f[2]||1+M[1]/2],E=`${m}${e||""}`;return g.jsxs("svg",{className:xe(["react-flow__background",u]),style:{...c,...Ir,"--xy-background-color-props":a,"--xy-background-pattern-color-props":s},ref:l,"data-testid":"rf__background",children:[g.jsx("pattern",{id:E,x:f[0]%_[0],y:f[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:y?g.jsx(Qx,{radius:b/2,className:d}):g.jsx(Zx,{dimensions:M,lineWidth:o,variant:t,className:d})}),g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}Xu.displayName="Background";const y2=h.memo(Xu);function tv(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function nv(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g.jsx("path",{d:"M0 0h32v4.2H0z"})})}function rv(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function ov(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function iv(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Vn({children:e,className:t,...n}){return g.jsx("button",{type:"button",className:xe(["react-flow__controls-button",t]),...n,children:e})}const sv=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function Yu({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:s,onFitView:a,onInteractiveChange:c,className:u,children:d,position:l="bottom-left",orientation:f="vertical","aria-label":m="React Flow controls"}){const p=pe(),{isInteractive:y,minZoomReached:w,maxZoomReached:v}=de(sv,ge),{zoomIn:_,zoomOut:b,fitView:x}=li(),M=()=>{_(),i==null||i()},j=()=>{b(),s==null||s()},E=()=>{x(o),a==null||a()},N=()=>{p.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),c==null||c(!y)},R=f==="horizontal"?"horizontal":"vertical";return g.jsxs(ui,{className:xe(["react-flow__controls",R,u]),position:l,style:e,"data-testid":"rf__controls","aria-label":m,children:[t&&g.jsxs(g.Fragment,{children:[g.jsx(Vn,{onClick:M,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v,children:g.jsx(tv,{})}),g.jsx(Vn,{onClick:j,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w,children:g.jsx(nv,{})})]}),n&&g.jsx(Vn,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view",children:g.jsx(rv,{})}),r&&g.jsx(Vn,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity",children:y?g.jsx(iv,{}):g.jsx(ov,{})}),d]})}Yu.displayName="Controls";const x2=h.memo(Yu);function av({id:e,x:t,y:n,width:r,height:o,style:i,color:s,strokeColor:a,strokeWidth:c,className:u,borderRadius:d,shapeRendering:l,selected:f,onClick:m}){const{background:p,backgroundColor:y}=i||{},w=s||p||y;return g.jsx("rect",{className:xe(["react-flow__minimap-node",{selected:f},u]),x:t,y:n,rx:d,ry:d,width:r,height:o,style:{fill:w,stroke:a,strokeWidth:c},shapeRendering:l,onClick:m?v=>m(v,e):void 0})}const cv=h.memo(av),uv=e=>e.nodes.map(t=>t.id),ao=e=>e instanceof Function?e:()=>e;function lv({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=cv,onClick:s}){const a=de(uv,ge),c=ao(t),u=ao(e),d=ao(n),l=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return g.jsx(g.Fragment,{children:a.map(f=>g.jsx(fv,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:s,shapeRendering:l},f))})}function dv({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:s,NodeComponent:a,onClick:c}){const{node:u,x:d,y:l,width:f,height:m}=de(p=>{const y=p.nodeLookup.get(e),{x:w,y:v}=y.internals.positionAbsolute,{width:_,height:b}=Je(y);return{node:y,x:w,y:v,width:_,height:b}},ge);return!u||u.hidden||!Vc(u)?null:g.jsx(a,{x:d,y:l,width:f,height:m,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:o,strokeColor:n(u),strokeWidth:i,shapeRendering:s,onClick:c,id:u.id})}const fv=h.memo(dv);var hv=h.memo(lv);const mv=200,pv=150,gv=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?zc(Mn(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},yv="react-flow__minimap-desc";function Wu({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:s,nodeComponent:a,bgColor:c,maskColor:u,maskStrokeColor:d,maskStrokeWidth:l,position:f="bottom-right",onClick:m,onNodeClick:p,pannable:y=!1,zoomable:w=!1,ariaLabel:v="React Flow mini map",inversePan:_,zoomStep:b=10,offsetScale:x=5}){const M=pe(),j=h.useRef(null),{boundingRect:E,viewBB:N,rfId:R,panZoom:P,translateExtent:$,flowWidth:L,flowHeight:F}=de(gv,ge),C=(e==null?void 0:e.width)??mv,D=(e==null?void 0:e.height)??pv,S=E.width/C,I=E.height/D,A=Math.max(S,I),k=A*C,O=A*D,z=x*A,B=E.x-(k-E.width)/2-z,ne=E.y-(O-E.height)/2-z,U=k+z*2,J=O+z*2,Z=`${yv}-${R}`,X=h.useRef(0),V=h.useRef();X.current=A,h.useEffect(()=>{if(j.current&&P)return V.current=Cy({domNode:j.current,panZoom:P,getTransform:()=>M.getState().transform,getViewScale:()=>X.current}),()=>{var Q;(Q=V.current)==null||Q.destroy()}},[P]),h.useEffect(()=>{var Q;(Q=V.current)==null||Q.update({translateExtent:$,width:L,height:F,inversePan:_,pannable:y,zoomStep:b,zoomable:w})},[y,w,_,b,$,L,F]);const ee=m?Q=>{var fe;const[te,ae]=((fe=V.current)==null?void 0:fe.pointer(Q))||[0,0];m(Q,{x:te,y:ae})}:void 0,ie=p?h.useCallback((Q,te)=>{const ae=M.getState().nodeLookup.get(te);p(Q,ae)},[]):void 0;return g.jsx(ui,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof l=="number"?l*A:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="string"?s:void 0},className:xe(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:g.jsxs("svg",{width:C,height:D,viewBox:`${B} ${ne} ${U} ${J}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":Z,ref:j,onClick:ee,children:[v&&g.jsx("title",{id:Z,children:v}),g.jsx(hv,{onClick:ie,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:a}),g.jsx("path",{className:"react-flow__minimap-mask",d:`M${B-z},${ne-z}h${U+z*2}v${J+z*2}h${-U-z*2}z
        M${N.x},${N.y}h${N.width}v${N.height}h${-N.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Wu.displayName="MiniMap";const v2=h.memo(Wu);function xv({nodeId:e,position:t,variant:n=It.Handle,className:r,style:o={},children:i,color:s,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:l=!1,shouldResize:f,onResizeStart:m,onResize:p,onResizeEnd:y}){const w=_u(),v=typeof e=="string"?e:w,_=pe(),b=h.useRef(null),x=n===It.Line?"right":"bottom-right",M=t??x,j=h.useRef(null);h.useEffect(()=>{if(!(!b.current||!v))return j.current||(j.current=Fy({domNode:b.current,nodeId:v,getStoreItems:()=>{const{nodeLookup:P,transform:$,snapGrid:L,snapToGrid:F,nodeOrigin:C,domNode:D}=_.getState();return{nodeLookup:P,transform:$,snapGrid:L,snapToGrid:F,nodeOrigin:C,paneDomNode:D}},onChange:(P,$)=>{const{triggerNodeChanges:L,nodeLookup:F,parentLookup:C,nodeOrigin:D}=_.getState(),S=[],I={x:P.x,y:P.y},A=F.get(v);if(A&&A.expandParent&&A.parentId){const k=A.origin??D,O=P.width??A.measured.width,z=P.height??A.measured.height,B={id:A.id,parentId:A.parentId,rect:{width:O,height:z,...Xc({x:P.x??A.position.x,y:P.y??A.position.y},{width:O,height:z},A.parentId,F,k)}},ne=ci([B],F,C,D);S.push(...ne),I.x=P.x?Math.max(k[0]*O,P.x):void 0,I.y=P.y?Math.max(k[1]*z,P.y):void 0}if(I.x!==void 0&&I.y!==void 0){const k={id:v,type:"position",position:{...I}};S.push(k)}if(P.width!==void 0&&P.height!==void 0){const k={id:v,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:P.width,height:P.height}};S.push(k)}for(const k of $){const O={...k,type:"position"};S.push(O)}L(S)},onEnd:()=>{const P={id:v,type:"dimensions",resizing:!1};_.getState().triggerNodeChanges([P])}})),j.current.update({controlPosition:M,boundaries:{minWidth:a,minHeight:c,maxWidth:u,maxHeight:d},keepAspectRatio:l,onResizeStart:m,onResize:p,onResizeEnd:y,shouldResize:f}),()=>{var P;(P=j.current)==null||P.destroy()}},[M,a,c,u,d,l,m,p,y,f]);const E=M.split("-"),N=n===It.Line?"borderColor":"backgroundColor",R=s?{...o,[N]:s}:o;return g.jsx("div",{className:xe(["react-flow__resize-control","nodrag",...E,n,r]),ref:b,style:R,children:i})}const Bs=h.memo(xv);function vv({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:o,lineStyle:i,color:s,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:l=!1,shouldResize:f,onResizeStart:m,onResize:p,onResizeEnd:y}){return t?g.jsxs(g.Fragment,{children:[Iy.map(w=>g.jsx(Bs,{className:o,style:i,nodeId:e,position:w,variant:It.Line,color:s,minWidth:a,minHeight:c,maxWidth:u,maxHeight:d,onResizeStart:m,keepAspectRatio:l,shouldResize:f,onResize:p,onResizeEnd:y},w)),Dy.map(w=>g.jsx(Bs,{className:n,style:r,nodeId:e,position:w,color:s,minWidth:a,minHeight:c,maxWidth:u,maxHeight:d,onResizeStart:m,keepAspectRatio:l,shouldResize:f,onResize:p,onResizeEnd:y},w))]}):null}const wv=oe.object({id:oe.string(),name:oe.string(),unique:oe.boolean(),fieldIds:oe.array(oe.string()),createdAt:oe.number()}),bv=({aggregatedIndexes:e,fields:t})=>e.map(n=>({id:Ue(),name:n.name,unique:!!n.unique,fieldIds:n.columns.sort((r,o)=>r.position-o.position).map(r=>{var o;return(o=t.find(i=>i.name===r.name))==null?void 0:o.id}).filter(r=>r!==void 0),createdAt:Date.now()})),Cv=[{name:"uint8",id:"uint8"},{name:"uint16",id:"uint16"},{name:"uint32",id:"uint32"},{name:"uint64",id:"uint64"},{name:"uint128",id:"uint128"},{name:"uint256",id:"uint256"},{name:"int8",id:"int8"},{name:"int16",id:"int16"},{name:"int32",id:"int32"},{name:"int64",id:"int64"},{name:"int128",id:"int128"},{name:"int256",id:"int256"},{name:"float32",id:"float32"},{name:"float64",id:"float64"},{name:"tinyint",id:"tinyint"},{name:"int1",id:"int1"},{name:"byte",id:"byte"},{name:"tinyint signed",id:"tinyint_signed"},{name:"int1 signed",id:"int1_signed"},{name:"smallint",id:"smallint"},{name:"smallint signed",id:"smallint_signed"},{name:"int",id:"int"},{name:"integer",id:"integer"},{name:"mediumint",id:"mediumint"},{name:"mediumint signed",id:"mediumint_signed"},{name:"int signed",id:"int_signed"},{name:"integer signed",id:"integer_signed"},{name:"bigint",id:"bigint"},{name:"signed",id:"signed"},{name:"bigint signed",id:"bigint_signed"},{name:"time",id:"time"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"real",id:"real"},{name:"single",id:"single"},{name:"double precision",id:"double_precision"},{name:"longtext",id:"longtext"},{name:"mediumtext",id:"mediumtext"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"longblob",id:"longblob"},{name:"mediumblob",id:"mediumblob"},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"char",id:"char",hasCharMaxLength:!0},{name:"char large object",id:"char_large_object"},{name:"char varying",id:"char_varying",hasCharMaxLength:!0},{name:"character large object",id:"character_large_object"},{name:"character varying",id:"character_varying",hasCharMaxLength:!0},{name:"nchar large object",id:"nchar_large_object"},{name:"nchar varying",id:"nchar_varying",hasCharMaxLength:!0},{name:"national character large object",id:"national_character_large_object"},{name:"national character varying",id:"national_character_varying",hasCharMaxLength:!0},{name:"national char varying",id:"national_char_varying",hasCharMaxLength:!0},{name:"national character",id:"national_character",hasCharMaxLength:!0},{name:"national char",id:"national_char",hasCharMaxLength:!0},{name:"binary large object",id:"binary_large_object"},{name:"binary varying",id:"binary_varying",hasCharMaxLength:!0},{name:"fixedstring",id:"fixedstring",hasCharMaxLength:!0},{name:"string",id:"string"},{name:"date",id:"date"},{name:"date32",id:"date32"},{name:"datetime",id:"datetime"},{name:"datetime64",id:"datetime64"},{name:"object",id:"object"},{name:"json",id:"json"},{name:"uuid",id:"uuid"},{name:"boolean",id:"boolean"},{name:"enum",id:"enum"},{name:"lowcardinality",id:"lowcardinality"},{name:"array",id:"array"},{name:"tuple",id:"tuple"},{name:"map",id:"map"},{name:"simpleaggregatefunction",id:"simpleaggregatefunction"},{name:"aggregatefunction",id:"aggregatefunction"},{name:"nested",id:"nested"},{name:"ipv4",id:"ipv4"},{name:"ipv6",id:"ipv6"},{name:"point",id:"point"},{name:"ring",id:"ring"},{name:"polygon",id:"polygon"},{name:"multipolygon",id:"multipolygon"},{name:"expression",id:"expression"},{name:"set",id:"set"},{name:"nothing",id:"nothing"},{name:"interval",id:"interval"}],_v=[{name:"bigint",id:"bigint"},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"blob",id:"blob"},{name:"boolean",id:"boolean"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"decimal",id:"decimal"},{name:"double",id:"double"},{name:"enum",id:"enum"},{name:"float",id:"float"},{name:"int",id:"int"},{name:"json",id:"json"},{name:"numeric",id:"numeric"},{name:"real",id:"real"},{name:"set",id:"set"},{name:"smallint",id:"smallint"},{name:"text",id:"text"},{name:"time",id:"time"},{name:"timestamp",id:"timestamp"},{name:"uuid",id:"uuid"},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0},{name:"varchar",id:"varchar",hasCharMaxLength:!0}],Ev=[{name:"tinyint",id:"tinyint"},{name:"smallint",id:"smallint"},{name:"mediumint",id:"mediumint"},{name:"int",id:"int"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"bit",id:"bit"},{name:"bool",id:"bool"},{name:"boolean",id:"boolean"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"timestamp",id:"timestamp"},{name:"time",id:"time"},{name:"year",id:"year"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"mediumblob",id:"mediumblob"},{name:"longblob",id:"longblob"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"mediumtext",id:"mediumtext"},{name:"longtext",id:"longtext"},{name:"enum",id:"enum"},{name:"set",id:"set"},{name:"geometry",id:"geometry"},{name:"point",id:"point"},{name:"linestring",id:"linestring"},{name:"polygon",id:"polygon"},{name:"multipoint",id:"multipoint"},{name:"multilinestring",id:"multilinestring"},{name:"multipolygon",id:"multipolygon"},{name:"geometrycollection",id:"geometrycollection"},{name:"json",id:"json"},{name:"uuid",id:"uuid"}],Sv=[{name:"tinyint",id:"tinyint"},{name:"smallint",id:"smallint"},{name:"mediumint",id:"mediumint"},{name:"int",id:"int"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"float",id:"float"},{name:"double",id:"double"},{name:"bit",id:"bit"},{name:"bool",id:"bool"},{name:"boolean",id:"boolean"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"timestamp",id:"timestamp"},{name:"time",id:"time"},{name:"year",id:"year"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0},{name:"tinyblob",id:"tinyblob"},{name:"blob",id:"blob"},{name:"mediumblob",id:"mediumblob"},{name:"longblob",id:"longblob"},{name:"tinytext",id:"tinytext"},{name:"text",id:"text"},{name:"mediumtext",id:"mediumtext"},{name:"longtext",id:"longtext"},{name:"enum",id:"enum"},{name:"set",id:"set"},{name:"geometry",id:"geometry"},{name:"point",id:"point"},{name:"linestring",id:"linestring"},{name:"polygon",id:"polygon"},{name:"multipoint",id:"multipoint"},{name:"multilinestring",id:"multilinestring"},{name:"multipolygon",id:"multipolygon"},{name:"geometrycollection",id:"geometrycollection"},{name:"json",id:"json"}],Vs=[{name:"smallint",id:"smallint"},{name:"integer",id:"integer"},{name:"bigint",id:"bigint"},{name:"decimal",id:"decimal"},{name:"numeric",id:"numeric"},{name:"real",id:"real"},{name:"double precision",id:"double_precision"},{name:"smallserial",id:"smallserial"},{name:"serial",id:"serial"},{name:"bigserial",id:"bigserial"},{name:"money",id:"money"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"character varying",id:"character_varying",hasCharMaxLength:!0},{name:"text",id:"text"},{name:"bytea",id:"bytea"},{name:"date",id:"date"},{name:"timestamp",id:"timestamp"},{name:"timestamp with time zone",id:"timestamp_with_time_zone"},{name:"timestamp without time zone",id:"timestamp_without_time_zone"},{name:"time",id:"time"},{name:"time with time zone",id:"time_with_time_zone"},{name:"time without time zone",id:"time_without_time_zone"},{name:"interval",id:"interval"},{name:"boolean",id:"boolean"},{name:"enum",id:"enum"},{name:"point",id:"point"},{name:"line",id:"line"},{name:"lseg",id:"lseg"},{name:"box",id:"box"},{name:"path",id:"path"},{name:"polygon",id:"polygon"},{name:"circle",id:"circle"},{name:"cidr",id:"cidr"},{name:"inet",id:"inet"},{name:"macaddr",id:"macaddr"},{name:"macaddr8",id:"macaddr8"},{name:"bit",id:"bit"},{name:"bit varying",id:"bit_varying"},{name:"tsvector",id:"tsvector"},{name:"tsquery",id:"tsquery"},{name:"uuid",id:"uuid"},{name:"xml",id:"xml"},{name:"json",id:"json"},{name:"jsonb",id:"jsonb"},{name:"array",id:"array"},{name:"int4range",id:"int4range"},{name:"int8range",id:"int8range"},{name:"numrange",id:"numrange"},{name:"tsrange",id:"tsrange"},{name:"tstzrange",id:"tstzrange"},{name:"daterange",id:"daterange"},{name:"oid",id:"oid"},{name:"regproc",id:"regproc"},{name:"regprocedure",id:"regprocedure"},{name:"regoper",id:"regoper"},{name:"regoperator",id:"regoperator"},{name:"regclass",id:"regclass"},{name:"regtype",id:"regtype"},{name:"regrole",id:"regrole"},{name:"regnamespace",id:"regnamespace"},{name:"regconfig",id:"regconfig"},{name:"regdictionary",id:"regdictionary"},{name:"user-defined",id:"user-defined"}],Mv=[{name:"bigint",id:"bigint"},{name:"bit",id:"bit"},{name:"decimal",id:"decimal"},{name:"int",id:"int"},{name:"money",id:"money"},{name:"numeric",id:"numeric"},{name:"smallint",id:"smallint"},{name:"smallmoney",id:"smallmoney"},{name:"tinyint",id:"tinyint"},{name:"float",id:"float"},{name:"real",id:"real"},{name:"date",id:"date"},{name:"datetime2",id:"datetime2"},{name:"datetime",id:"datetime"},{name:"datetimeoffset",id:"datetimeoffset"},{name:"smalldatetime",id:"smalldatetime"},{name:"time",id:"time"},{name:"char",id:"char",hasCharMaxLength:!0},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"text",id:"text"},{name:"nchar",id:"nchar",hasCharMaxLength:!0},{name:"nvarchar",id:"nvarchar",hasCharMaxLength:!0},{name:"ntext",id:"ntext"},{name:"binary",id:"binary",hasCharMaxLength:!0},{name:"varbinary",id:"varbinary",hasCharMaxLength:!0},{name:"image",id:"image"},{name:"cursor",id:"cursor"},{name:"hierarchyid",id:"hierarchyid"},{name:"sql_variant",id:"sql_variant"},{name:"timestamp",id:"timestamp"},{name:"uniqueidentifier",id:"uniqueidentifier"},{name:"xml",id:"xml"},{name:"geometry",id:"geometry"},{name:"geography",id:"geography"},{name:"json",id:"json"}],Nv=[{name:"integer",id:"integer"},{name:"real",id:"real"},{name:"numeric",id:"numeric"},{name:"text",id:"text"},{name:"blob",id:"blob"},{name:"json",id:"json"},{name:"date",id:"date"},{name:"datetime",id:"datetime"},{name:"int",id:"int"},{name:"float",id:"float"},{name:"boolean",id:"boolean"},{name:"varchar",id:"varchar",hasCharMaxLength:!0},{name:"decimal",id:"decimal"}],Tv=oe.object({id:oe.string(),name:oe.string()}),Gu={[me.GENERIC]:_v,[me.POSTGRESQL]:Vs,[me.MYSQL]:Sv,[me.SQL_SERVER]:Mv,[me.MARIADB]:Ev,[me.SQLITE]:Nv,[me.CLICKHOUSE]:Cv,[me.COCKROACHDB]:Vs},kv={[me.POSTGRESQL]:{serial:["integer"],smallserial:["smallint"],bigserial:["bigint"]},[me.MYSQL]:{int:["integer"],tinyint:["boolean"]},[me.SQL_SERVER]:{},[me.MARIADB]:{},[me.SQLITE]:{},[me.CLICKHOUSE]:{},[me.COCKROACHDB]:{},[me.GENERIC]:{}};function w2(e,t,n){var o,i;if(e.id===t.id)return!0;const r=kv[n]||{};return((o=r[e.id])==null?void 0:o.includes(t.id))||((i=r[t.id])==null?void 0:i.includes(e.id))}const Rv=Object.values(Gu).flat(),b2=e=>({id:e.id,name:e.name}),C2=(e,t)=>(t?Gu[t]:Rv).find(r=>r.id===e),Dv=oe.object({id:oe.string(),name:oe.string(),type:Tv,primaryKey:oe.boolean(),unique:oe.boolean(),nullable:oe.boolean(),createdAt:oe.number(),characterMaximumLength:oe.string().optional(),precision:oe.number().optional(),scale:oe.number().optional(),default:oe.string().optional(),collation:oe.string().optional(),comments:oe.string().optional()}),Iv=({columns:e,tableSchema:t,tableInfo:n,primaryKeys:r,aggregatedIndexes:o})=>{const i=e.filter(c=>Tt(c.schema)===t&&c.table===n.table).reduce((c,u)=>(c.has(u.name)||c.set(u.name,u),c),new Map),s=Array.from(i.values()).sort((c,u)=>c.ordinal_position-u.ordinal_position),a=r.filter(c=>c.table===n.table&&Tt(c.schema)===t).map(c=>c.column.trim());return s.map(c=>{var u,d;return{id:Ue(),name:c.name,type:{id:c.type.split(" ").join("_").toLowerCase(),name:c.type.toLowerCase()},primaryKey:a.includes(c.name),unique:Object.values(o).some(l=>l.unique&&l.columns.length===1&&l.columns[0].name===c.name),nullable:!!c.nullable,...c.character_maximum_length&&c.character_maximum_length!=="null"?{characterMaximumLength:c.character_maximum_length}:{},...(u=c.precision)!=null&&u.precision?{precision:c.precision.precision}:{},...(d=c.precision)!=null&&d.scale?{scale:c.precision.scale}:{},...c.default?{default:c.default}:{},...c.collation?{collation:c.collation}:{},createdAt:Date.now(),comments:c.comment?c.comment:void 0}})},_2=oe.object({schema:oe.string(),table:oe.string(),name:oe.string(),column:oe.string(),index_type:oe.string(),cardinality:oe.number().nullable().optional(),size:oe.number().nullable().optional(),unique:oe.union([oe.boolean(),oe.number()]),direction:oe.string(),column_position:oe.number()}),Av=({tableInfo:e,tableSchema:t,indexes:n})=>{const r=n.filter(o=>{const i=Tt(o.schema);return o.table===e.table&&i===t});return Object.values(r.reduce((o,i)=>{const s=`${i.schema}_${i.name}`;return o[s]?o[s].columns.push({name:i.column,position:i.column_position}):o[s]={...i,columns:[{name:i.column,position:i.column_position}]},o},{}))},E2=oe.object({id:oe.string(),name:oe.string(),schema:oe.string().optional(),x:oe.number(),y:oe.number(),fields:oe.array(Dv),indexes:oe.array(wv),color:oe.string(),isView:oe.boolean(),isMaterializedView:oe.boolean().optional(),createdAt:oe.number(),width:oe.number().optional(),comments:oe.string().optional(),order:oe.number().optional()}),S2=(e,t)=>!t||!e.schema||t.includes(ia(e.schema)),Pv=(e,t)=>{if(!t)return"";let n;return e===me.SQL_SERVER?n=qd(t):n=Zd(t),n},M2=({databaseMetadata:e,databaseType:t})=>{const{tables:n,pk_info:r,columns:o,indexes:i,views:s}=e;return n.map(a=>{const c=Tt(a.schema),u=Av({tableInfo:a,tableSchema:c,indexes:i}),d=Iv({aggregatedIndexes:u,columns:o,primaryKeys:r,tableInfo:a,tableSchema:c}),l=bv({aggregatedIndexes:u,fields:d}),f=s.some(p=>Tt(p.schema)===c&&p.view_name===a.table),m=s.some(p=>Tt(p.schema)===c&&p.view_name===a.table&&Pv(t,p.view_definition).toLowerCase().includes("materialized"));return{id:Ue(),name:a.table,schema:c,x:Math.random()*1e3,y:Math.random()*800,fields:d,indexes:l,color:m?mf:f?pf:oa(),isView:f,isMaterializedView:m,createdAt:Date.now(),comments:a.comment?a.comment:void 0}})},N2=({relationships:e,tables:t,mode:n="all"})=>{const r=go(t),o=go(e),i=s=>{const m=new Map;o.forEach(x=>{m.has(x.sourceTableId)||m.set(x.sourceTableId,new Set),m.has(x.targetTableId)||m.set(x.targetTableId,new Set),m.get(x.sourceTableId).add(x.targetTableId),m.get(x.targetTableId).add(x.sourceTableId)});const p=[...s].sort((x,M)=>{var j,E;return(((j=m.get(M.id))==null?void 0:j.size)||0)-(((E=m.get(x.id))==null?void 0:E.size)||0)}),y=new Set,w=new Map,v=(x,M,j)=>{for(const[E,N]of w)if(E!==j&&Math.abs(x-N.x)<300&&Math.abs(M-N.y)<400)return!0;return!1},_=(x,M,j)=>{const E=Math.max(200,300)/2;let N=0,R=0,P=0;const $=1e3;for(;P<$;){const L=x+R*Math.cos(N),F=M+R*Math.sin(N);if(!v(L,F,j))return{x:L,y:F};N+=Math.PI/4,N>=2*Math.PI&&(N=0,R+=E),P++}return{x:x+R*Math.cos(N),y:M+R*Math.sin(N)}},b=(x,M,j)=>{if(y.has(x.id))return;const{x:E,y:N}=_(M,j,x.id);x.x=E,x.y=N,w.set(x.id,{x:x.x,y:x.y}),y.add(x.id);const R=m.get(x.id)||new Set;let P=0;const $=2*Math.PI/R.size;R.forEach(L=>{if(!y.has(L)){const F=s.find(C=>C.id===L);if(F){const C=E+Math.cos(P)*400,D=N+Math.sin(P)*(300+100*2);b(F,C,D),P+=$}}})};p.forEach((x,M)=>{if(!y.has(x.id)){const j=Math.floor(M/6),N=100+M%6*(200+100*2),R=100+j*(300+100*2);b(x,N,R)}}),s.forEach(x=>{const M=w.get(x.id);M&&(x.x=M.x,x.y=M.y)})};if(n==="perSchema"){const s=r.reduce((a,c)=>{const u=c.schema||"default";return a[u]||(a[u]=[]),a[u].push(c),a},{});Object.values(s).forEach(i)}else i(r);return r};var co="rovingFocusGroup.onEntryFocus",jv={bubbles:!1,cancelable:!0},Pr="RovingFocusGroup",[Vo,Uu,$v]=La(Pr),[Lv,Ku]=Cn(Pr,[$v]),[Ov,Fv]=Lv(Pr),qu=h.forwardRef((e,t)=>g.jsx(Vo.Provider,{scope:e.__scopeRovingFocusGroup,children:g.jsx(Vo.Slot,{scope:e.__scopeRovingFocusGroup,children:g.jsx(Hv,{...e,ref:t})})}));qu.displayName=Pr;var Hv=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...l}=e,f=h.useRef(null),m=ke(t,f),p=Za(i),[y=null,w]=Qd({prop:s,defaultProp:a,onChange:c}),[v,_]=h.useState(!1),b=Be(u),x=Uu(n),M=h.useRef(!1),[j,E]=h.useState(0);return h.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(co,b),()=>N.removeEventListener(co,b)},[b]),g.jsx(Ov,{scope:n,orientation:r,dir:p,loop:o,currentTabStopId:y,onItemFocus:h.useCallback(N=>w(N),[w]),onItemShiftTab:h.useCallback(()=>_(!0),[]),onFocusableItemAdd:h.useCallback(()=>E(N=>N+1),[]),onFocusableItemRemove:h.useCallback(()=>E(N=>N-1),[]),children:g.jsx(Se.div,{tabIndex:v||j===0?-1:0,"data-orientation":r,...l,ref:m,style:{outline:"none",...e.style},onMouseDown:le(e.onMouseDown,()=>{M.current=!0}),onFocus:le(e.onFocus,N=>{const R=!M.current;if(N.target===N.currentTarget&&R&&!v){const P=new CustomEvent(co,jv);if(N.currentTarget.dispatchEvent(P),!P.defaultPrevented){const $=x().filter(S=>S.focusable),L=$.find(S=>S.active),F=$.find(S=>S.id===y),D=[L,F,...$].filter(Boolean).map(S=>S.ref.current);Ju(D,d)}}M.current=!1}),onBlur:le(e.onBlur,()=>_(!1))})})}),Zu="RovingFocusGroupItem",Qu=h.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,...s}=e,a=yo(),c=i||a,u=Fv(Zu,n),d=u.currentTabStopId===c,l=Uu(n),{onFocusableItemAdd:f,onFocusableItemRemove:m}=u;return h.useEffect(()=>{if(r)return f(),()=>m()},[r,f,m]),g.jsx(Vo.ItemSlot,{scope:n,id:c,focusable:r,active:o,children:g.jsx(Se.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...s,ref:t,onMouseDown:le(e.onMouseDown,p=>{r?u.onItemFocus(c):p.preventDefault()}),onFocus:le(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:le(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const y=Vv(p,u.orientation,u.dir);if(y!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let v=l().filter(_=>_.focusable).map(_=>_.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const _=v.indexOf(p.currentTarget);v=u.loop?Xv(v,_+1):v.slice(_+1)}setTimeout(()=>Ju(v))}})})})});Qu.displayName=Zu;var zv={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bv(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Vv(e,t,n){const r=Bv(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return zv[r]}function Ju(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Xv(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Yv=qu,Wv=Qu;function T2(e,t){const n=h.useRef();return h.useEffect(()=>(n.current=Jd(e,t),()=>{var o;(o=n.current)!=null&&o.cancel&&n.current.cancel()}),[e,t]),h.useCallback((...o)=>{var i;(i=n.current)==null||i.call(n,...o)},[])}var Gv="Arrow",el=h.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...i}=e;return g.jsx(Se.svg,{...i,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});el.displayName=Gv;var Uv=el,hi="Popper",[tl,nl]=Cn(hi),[Kv,rl]=tl(hi),ol=e=>{const{__scopePopper:t,children:n}=e,[r,o]=h.useState(null);return g.jsx(Kv,{scope:t,anchor:r,onAnchorChange:o,children:n})};ol.displayName=hi;var il="PopperAnchor",sl=h.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,i=rl(il,n),s=h.useRef(null),a=ke(t,s);return h.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:g.jsx(Se.div,{...o,ref:a})});sl.displayName=il;var mi="PopperContent",[qv,Zv]=tl(mi),al=h.forwardRef((e,t)=>{var X,V,ee,ie,Q,te;const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:l="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:p,...y}=e,w=rl(mi,n),[v,_]=h.useState(null),b=ke(t,ae=>_(ae)),[x,M]=h.useState(null),j=ef(x),E=(j==null?void 0:j.width)??0,N=(j==null?void 0:j.height)??0,R=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},$=Array.isArray(u)?u:[u],L=$.length>0,F={padding:P,boundary:$.filter(Jv),altBoundary:L},{refs:C,floatingStyles:D,placement:S,isPositioned:I,middlewareData:A}=tf({strategy:"fixed",placement:R,whileElementsMounted:(...ae)=>lf(...ae,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[nf({mainAxis:o+N,alignmentAxis:s}),c&&rf({mainAxis:!0,crossAxis:!1,limiter:l==="partial"?uf():void 0,...F}),c&&of({...F}),sf({...F,apply:({elements:ae,rects:fe,availableWidth:ye,availableHeight:ve})=>{const{width:ct,height:ut}=fe.reference,De=ae.floating.style;De.setProperty("--radix-popper-available-width",`${ye}px`),De.setProperty("--radix-popper-available-height",`${ve}px`),De.setProperty("--radix-popper-anchor-width",`${ct}px`),De.setProperty("--radix-popper-anchor-height",`${ut}px`)}}),x&&af({element:x,padding:a}),ew({arrowWidth:E,arrowHeight:N}),f&&cf({strategy:"referenceHidden",...F})]}),[k,O]=ll(S),z=Be(p);po(()=>{I&&(z==null||z())},[I,z]);const B=(X=A.arrow)==null?void 0:X.x,ne=(V=A.arrow)==null?void 0:V.y,U=((ee=A.arrow)==null?void 0:ee.centerOffset)!==0,[J,Z]=h.useState();return po(()=>{v&&Z(window.getComputedStyle(v).zIndex)},[v]),g.jsx("div",{ref:C.setFloating,"data-radix-popper-content-wrapper":"",style:{...D,transform:I?D.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[(ie=A.transformOrigin)==null?void 0:ie.x,(Q=A.transformOrigin)==null?void 0:Q.y].join(" "),...((te=A.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g.jsx(qv,{scope:n,placedSide:k,onArrowChange:M,arrowX:B,arrowY:ne,shouldHideArrow:U,children:g.jsx(Se.div,{"data-side":k,"data-align":O,...y,ref:b,style:{...y.style,animation:I?void 0:"none"}})})})});al.displayName=mi;var cl="PopperArrow",Qv={top:"bottom",right:"left",bottom:"top",left:"right"},ul=h.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,i=Zv(cl,r),s=Qv[i.placedSide];return g.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:g.jsx(Uv,{...o,ref:n,style:{...o.style,display:"block"}})})});ul.displayName=cl;function Jv(e){return e!==null}var ew=e=>({name:"transformOrigin",options:e,fn(t){var w,v,_;const{placement:n,rects:r,middlewareData:o}=t,s=((w=o.arrow)==null?void 0:w.centerOffset)!==0,a=s?0:e.arrowWidth,c=s?0:e.arrowHeight,[u,d]=ll(n),l={start:"0%",center:"50%",end:"100%"}[d],f=(((v=o.arrow)==null?void 0:v.x)??0)+a/2,m=(((_=o.arrow)==null?void 0:_.y)??0)+c/2;let p="",y="";return u==="bottom"?(p=s?l:`${f}px`,y=`${-c}px`):u==="top"?(p=s?l:`${f}px`,y=`${r.floating.height+c}px`):u==="right"?(p=`${-c}px`,y=s?l:`${m}px`):u==="left"&&(p=`${r.floating.width+c}px`,y=s?l:`${m}px`),{data:{x:p,y}}}});function ll(e){const[t,n="center"]=e.split("-");return[t,n]}var dl=ol,tw=sl,nw=al,rw=ul,uo="focusScope.autoFocusOnMount",lo="focusScope.autoFocusOnUnmount",Xs={bubbles:!1,cancelable:!0},ow="FocusScope",fl=h.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=e,[a,c]=h.useState(null),u=Be(o),d=Be(i),l=h.useRef(null),f=ke(t,y=>c(y)),m=h.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;h.useEffect(()=>{if(r){let y=function(b){if(m.paused||!a)return;const x=b.target;a.contains(x)?l.current=x:rt(l.current,{select:!0})},w=function(b){if(m.paused||!a)return;const x=b.relatedTarget;x!==null&&(a.contains(x)||rt(l.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const M of b)M.removedNodes.length>0&&rt(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const _=new MutationObserver(v);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),_.disconnect()}}},[r,a,m.paused]),h.useEffect(()=>{if(a){Ws.add(m);const y=document.activeElement;if(!a.contains(y)){const v=new CustomEvent(uo,Xs);a.addEventListener(uo,u),a.dispatchEvent(v),v.defaultPrevented||(iw(lw(hl(a)),{select:!0}),document.activeElement===y&&rt(a))}return()=>{a.removeEventListener(uo,u),setTimeout(()=>{const v=new CustomEvent(lo,Xs);a.addEventListener(lo,d),a.dispatchEvent(v),v.defaultPrevented||rt(y??document.body,{select:!0}),a.removeEventListener(lo,d),Ws.remove(m)},0)}}},[a,u,d,m]);const p=h.useCallback(y=>{if(!n&&!r||m.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(w&&v){const _=y.currentTarget,[b,x]=sw(_);b&&x?!y.shiftKey&&v===x?(y.preventDefault(),n&&rt(b,{select:!0})):y.shiftKey&&v===b&&(y.preventDefault(),n&&rt(x,{select:!0})):v===_&&y.preventDefault()}},[n,r,m.paused]);return g.jsx(Se.div,{tabIndex:-1,...s,ref:f,onKeyDown:p})});fl.displayName=ow;function iw(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(rt(r,{select:t}),document.activeElement!==n)return}function sw(e){const t=hl(e),n=Ys(t,e),r=Ys(t.reverse(),e);return[n,r]}function hl(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ys(e,t){for(const n of e)if(!aw(n,{upTo:t}))return n}function aw(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function cw(e){return e instanceof HTMLInputElement&&"select"in e}function rt(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&cw(e)&&t&&e.select()}}var Ws=uw();function uw(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Gs(e,t),e.unshift(t)},remove(t){var n;e=Gs(e,t),(n=e[0])==null||n.resume()}}}function Gs(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function lw(e){return e.filter(t=>t.tagName!=="A")}const dw=h.createContext({closeAlert:Y,showAlert:Y}),k2=()=>h.useContext(dw),ml=()=>({graph:new Map,lastUpdated:Date.now()}),Us=(e,t)=>(e.graph.has(t)||e.graph.set(t,[]),{...e,lastUpdated:Date.now()}),fw=(e,t,n)=>{var r,o,i,s;return e.graph.has(t)||Us(e,t),e.graph.has(n)||Us(e,n),(r=e.graph.get(t))!=null&&r.includes(n)||(o=e.graph.get(t))==null||o.push(n),(i=e.graph.get(n))!=null&&i.includes(t)||(s=e.graph.get(n))==null||s.push(t),{...e,lastUpdated:Date.now()}},R2=(e,t)=>(e.graph.delete(t),e.graph.forEach(n=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}),{...e,lastUpdated:Date.now()}),hw=(e,t,n)=>{var r,o,i,s;if(e.graph.has(t)){const a=((r=e.graph.get(t))==null?void 0:r.indexOf(n))??-1;a!==-1&&((o=e.graph.get(t))==null||o.splice(a,1))}if(e.graph.has(n)){const a=((i=e.graph.get(n))==null?void 0:i.indexOf(t))??-1;a!==-1&&((s=e.graph.get(n))==null||s.splice(a,1))}return{...e,lastUpdated:Date.now()}},mw=h.createContext({reorderTables:Y,fitView:Y,setOverlapGraph:Y,overlapGraph:ml()}),D2=()=>h.useContext(mw),I2=()=>h.useContext(gm);function pw(){var e=h.useRef(!0);return e.current?(e.current=!1,!0):e.current}var gw=function(e,t){var n=pw();h.useEffect(function(){if(!n)return e()},t)},yw=function(){};function pl(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function gl(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var xw=typeof window<"u",vw=["mousedown","touchstart"],yl=function(e,t,n){n===void 0&&(n=vw);var r=h.useRef(t);h.useEffect(function(){r.current=t},[t]),h.useEffect(function(){for(var o=function(c){var u=e.current;u&&!u.contains(c.target)&&r.current(c)},i=0,s=n;i<s.length;i++){var a=s[i];pl(document,a,o)}return function(){for(var c=0,u=n;c<u.length;c++){var d=u[c];gl(document,d,o)}}},[n,e])},ww=xw?window:null,Ks=function(e){return!!e.addEventListener},qs=function(e){return!!e.on},bw=function(e,t,n,r){n===void 0&&(n=ww),h.useEffect(function(){if(t&&n)return Ks(n)?pl(n,e,t,r):qs(n)&&n.on(e,t,r),function(){Ks(n)?gl(n,e,t,r):qs(n)&&n.off(e,t,r)}},[e,t,n,JSON.stringify(r)])},Cw=function(e){return typeof e=="function"?e:typeof e=="string"?function(t){return t.key===e}:e?function(){return!0}:function(){return!1}},Zs=function(e,t,n,r){t===void 0&&(t=yw),n===void 0&&(n={}),r===void 0&&(r=[e]);var o=n.event,i=o===void 0?"keydown":o,s=n.target,a=n.options,c=h.useMemo(function(){var u=Cw(e),d=function(l){if(u(l))return t(l)};return d},r);bw(i,c,s,a)},_w=function(e){var t=h.useState([!1,null]),n=t[0],r=t[1];return Zs(e,function(o){return r([!0,o])},{event:"keydown"},[n]),Zs(e,function(o){return r([!1,o])},{event:"keyup"},[n]),n},fr=function(e,t,n,r){r===void 0&&(r=_w);var o=r(e),i=o[0],s=o[1];gw(function(){i&&t&&t(s)},[i])};const pi=_e.forwardRef(({className:e,type:t,...n},r)=>g.jsx("input",{type:t,className:Ee("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));pi.displayName="Input";const Qs="left_rel_",Js="right_rel_",fo="target_rel_",xl=_e.memo(({field:e,focused:t,tableNodeId:n,highlighted:r,visible:o,isConnectable:i})=>{const{removeField:s,relationships:a,readonly:c,updateField:u}=xr(),[d,l]=h.useState(!1),[f,m]=h.useState(e.name),p=_e.useRef(null),y=Vu(),w=fi(),v=h.useMemo(()=>{var I,A;return w.inProgress&&w.fromNode.id!==n&&(((I=w.fromHandle.id)==null?void 0:I.startsWith(Js))||((A=w.fromHandle.id)==null?void 0:A.startsWith(Qs)))},[w,n]),_=h.useMemo(()=>a.filter(I=>I.targetTableId===n&&I.targetFieldId===e.id).length,[a,n,e.id]),b=h.useRef(_);h.useEffect(()=>{b.current!==_&&(y(n),b.current=_)},[n,y,_]);const x=h.useCallback(()=>{d&&(f.trim()&&u(n,e.id,{name:f.trim()}),l(!1))},[f,e.id,u,d,n]),M=h.useCallback(()=>{l(!1),m(e.name)},[e.name]);yl(p,x),fr("Enter",x),fr("Escape",M);const{checkIfFieldRemoved:j,checkIfNewField:E,getFieldNewName:N,getFieldNewType:R,checkIfFieldHasChange:P}=tr(),$=h.useMemo(()=>j({fieldId:e.id}),[j,e.id]),L=h.useMemo(()=>E({fieldId:e.id}),[E,e.id]),F=h.useMemo(()=>N({fieldId:e.id}),[N,e.id]),C=h.useMemo(()=>R({fieldId:e.id}),[R,e.id]),D=h.useMemo(()=>P({fieldId:e.id,tableId:n}),[P,e.id,n]),S=I=>{I.stopPropagation(),l(!0)};return g.jsxs("div",{className:Ee("group relative flex h-8 items-center justify-between gap-1 border-t px-3 text-sm last:rounded-b-[6px] hover:bg-slate-100 dark:hover:bg-slate-800","transition-all duration-200 ease-in-out",{"bg-pink-100 dark:bg-pink-900":r,"max-h-8 opacity-100":o,"z-0 max-h-0 overflow-hidden opacity-0":!o,"bg-sky-200 dark:bg-sky-800 hover:bg-sky-100 dark:hover:bg-sky-900 border-sky-300 dark:border-sky-700":D&&!$&&!L,"bg-red-200 dark:bg-red-800 hover:bg-red-100 dark:hover:bg-red-900 border-red-300 dark:border-red-700":$,"bg-green-200 dark:bg-green-800 hover:bg-green-100 dark:hover:bg-green-900 border-green-300 dark:border-green-700":L}),children:[i?g.jsxs(g.Fragment,{children:[g.jsx(Oe,{id:`${Js}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${!t||c?"!invisible":""}`,position:re.Right,type:"source"}),g.jsx(Oe,{id:`${Qs}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${!t||c?"!invisible":""}`,position:re.Left,type:"source"})]}):null,(!w.inProgress||v)&&i&&g.jsxs(g.Fragment,{children:[Array.from({length:_},(I,A)=>A).map(I=>g.jsx(Oe,{id:`${fo}${I}_${e.id}`,className:"!invisible",position:re.Left,type:"target"},`${fo}${I}_${e.id}`)),g.jsx(Oe,{id:`${fo}${_}_${e.id}`,className:v?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:re.Left,type:"target"})]}),g.jsxs("div",{className:Ee("flex items-center gap-1 truncate text-left",{"font-semibold":e.primaryKey||e.unique,"w-full":d}),children:[$?g.jsx(ec,{className:"size-3.5 text-red-800 dark:text-red-200"}):L?g.jsx(tc,{className:"size-3.5 text-green-800 dark:text-green-200"}):D?g.jsx(Ja,{className:"size-3.5 shrink-0 text-sky-800 dark:text-sky-200"}):null,d&&!c?g.jsxs(g.Fragment,{children:[g.jsx(pi,{ref:p,onBlur:x,placeholder:e.name,autoFocus:!0,type:"text",value:f,onClick:I=>I.stopPropagation(),onChange:I=>m(I.target.value),className:"h-5 w-full border-[0.5px] border-blue-400 bg-slate-100 focus-visible:ring-0 dark:bg-slate-900"}),g.jsx(on,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:x,children:g.jsx(Qa,{className:"size-4"})})]}):g.jsx("span",{className:Ee("truncate",{"text-red-800 font-normal dark:text-red-200":$,"text-green-800 font-normal dark:text-green-200":L,"text-sky-800 font-normal dark:text-sky-200":D&&!$&&!L}),onDoubleClick:S,children:F?g.jsxs(g.Fragment,{children:[e.name," ",g.jsx("span",{className:"font-medium",children:"→"})," ",F]}):e.name}),e.comments&&!d?g.jsxs(Zt,{children:[g.jsx(Qt,{asChild:!0,children:g.jsx("div",{className:"shrink-0 cursor-pointer text-muted-foreground",children:g.jsx(sm,{size:14})})}),g.jsx(Jt,{children:e.comments})]}):null]}),d?null:g.jsxs("div",{className:"flex max-w-[35%] justify-end gap-1.5 truncate hover:shrink-0",children:[e.primaryKey?g.jsx("div",{className:Ee("text-muted-foreground",c?"":"group-hover:hidden",$?"text-red-800 dark:text-red-200":"",L?"text-green-800 dark:text-green-200":"",D&&!$&&!L?"text-sky-800 dark:text-sky-200":""),children:g.jsx(im,{size:14})}):null,g.jsxs("div",{className:Ee("content-center truncate text-right text-xs text-muted-foreground",c?"":"group-hover:hidden",$?"text-red-800 dark:text-red-200":"",L?"text-green-800 dark:text-green-200":"",D&&!$&&!L?"text-sky-800 dark:text-sky-200":""),children:[C?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"line-through",children:e.type.name.split(" ")[0]})," ",C.name.split(" ")[0]]}):e.type.name.split(" ")[0],e.nullable?"?":""]}),c?null:g.jsx("div",{className:"hidden flex-row group-hover:flex",children:g.jsx(on,{variant:"ghost",className:"size-6 p-0 hover:bg-primary-foreground",onClick:I=>{I.stopPropagation(),s(n,e.id)},children:g.jsx(nc,{className:"size-3.5 text-red-700"})})})]})]})});xl.displayName="TableNodeField";var vl=h.forwardRef((e,t)=>{const{children:n,...r}=e,o=h.Children.toArray(n),i=o.find(Sw);if(i){const s=i.props.children,a=o.map(c=>c===i?h.Children.count(s)>1?h.Children.only(null):h.isValidElement(s)?s.props.children:null:c);return g.jsx(Xo,{...r,ref:t,children:h.isValidElement(s)?h.cloneElement(s,void 0,a):null})}return g.jsx(Xo,{...r,ref:t,children:n})});vl.displayName="Slot";var Xo=h.forwardRef((e,t)=>{const{children:n,...r}=e;if(h.isValidElement(n)){const o=Nw(n);return h.cloneElement(n,{...Mw(r,n.props),ref:t?Go(t,o):o})}return h.Children.count(n)>1?h.Children.only(null):null});Xo.displayName="SlotClone";var Ew=({children:e})=>g.jsx(g.Fragment,{children:e});function Sw(e){return h.isValidElement(e)&&e.type===Ew}function Mw(e,t){const n={...t};for(const r in t){const o=e[r],i=t[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{i(...a),o(...a)}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...e,...n}}function Nw(e){var r,o;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Yo=["Enter"," "],Tw=["ArrowDown","PageUp","Home"],wl=["ArrowUp","PageDown","End"],kw=[...Tw,...wl],Rw={ltr:[...Yo,"ArrowRight"],rtl:[...Yo,"ArrowLeft"]},Dw={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Tn="Menu",[wn,Iw,Aw]=La(Tn),[bt,bl]=Cn(Tn,[Aw,nl,Ku]),kn=nl(),Cl=Ku(),[_l,at]=bt(Tn),[Pw,Rn]=bt(Tn),El=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:i,modal:s=!0}=e,a=kn(t),[c,u]=h.useState(null),d=h.useRef(!1),l=Be(i),f=Za(o);return h.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),g.jsx(dl,{...a,children:g.jsx(_l,{scope:t,open:n,onOpenChange:l,content:c,onContentChange:u,children:g.jsx(Pw,{scope:t,onClose:h.useCallback(()=>l(!1),[l]),isUsingKeyboardRef:d,dir:f,modal:s,children:r})})})};El.displayName=Tn;var jw="MenuAnchor",gi=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=kn(n);return g.jsx(tw,{...o,...r,ref:t})});gi.displayName=jw;var yi="MenuPortal",[$w,Sl]=bt(yi,{forceMount:void 0}),Ml=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,i=at(yi,t);return g.jsx($w,{scope:t,forceMount:n,children:g.jsx(pr,{present:n||i.open,children:g.jsx(za,{asChild:!0,container:o,children:r})})})};Ml.displayName=yi;var Ae="MenuContent",[Lw,xi]=bt(Ae),Nl=h.forwardRef((e,t)=>{const n=Sl(Ae,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,i=at(Ae,e.__scopeMenu),s=Rn(Ae,e.__scopeMenu);return g.jsx(wn.Provider,{scope:e.__scopeMenu,children:g.jsx(pr,{present:r||i.open,children:g.jsx(wn.Slot,{scope:e.__scopeMenu,children:s.modal?g.jsx(Ow,{...o,ref:t}):g.jsx(Fw,{...o,ref:t})})})})}),Ow=h.forwardRef((e,t)=>{const n=at(Ae,e.__scopeMenu),r=h.useRef(null),o=ke(t,r);return h.useEffect(()=>{const i=r.current;if(i)return Zh(i)},[]),g.jsx(vi,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:le(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Fw=h.forwardRef((e,t)=>{const n=at(Ae,e.__scopeMenu);return g.jsx(vi,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),vi=h.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:l,onInteractOutside:f,onDismiss:m,disableOutsideScroll:p,...y}=e,w=at(Ae,n),v=Rn(Ae,n),_=kn(n),b=Cl(n),x=Iw(n),[M,j]=h.useState(null),E=h.useRef(null),N=ke(t,E,w.onContentChange),R=h.useRef(0),P=h.useRef(""),$=h.useRef(0),L=h.useRef(null),F=h.useRef("right"),C=h.useRef(0),D=p?Ka:h.Fragment,S=p?{as:vl,allowPinchZoom:!0}:void 0,I=k=>{var X,V;const O=P.current+k,z=x().filter(ee=>!ee.disabled),B=document.activeElement,ne=(X=z.find(ee=>ee.ref.current===B))==null?void 0:X.textValue,U=z.map(ee=>ee.textValue),J=Zw(U,O,ne),Z=(V=z.find(ee=>ee.textValue===J))==null?void 0:V.ref.current;(function ee(ie){P.current=ie,window.clearTimeout(R.current),ie!==""&&(R.current=window.setTimeout(()=>ee(""),1e3))})(O),Z&&setTimeout(()=>Z.focus())};h.useEffect(()=>()=>window.clearTimeout(R.current),[]),fh();const A=h.useCallback(k=>{var z,B;return F.current===((z=L.current)==null?void 0:z.side)&&Jw(k,(B=L.current)==null?void 0:B.area)},[]);return g.jsx(Lw,{scope:n,searchRef:P,onItemEnter:h.useCallback(k=>{A(k)&&k.preventDefault()},[A]),onItemLeave:h.useCallback(k=>{var O;A(k)||((O=E.current)==null||O.focus(),j(null))},[A]),onTriggerLeave:h.useCallback(k=>{A(k)&&k.preventDefault()},[A]),pointerGraceTimerRef:$,onPointerGraceIntentChange:h.useCallback(k=>{L.current=k},[]),children:g.jsx(D,{...S,children:g.jsx(fl,{asChild:!0,trapped:o,onMountAutoFocus:le(i,k=>{var O;k.preventDefault(),(O=E.current)==null||O.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:g.jsx(qo,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:l,onInteractOutside:f,onDismiss:m,children:g.jsx(Yv,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:j,onEntryFocus:le(c,k=>{v.isUsingKeyboardRef.current||k.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(nw,{role:"menu","aria-orientation":"vertical","data-state":Xl(w.open),"data-radix-menu-content":"",dir:v.dir,..._,...y,ref:N,style:{outline:"none",...y.style},onKeyDown:le(y.onKeyDown,k=>{const z=k.target.closest("[data-radix-menu-content]")===k.currentTarget,B=k.ctrlKey||k.altKey||k.metaKey,ne=k.key.length===1;z&&(k.key==="Tab"&&k.preventDefault(),!B&&ne&&I(k.key));const U=E.current;if(k.target!==U||!kw.includes(k.key))return;k.preventDefault();const Z=x().filter(X=>!X.disabled).map(X=>X.ref.current);wl.includes(k.key)&&Z.reverse(),Kw(Z)}),onBlur:le(e.onBlur,k=>{k.currentTarget.contains(k.target)||(window.clearTimeout(R.current),P.current="")}),onPointerMove:le(e.onPointerMove,bn(k=>{const O=k.target,z=C.current!==k.clientX;if(k.currentTarget.contains(O)&&z){const B=k.clientX>C.current?"right":"left";F.current=B,C.current=k.clientX}}))})})})})})})});Nl.displayName=Ae;var Hw="MenuGroup",wi=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(Se.div,{role:"group",...r,ref:t})});wi.displayName=Hw;var zw="MenuLabel",Tl=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(Se.div,{...r,ref:t})});Tl.displayName=zw;var hr="MenuItem",ea="menu.itemSelect",jr=h.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,i=h.useRef(null),s=Rn(hr,e.__scopeMenu),a=xi(hr,e.__scopeMenu),c=ke(t,i),u=h.useRef(!1),d=()=>{const l=i.current;if(!n&&l){const f=new CustomEvent(ea,{bubbles:!0,cancelable:!0});l.addEventListener(ea,m=>r==null?void 0:r(m),{once:!0}),sa(l,f),f.defaultPrevented?u.current=!1:s.onClose()}};return g.jsx(kl,{...o,ref:c,disabled:n,onClick:le(e.onClick,d),onPointerDown:l=>{var f;(f=e.onPointerDown)==null||f.call(e,l),u.current=!0},onPointerUp:le(e.onPointerUp,l=>{var f;u.current||(f=l.currentTarget)==null||f.click()}),onKeyDown:le(e.onKeyDown,l=>{const f=a.searchRef.current!=="";n||f&&l.key===" "||Yo.includes(l.key)&&(l.currentTarget.click(),l.preventDefault())})})});jr.displayName=hr;var kl=h.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...i}=e,s=xi(hr,n),a=Cl(n),c=h.useRef(null),u=ke(t,c),[d,l]=h.useState(!1),[f,m]=h.useState("");return h.useEffect(()=>{const p=c.current;p&&m((p.textContent??"").trim())},[i.children]),g.jsx(wn.ItemSlot,{scope:n,disabled:r,textValue:o??f,children:g.jsx(Wv,{asChild:!0,...a,focusable:!r,children:g.jsx(Se.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:le(e.onPointerMove,bn(p=>{r?s.onItemLeave(p):(s.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:le(e.onPointerLeave,bn(p=>s.onItemLeave(p))),onFocus:le(e.onFocus,()=>l(!0)),onBlur:le(e.onBlur,()=>l(!1))})})})}),Bw="MenuCheckboxItem",Rl=h.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return g.jsx(jl,{scope:e.__scopeMenu,checked:n,children:g.jsx(jr,{role:"menuitemcheckbox","aria-checked":mr(n)?"mixed":n,...o,ref:t,"data-state":_i(n),onSelect:le(o.onSelect,()=>r==null?void 0:r(mr(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Rl.displayName=Bw;var Dl="MenuRadioGroup",[Vw,Xw]=bt(Dl,{value:void 0,onValueChange:()=>{}}),Il=h.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,i=Be(r);return g.jsx(Vw,{scope:e.__scopeMenu,value:n,onValueChange:i,children:g.jsx(wi,{...o,ref:t})})});Il.displayName=Dl;var Al="MenuRadioItem",Pl=h.forwardRef((e,t)=>{const{value:n,...r}=e,o=Xw(Al,e.__scopeMenu),i=n===o.value;return g.jsx(jl,{scope:e.__scopeMenu,checked:i,children:g.jsx(jr,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":_i(i),onSelect:le(r.onSelect,()=>{var s;return(s=o.onValueChange)==null?void 0:s.call(o,n)},{checkForDefaultPrevented:!1})})})});Pl.displayName=Al;var bi="MenuItemIndicator",[jl,Yw]=bt(bi,{checked:!1}),$l=h.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,i=Yw(bi,n);return g.jsx(pr,{present:r||mr(i.checked)||i.checked===!0,children:g.jsx(Se.span,{...o,ref:t,"data-state":_i(i.checked)})})});$l.displayName=bi;var Ww="MenuSeparator",Ll=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return g.jsx(Se.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Ll.displayName=Ww;var Gw="MenuArrow",Ol=h.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=kn(n);return g.jsx(rw,{...o,...r,ref:t})});Ol.displayName=Gw;var Ci="MenuSub",[Uw,Fl]=bt(Ci),Hl=e=>{const{__scopeMenu:t,children:n,open:r=!1,onOpenChange:o}=e,i=at(Ci,t),s=kn(t),[a,c]=h.useState(null),[u,d]=h.useState(null),l=Be(o);return h.useEffect(()=>(i.open===!1&&l(!1),()=>l(!1)),[i.open,l]),g.jsx(dl,{...s,children:g.jsx(_l,{scope:t,open:r,onOpenChange:l,content:u,onContentChange:d,children:g.jsx(Uw,{scope:t,contentId:yo(),triggerId:yo(),trigger:a,onTriggerChange:c,children:n})})})};Hl.displayName=Ci;var nn="MenuSubTrigger",zl=h.forwardRef((e,t)=>{const n=at(nn,e.__scopeMenu),r=Rn(nn,e.__scopeMenu),o=Fl(nn,e.__scopeMenu),i=xi(nn,e.__scopeMenu),s=h.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=h.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return h.useEffect(()=>d,[d]),h.useEffect(()=>{const l=a.current;return()=>{window.clearTimeout(l),c(null)}},[a,c]),g.jsx(gi,{asChild:!0,...u,children:g.jsx(kl,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":Xl(n.open),...e,ref:Go(t,o.onTriggerChange),onClick:l=>{var f;(f=e.onClick)==null||f.call(e,l),!(e.disabled||l.defaultPrevented)&&(l.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:le(e.onPointerMove,bn(l=>{i.onItemEnter(l),!l.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:le(e.onPointerLeave,bn(l=>{var m,p;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const y=(p=n.content)==null?void 0:p.dataset.side,w=y==="right",v=w?-5:5,_=f[w?"left":"right"],b=f[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:l.clientX+v,y:l.clientY},{x:_,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:_,y:f.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(l),l.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:le(e.onKeyDown,l=>{var m;const f=i.searchRef.current!=="";e.disabled||f&&l.key===" "||Rw[r.dir].includes(l.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),l.preventDefault())})})})});zl.displayName=nn;var Bl="MenuSubContent",Vl=h.forwardRef((e,t)=>{const n=Sl(Ae,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,i=at(Ae,e.__scopeMenu),s=Rn(Ae,e.__scopeMenu),a=Fl(Bl,e.__scopeMenu),c=h.useRef(null),u=ke(t,c);return g.jsx(wn.Provider,{scope:e.__scopeMenu,children:g.jsx(pr,{present:r||i.open,children:g.jsx(wn.Slot,{scope:e.__scopeMenu,children:g.jsx(vi,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var l;s.isUsingKeyboardRef.current&&((l=c.current)==null||l.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:le(e.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:le(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:le(e.onKeyDown,d=>{var m;const l=d.currentTarget.contains(d.target),f=Dw[s.dir].includes(d.key);l&&f&&(i.onOpenChange(!1),(m=a.trigger)==null||m.focus(),d.preventDefault())})})})})})});Vl.displayName=Bl;function Xl(e){return e?"open":"closed"}function mr(e){return e==="indeterminate"}function _i(e){return mr(e)?"indeterminate":e?"checked":"unchecked"}function Kw(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function qw(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Zw(e,t,n){const o=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=qw(e,Math.max(i,0));o.length===1&&(s=s.filter(u=>u!==n));const c=s.find(u=>u.toLowerCase().startsWith(o.toLowerCase()));return c!==n?c:void 0}function Qw(e,t){const{x:n,y:r}=e;let o=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const a=t[i].x,c=t[i].y,u=t[s].x,d=t[s].y;c>r!=d>r&&n<(u-a)*(r-c)/(d-c)+a&&(o=!o)}return o}function Jw(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Qw(n,t)}function bn(e){return t=>t.pointerType==="mouse"?e(t):void 0}var eb=El,tb=gi,nb=Ml,rb=Nl,ob=wi,ib=Tl,sb=jr,ab=Rl,cb=Il,ub=Pl,lb=$l,db=Ll,fb=Ol,A2=Hl,hb=zl,mb=Vl,Ei="ContextMenu",[pb,P2]=Cn(Ei,[bl]),Me=bl(),[gb,Yl]=pb(Ei),Wl=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:o,modal:i=!0}=e,[s,a]=h.useState(!1),c=Me(t),u=Be(r),d=h.useCallback(l=>{a(l),u(l)},[u]);return g.jsx(gb,{scope:t,open:s,onOpenChange:d,modal:i,children:g.jsx(eb,{...c,dir:o,open:s,onOpenChange:d,modal:i,children:n})})};Wl.displayName=Ei;var Gl="ContextMenuTrigger",Ul=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...o}=e,i=Yl(Gl,n),s=Me(n),a=h.useRef({x:0,y:0}),c=h.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),u=h.useRef(0),d=h.useCallback(()=>window.clearTimeout(u.current),[]),l=f=>{a.current={x:f.clientX,y:f.clientY},i.onOpenChange(!0)};return h.useEffect(()=>d,[d]),h.useEffect(()=>void(r&&d()),[r,d]),g.jsxs(g.Fragment,{children:[g.jsx(tb,{...s,virtualRef:c}),g.jsx(Se.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...o,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:le(e.onContextMenu,f=>{d(),l(f),f.preventDefault()}),onPointerDown:r?e.onPointerDown:le(e.onPointerDown,Xn(f=>{d(),u.current=window.setTimeout(()=>l(f),700)})),onPointerMove:r?e.onPointerMove:le(e.onPointerMove,Xn(d)),onPointerCancel:r?e.onPointerCancel:le(e.onPointerCancel,Xn(d)),onPointerUp:r?e.onPointerUp:le(e.onPointerUp,Xn(d))})]})});Ul.displayName=Gl;var yb="ContextMenuPortal",Kl=e=>{const{__scopeContextMenu:t,...n}=e,r=Me(t);return g.jsx(nb,{...r,...n})};Kl.displayName=yb;var ql="ContextMenuContent",Zl=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Yl(ql,n),i=Me(n),s=h.useRef(!1);return g.jsx(rb,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{var c;(c=e.onCloseAutoFocus)==null||c.call(e,a),!a.defaultPrevented&&s.current&&a.preventDefault(),s.current=!1},onInteractOutside:a=>{var c;(c=e.onInteractOutside)==null||c.call(e,a),!a.defaultPrevented&&!o.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Zl.displayName=ql;var xb="ContextMenuGroup",vb=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(ob,{...o,...r,ref:t})});vb.displayName=xb;var wb="ContextMenuLabel",Ql=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(ib,{...o,...r,ref:t})});Ql.displayName=wb;var bb="ContextMenuItem",Jl=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(sb,{...o,...r,ref:t})});Jl.displayName=bb;var Cb="ContextMenuCheckboxItem",ed=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(ab,{...o,...r,ref:t})});ed.displayName=Cb;var _b="ContextMenuRadioGroup",Eb=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(cb,{...o,...r,ref:t})});Eb.displayName=_b;var Sb="ContextMenuRadioItem",td=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(ub,{...o,...r,ref:t})});td.displayName=Sb;var Mb="ContextMenuItemIndicator",nd=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(lb,{...o,...r,ref:t})});nd.displayName=Mb;var Nb="ContextMenuSeparator",rd=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(db,{...o,...r,ref:t})});rd.displayName=Nb;var Tb="ContextMenuArrow",kb=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(fb,{...o,...r,ref:t})});kb.displayName=Tb;var Rb="ContextMenuSubTrigger",od=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(hb,{...o,...r,ref:t})});od.displayName=Rb;var Db="ContextMenuSubContent",id=h.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,o=Me(n);return g.jsx(mb,{...o,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});id.displayName=Db;function Xn(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Ib=Wl,Ab=Ul,Pb=Kl,sd=Zl,ad=Ql,cd=Jl,ud=ed,ld=td,dd=nd,fd=rd,hd=od,md=id;const jb=Ib,$b=Ab,Lb=h.forwardRef(({className:e,inset:t,children:n,...r},o)=>g.jsxs(hd,{ref:o,className:Ee("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",t&&"pl-8",e),...r,children:[n,g.jsx(Of,{className:"ml-auto size-4"})]}));Lb.displayName=hd.displayName;const Ob=h.forwardRef(({className:e,...t},n)=>g.jsx(md,{ref:n,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Ob.displayName=md.displayName;const pd=h.forwardRef(({className:e,...t},n)=>g.jsx(Pb,{children:g.jsx(sd,{ref:n,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));pd.displayName=sd.displayName;const rn=h.forwardRef(({className:e,inset:t,...n},r)=>g.jsx(cd,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));rn.displayName=cd.displayName;const Fb=h.forwardRef(({className:e,children:t,checked:n,...r},o)=>g.jsxs(ud,{ref:o,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[g.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:g.jsx(dd,{children:g.jsx(jf,{className:"size-4"})})}),t]}));Fb.displayName=ud.displayName;const Hb=h.forwardRef(({className:e,children:t,...n},r)=>g.jsxs(ld,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[g.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:g.jsx(dd,{children:g.jsx(Vf,{className:"size-4 fill-current"})})}),t]}));Hb.displayName=ld.displayName;const zb=h.forwardRef(({className:e,inset:t,...n},r)=>g.jsx(ad,{ref:r,className:Ee("px-2 py-1.5 text-sm font-semibold text-foreground",t&&"pl-8",e),...n}));zb.displayName=ad.displayName;const Bb=h.forwardRef(({className:e,...t},n)=>g.jsx(fd,{ref:n,className:Ee("-mx-1 my-1 h-px bg-border",e),...t}));Bb.displayName=fd.displayName;const Vb=({children:e,table:t})=>{const{removeTable:n,readonly:r,createTable:o}=xr(),{openTableFromSidebar:i}=Ba(),{t:s}=ua(),{isMd:a}=lh("md"),{openCreateRelationshipDialog:c}=If(),u=h.useCallback(()=>{const m=df(t);m.name=`${m.name}_copy`,m.x+=30,m.y+=50,o(m)},[o,t]),d=h.useCallback(()=>{i(t.id)},[i,t.id]),l=h.useCallback(()=>{n(t.id)},[n,t.id]),f=h.useCallback(()=>{c({sourceTableId:t.id})},[c,t.id]);return!a||r?g.jsx(g.Fragment,{children:e}):g.jsxs(jb,{children:[g.jsx($b,{children:e}),g.jsxs(pd,{children:[g.jsxs(rn,{onClick:d,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.edit_table")}),g.jsx(am,{className:"size-3.5"})]}),g.jsxs(rn,{onClick:u,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.duplicate_table")}),g.jsx(om,{className:"size-3.5"})]}),g.jsxs(rn,{onClick:f,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.add_relationship")}),g.jsx(um,{className:"size-3.5"})]}),g.jsxs(rn,{onClick:l,className:"flex justify-between gap-3",children:[g.jsx("span",{children:s("table_node_context_menu.delete_table")}),g.jsx(nc,{className:"size-3.5 text-red-700"})]})]})]})},ta="top_dep_",Xb="bottom_dep_",ho="target_dep_",gd=_e.memo(({table:e,focused:t})=>{const{dependencies:n}=xr(),r=Vu(),o=fi(),i=h.useMemo(()=>{var c,u;return o.inProgress&&o.fromNode.id!==e.id&&(((c=o.fromHandle.id)==null?void 0:c.startsWith(ta))||((u=o.fromHandle.id)==null?void 0:u.startsWith(Xb)))},[o,e.id]),s=h.useMemo(()=>n.filter(c=>c.tableId===e.id).length,[n,e.id]),a=h.useRef(s);return h.useEffect(()=>{a.current!==s&&(r(e.id),a.current=s)},[e.id,r,s]),g.jsxs(g.Fragment,{children:[e.isView||e.isMaterializedView?g.jsx(Oe,{id:`${ta}${e.id}`,className:`!h-4 !w-4 !border-2 !bg-pink-600 ${t?"":"!invisible"}`,position:re.Top,type:"source"}):null,Array.from({length:s},(c,u)=>u).map(c=>g.jsx(Oe,{id:`${ho}${c}_${e.id}`,className:"!invisible",position:re.Top,type:"target"},`${ho}${c}_${e.id}`)),i?g.jsx(Oe,{id:`${ho}${s}_${e.id}`,className:i?"!absolute !left-0 !top-0 !h-full !w-full !transform-none !rounded-none !border-none !opacity-0":"!invisible",position:re.Top,type:"target"}):null]})});gd.displayName="TableNodeDependencyIndicator";const Yb=({status:e})=>e==="none"?null:g.jsx("div",{className:"absolute left-1/2 top-0 z-10 -translate-x-1/2 -translate-y-1/2",children:g.jsx("span",{className:Ee("inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium text-white",{"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":e==="new","bg-sky-100 text-sky-800 dark:bg-sky-800 dark:text-sky-100":e==="changed","bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":e==="removed"}),children:e==="new"?"New":e==="changed"?"Modified":"Deleted"})}),Yn=450,na=337,cn=224,Wn=10,Wb=_e.memo(({selected:e,dragging:t,id:n,data:{table:r,isOverlapping:o,highlightOverlappingTables:i}})=>{const{updateTable:s,relationships:a,readonly:c}=xr(),u=de(X=>X.edges),{openTableFromSidebar:d,selectSidebarSection:l}=Ba(),[f,m]=h.useState(!1),{t:p}=ua(),[y,w]=h.useState(!1),[v,_]=h.useState(r.name),b=_e.useRef(null),{getTableNewName:x,getTableNewColor:M,checkIfTableHasChange:j,checkIfNewTable:E,checkIfTableRemoved:N}=tr(),R=h.useMemo(()=>r.fields,[r.fields]),P=h.useMemo(()=>x({tableId:r.id}),[x,r.id]),$=h.useMemo(()=>M({tableId:r.id}),[M,r.id]),L=h.useMemo(()=>$||r.color,[$,r.color]),F=h.useMemo(()=>j({tableId:r.id}),[j,r.id]),C=h.useMemo(()=>E({tableId:r.id}),[E,r.id]),D=h.useMemo(()=>N({tableId:r.id}),[N,r.id]),S=u.filter(X=>{var V;return(X.source===n||X.target===n)&&(X.selected||((V=X.data)==null?void 0:V.highlighted))&&X.type==="relationship-edge"}),I=!!e&&!t,A=()=>{l("tables"),d(r.id)},k=h.useCallback(()=>{s(r.id,{width:(r.width??cn)<na?na:Yn})},[r.id,r.width,s]),O=h.useCallback(()=>{s(r.id,{width:cn})},[r.id,s]),z=()=>{m(!f)},B=h.useCallback(X=>a.some(V=>V.sourceFieldId===X.id||V.targetFieldId===X.id)||X.primaryKey,[a]),ne=h.useMemo(()=>{if(f)return R;const X=R.filter(te=>B(te)),V=R.filter(te=>!B(te)),ee=X.slice(0,Wn),ie=Wn-ee.length,Q=V.slice(0,ie);return[...ee,...Q].sort((te,ae)=>R.indexOf(te)-R.indexOf(ae))},[f,R,B]),U=h.useCallback(()=>{y&&(v.trim()&&s(r.id,{name:v.trim()}),w(!1))},[v,r.id,s,y]),J=h.useCallback(()=>{w(!1),_(r.name)},[r.name]);yl(b,U),fr("Enter",U),fr("Escape",J);const Z=X=>{X.stopPropagation(),w(!0)};return g.jsx(Vb,{table:r,children:g.jsxs("div",{className:Ee("flex w-full flex-col border-2 bg-slate-50 dark:bg-slate-950 rounded-lg shadow-sm transition-transform duration-300",e?"border-pink-600":"border-slate-500 dark:border-slate-700",o?"ring-2 ring-offset-slate-50 dark:ring-offset-slate-900 ring-blue-500 ring-offset-2":"",!i&&o?"animate-scale":"",i&&o?"animate-scale-2":"",F&&!C&&!D?"outline outline-[3px] outline-sky-500 dark:outline-sky-900 outline-offset-[5px]":"",C?"outline outline-[3px] outline-green-500 dark:outline-green-900 outline-offset-[5px]":"",D?"outline outline-[3px] outline-red-500 dark:outline-red-900 outline-offset-[5px]":""),onClick:X=>{X.detail===2&&A()},children:[g.jsx(vv,{isVisible:I,lineClassName:"!border-none !w-2",minWidth:cn,maxWidth:Yn,shouldResize:X=>X.dy===0,handleClassName:"!hidden"}),g.jsx(gd,{table:r,focused:I}),g.jsx(Yb,{status:C?"new":D?"removed":F?"changed":"none"}),g.jsx("div",{className:"h-2 rounded-t-[6px]",style:{backgroundColor:L}}),g.jsxs("div",{className:"group flex h-9 items-center justify-between bg-slate-200 px-2 dark:bg-slate-900",children:[g.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[C?g.jsxs(Zt,{children:[g.jsx(Qt,{asChild:!0,children:g.jsx(tc,{className:"size-3.5 shrink-0 text-green-600",strokeWidth:2.5})}),g.jsx(Jt,{children:"New Table"})]}):D?g.jsxs(Zt,{children:[g.jsx(Qt,{asChild:!0,children:g.jsx(ec,{className:"size-3.5 shrink-0 text-red-600",strokeWidth:2.5})}),g.jsx(Jt,{children:"Table Removed"})]}):F?g.jsxs(Zt,{children:[g.jsx(Qt,{asChild:!0,children:g.jsx(Ja,{className:"size-3.5 shrink-0 text-sky-600",strokeWidth:2.5})}),g.jsx(Jt,{children:"Table Changed"})]}):g.jsx(cm,{className:"size-3.5 shrink-0 text-gray-600 dark:text-primary"}),P?g.jsxs(Ut,{className:"flex h-5 items-center justify-center truncate rounded-sm bg-sky-200 px-2 py-0.5 text-sm font-normal text-sky-900 dark:bg-sky-800 dark:text-sky-200",children:[g.jsx("span",{className:"truncate",children:r.name}),g.jsx("span",{className:"mx-1 font-semibold",children:"→"}),g.jsx("span",{className:"truncate",children:P})]}):C?g.jsx(Ut,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-green-200 px-2 py-0.5 text-sm font-normal text-green-900 dark:bg-green-800 dark:text-green-200",children:r.name}):D?g.jsx(Ut,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-red-200 px-2 py-0.5 text-sm font-normal text-red-900 dark:bg-red-800 dark:text-red-200",children:r.name}):F?g.jsx(Ut,{className:"flex h-5 flex-col justify-center truncate rounded-sm bg-sky-200 px-2 py-0.5 text-sm font-normal text-sky-900 dark:bg-sky-800 dark:text-sky-200",children:r.name}):y&&!c?g.jsxs(g.Fragment,{children:[g.jsx(pi,{ref:b,onBlur:U,placeholder:r.name,autoFocus:!0,type:"text",value:v,onClick:X=>X.stopPropagation(),onChange:X=>_(X.target.value),className:"h-6 w-full border-[0.5px] border-blue-400 bg-slate-100 focus-visible:ring-0 dark:bg-slate-900"}),g.jsx(on,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:U,children:g.jsx(Qa,{className:"size-4"})})]}):g.jsxs(Zt,{children:[g.jsx(Qt,{asChild:!0,children:g.jsx(Ut,{className:"text-editable truncate px-2 py-0.5 text-sm font-bold",onDoubleClick:Z,children:r.name})}),g.jsx(Jt,{children:p("tool_tips.double_click_to_edit")})]})]}),g.jsxs("div",{className:"hidden shrink-0 flex-row group-hover:flex",children:[c||y?null:g.jsx(on,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:A,children:g.jsx(rm,{className:"size-4"})}),y?null:g.jsx(on,{variant:"ghost",className:"size-6 p-0 text-slate-500 hover:bg-primary-foreground hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200",onClick:r.width!==Yn?k:O,children:r.width!==Yn?g.jsx(tm,{className:"size-4"}):g.jsx(nm,{className:"size-4"})})]})]}),g.jsx("div",{className:"transition-[max-height] duration-200 ease-in-out",style:{maxHeight:f?`${R.length*2}rem`:`${Wn*2}rem`},children:R.map(X=>g.jsx(xl,{focused:I,tableNodeId:n,field:X,highlighted:S.some(V=>{var ee,ie;return((ee=V.data)==null?void 0:ee.relationship.sourceFieldId)===X.id||((ie=V.data)==null?void 0:ie.relationship.targetFieldId)===X.id}),visible:ne.includes(X),isConnectable:!r.isView},X.id))}),R.length>Wn&&g.jsx("div",{className:"z-10 flex h-8 cursor-pointer items-center justify-center rounded-b-md border-t text-xs text-muted-foreground transition-colors duration-200 hover:bg-slate-100 dark:hover:bg-slate-800",onClick:z,children:f?g.jsxs(g.Fragment,{children:[g.jsx(em,{className:"mr-1 size-3.5"}),p("show_less")]}):g.jsxs(g.Fragment,{children:[g.jsx(Jh,{className:"mr-1 size-3.5"}),p("show_more")]})})]})})});Wb.displayName="TableNode";const j2=({cardinality:e,selected:t,side:n})=>`cardinality_${t?"selected":"not_selected"}_${e}_${n}`,mo=({node:e,table:t})=>{var a,c;const n=(e==null?void 0:e.id)??(t==null?void 0:t.id)??"",r=(e==null?void 0:e.position.x)??(t==null?void 0:t.x)??0,o=(e==null?void 0:e.position.y)??(t==null?void 0:t.y)??0,i=((a=e==null?void 0:e.measured)==null?void 0:a.width)??(e==null?void 0:e.data.table.width)??(t==null?void 0:t.width)??cn,s=e?((c=e==null?void 0:e.measured)==null?void 0:c.height)??Wo((e==null?void 0:e.data.table.fields.length)??0):Wo((t==null?void 0:t.fields.length)??0);return{id:n,left:r,right:r+i,top:o,bottom:o+s}},ra=({node:e,table:t},{nodes:n,tables:r},o)=>{const i=(e==null?void 0:e.id)??(t==null?void 0:t.id)??"",s=mo(e?{node:e}:{table:t});for(const a of n??r??[]){if(i===a.id)continue;const u=mo(!!n?{node:a}:{table:a});s.left<u.right&&s.right>u.left&&s.top<u.bottom&&s.bottom>u.top?o=fw(o,i,a.id):o=hw(o,i,a.id)}return o},$2=({tables:e,nodes:t})=>{let n=ml();if(e)for(const r of e)n=ra({table:r},{tables:e},n);else for(const r of t)n=ra({node:r},{nodes:t},n);return n},Wo=e=>Math.min(e,11)*32+48,L2=e=>{const t=e.fields.length,n=Wo(t);return{width:e.width||cn,height:n}};export{za as $,ta as A,Xb as B,Of as C,w2 as D,ra as E,R2 as F,Wo as G,$2 as H,S2 as I,vn as J,f2 as K,Qs as L,cn as M,x2 as N,l2 as O,re as P,am as Q,Wx as R,v2 as S,Wb as T,y2 as U,st as V,nl as W,Za as X,dl as Y,La as Z,tw as _,d2 as a,E2 as a$,Zh as a0,fh as a1,Ka as a2,fl as a3,qo as a4,nw as a5,rw as a6,Jb as a7,jf as a8,t2 as a9,Gu as aA,b2 as aB,im as aC,sm as aD,h2 as aE,um as aF,n2 as aG,s2 as aH,r2 as aI,A2 as aJ,Ku as aK,Yv as aL,Wv as aM,xo as aN,gt as aO,vf as aP,bf as aQ,Cf as aR,c2 as aS,a2 as aT,dh as aU,lm as aV,dm as aW,gm as aX,Pv as aY,M2 as aZ,N2 as a_,e2 as aa,bl as ab,eb as ac,tb as ad,nb as ae,rb as af,ob as ag,ib as ah,db as ai,sb as aj,ab as ak,cb as al,ub as am,lb as an,fb as ao,hb as ap,mb as aq,Vf as ar,yl as as,fr as at,om as au,nc as av,pi as aw,rm as ax,Qa as ay,C2 as az,xr as b,_2 as b0,Jh as b1,em as b2,o2 as b3,_v as b4,Ky as b5,i2 as b6,Rv as b7,Df as b8,dw as b9,ml as ba,mw as bb,mm as bc,pm as bd,ua as c,li as d,tr as e,Js as f,Oo as g,j2 as h,L2 as i,T2 as j,g2 as k,I2 as l,If as m,lh as n,jb as o,$b as p,pd as q,rn as r,u2 as s,k2 as t,Ba as u,D2 as v,m2 as w,p2 as x,fo as y,ho as z};
